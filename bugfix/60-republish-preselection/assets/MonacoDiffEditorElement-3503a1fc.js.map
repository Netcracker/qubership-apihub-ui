{"version":3,"file":"MonacoDiffEditorElement-3503a1fc.js","sources":["../../packages/shared/src/components/MonacoDiffEditor/useMonacoDiffEditorElement.ts","../../packages/shared/src/components/MonacoDiffEditor/MonacoDiffEditorElement.tsx"],"sourcesContent":["/**\n * Copyright 2024-2025 NetCracker Technology Corporation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { RefObject } from 'react'\nimport { useEffect, useRef } from 'react'\nimport { editor as Editor } from 'monaco-editor'\nimport { useEffectOnce } from 'react-use'\nimport type { SpecType } from '../../utils/specs'\nimport type { LanguageType } from '../../types/languages'\nimport { LANGUAGE_TYPE_TEXT } from '../../types/languages'\nimport type { SpecItemUri } from '../../utils/specifications'\nimport { findPathLocation } from '../../utils/specifications'\n\nexport function useMonacoDiffEditorElement(options: {\n  before: string\n  after: string\n  type: SpecType\n  language?: LanguageType\n  selectedUri?: SpecItemUri\n}): RefObject<HTMLDivElement> {\n  const { before, after, type, language = LANGUAGE_TYPE_TEXT, selectedUri } = options\n\n  const ref = useRef<HTMLDivElement>(null)\n  const editor = useRef<Editor.IStandaloneDiffEditor>()\n\n  useEffectOnce(() => {\n    Editor.defineTheme('custom', {\n      base: 'vs',\n      inherit: true,\n      rules: [],\n      colors: {\n        'editor.background': '#FFFFFF',\n      },\n    })\n\n    editor.current = Editor.createDiffEditor(ref.current!, {\n      minimap: { enabled: true },\n      hover: { above: false },\n      automaticLayout: true,\n      readOnly: true,\n      wordWrap: 'on',\n      glyphMargin: true,\n      theme: 'custom',\n    })\n\n    return () => {\n      editor.current?.dispose()\n    }\n  })\n\n  useEffect(() => {\n    //todo resolve problem with load schema model by filename (like in useSetEditorModel)\n    editor.current?.setModel({\n      original: Editor.createModel(before, language),\n      modified: Editor.createModel(after, language),\n    })\n\n    return () => {\n      editor.current?.getModel()?.original?.dispose()\n      editor.current?.getModel()?.modified?.dispose()\n    }\n  }, [editor, before, after, language, type])\n\n  useEffect(() => {\n    const content = editor.current?.getModel()?.modified.getValue()\n    if (selectedUri && content) {\n      const location = findPathLocation(content, selectedUri)\n      if (location) {\n        const startLine = location?.range.start.line\n        navigateTo(editor.current!, startLine + 1)\n      }\n    }\n  }, [selectedUri])\n\n  return ref\n}\n\nfunction navigateTo(\n  editor: Editor.IStandaloneDiffEditor,\n  lineNumber: number,\n): void {\n  editor.revealLineNearTop(lineNumber, Editor.ScrollType.Smooth)\n  editor.setPosition({ lineNumber: lineNumber, column: 0 })\n  editor.focus()\n}\n","/**\n * Copyright 2024-2025 NetCracker Technology Corporation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport 'monaco-editor/esm/vs/editor/editor.all.js'\nimport 'monaco-editor/esm/vs/language/json/monaco.contribution'\nimport 'monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution'\nimport 'monaco-editor/esm/vs/basic-languages/markdown/markdown.contribution'\n\nimport type { FC } from 'react'\nimport { memo } from 'react'\nimport { useMonacoDiffEditorElement } from './useMonacoDiffEditorElement'\nimport type { SpecType } from '../../utils/specs'\nimport type { LanguageType } from '../../types/languages'\nimport type { SpecItemUri } from '../../utils/specifications'\n\nexport type MonacoDiffEditorElementProps = {\n  before: string\n  after: string\n  type: SpecType\n  language?: LanguageType\n  selectedUri?: SpecItemUri\n}\n\nconst MonacoDiffEditorElement: FC<MonacoDiffEditorElementProps> = memo<MonacoDiffEditorElementProps>(({\n  before,\n  after,\n  type,\n  language,\n  selectedUri,\n}) => {\n  const element = useMonacoDiffEditorElement({ before, after, type, language, selectedUri })\n\n  return (\n    <div\n      ref={element}\n      style={{ height: '100%' }}\n    />\n  )\n})\n\nexport default MonacoDiffEditorElement\n"],"names":["useMonacoDiffEditorElement","options","before","after","type","language","LANGUAGE_TYPE_TEXT","selectedUri","ref","useRef","editor","useEffectOnce","Editor","useEffect","content","location","findPathLocation","startLine","navigateTo","lineNumber","MonacoDiffEditorElement","memo","element","jsx"],"mappings":"0+CA0BO,SAASA,EAA2BC,EAMb,CAC5B,KAAM,CAAE,OAAAC,EAAQ,MAAAC,EAAO,KAAAC,EAAM,SAAAC,EAAWC,EAAoB,YAAAC,CAAgB,EAAAN,EAEtEO,EAAMC,SAAuB,IAAI,EACjCC,EAASD,EAAAA,SAEf,OAAAE,EAAc,KACZC,EAAO,YAAY,SAAU,CAC3B,KAAM,KACN,QAAS,GACT,MAAO,CAAC,EACR,OAAQ,CACN,oBAAqB,SACvB,CAAA,CACD,EAEDF,EAAO,QAAUE,EAAO,iBAAiBJ,EAAI,QAAU,CACrD,QAAS,CAAE,QAAS,EAAK,EACzB,MAAO,CAAE,MAAO,EAAM,EACtB,gBAAiB,GACjB,SAAU,GACV,SAAU,KACV,YAAa,GACb,MAAO,QAAA,CACR,EAEM,IAAM,QACXE,EAAAA,EAAO,UAAPA,MAAAA,EAAgB,SAAQ,EAE3B,EAEDG,EAAAA,UAAU,IAAM,OAEdH,OAAAA,EAAAA,EAAO,UAAPA,MAAAA,EAAgB,SAAS,CACvB,SAAUE,EAAO,YAAYV,EAAQG,CAAQ,EAC7C,SAAUO,EAAO,YAAYT,EAAOE,CAAQ,CAAA,GAGvC,IAAM,kBACXK,GAAAA,GAAAA,EAAAA,EAAO,UAAPA,YAAAA,EAAgB,aAAhBA,YAAAA,EAA4B,WAA5BA,MAAAA,EAAsC,WACtCA,GAAAA,GAAAA,EAAAA,EAAO,UAAPA,YAAAA,EAAgB,aAAhBA,YAAAA,EAA4B,WAA5BA,MAAAA,EAAsC,SAAQ,CAChD,EACC,CAACA,EAAQR,EAAQC,EAAOE,EAAUD,CAAI,CAAC,EAE1CS,EAAAA,UAAU,IAAM,SACd,MAAMC,GAAUJ,GAAAA,EAAAA,EAAO,UAAPA,YAAAA,EAAgB,aAAhBA,YAAAA,EAA4B,SAAS,WACrD,GAAIH,GAAeO,EAAS,CACpB,MAAAC,EAAWC,EAAiBF,EAASP,CAAW,EACtD,GAAIQ,EAAU,CACN,MAAAE,EAAYF,GAAA,YAAAA,EAAU,MAAM,MAAM,KAC7BG,EAAAR,EAAO,QAAUO,EAAY,CAAC,CAC3C,CACF,CAAA,EACC,CAACV,CAAW,CAAC,EAETC,CACT,CAEA,SAASU,EACPR,EACAS,EACM,CACNT,EAAO,kBAAkBS,EAAYP,EAAO,WAAW,MAAM,EAC7DF,EAAO,YAAY,CAAE,WAAAS,EAAwB,OAAQ,CAAG,CAAA,EACxDT,EAAO,MAAM,CACf,CC7DA,MAAAU,EAAAC,EAAA,KAAA,CAAA,CAAsG,OAAAnB,EACpG,MAAAC,EACA,KAAAC,EACA,SAAAC,EACA,YAAAE,CAEF,IAAA,CACE,MAAAe,EAAAtB,EAAA,CAAA,OAAAE,EAAA,MAAAC,EAAA,KAAAC,EAAA,SAAAC,EAAA,YAAAE,CAAA,CAAA,EAEA,OAAAgB,EACE,MAAC,CAAA,IAAAD,EACM,MAAA,CAAA,OAAA,MAAA,CACmB,CAAA,CAG9B,CAAA"}