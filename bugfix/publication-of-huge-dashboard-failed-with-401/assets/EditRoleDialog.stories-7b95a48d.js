import{P as q,R as B}from"./roles-samples-a93137d3.js";import{j as e,a as d,F as W}from"./createTheme-1c3fdb4c.js";import{r as s}from"./index-37ba2b57.js";import{d as $}from"./CloseOutlined-b96c9b00.js";import{P as Z}from"./PopupDelegate-deae3236.js";import{u as z,C as E}from"./index.esm-cb87e173.js";import{D as G}from"./DialogForm-0677080c.js";import{d as H}from"./ErrorOutlined-cc454ae4.js";import{R as O}from"./package-permissions-7239f49d.js";import{D as K,a as J}from"./DialogTitle-070406b3.js";import{I as Q}from"./IconButton-ff073d65.js";import{D as X}from"./DialogContent-8f690a13.js";import{T as Y,I as ee}from"./TextField-53e0aa4a.js";import{B as L}from"./Button-14460f64.js";import{F as oe,C as re}from"./FormControlLabel-af65f5cb.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./jsx-runtime_commonjs-proxy-2f62dfa9.js";import"./createSvgIcon-18d721fa.js";import"./clsx.m-5aa26874.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-8e56afb5.js";import"./createChainedFunction-0bab83cf.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useId-f6e37502.js";import"./useControlled-1dfdd739.js";import"./dialogTitleClasses-b9dc869d.js";import"./useTheme-a99309af.js";import"./Modal-15c27a48.js";import"./utils-360dcac8.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./Portal-5d34a236.js";import"./isHostComponent-73d6e646.js";import"./Paper-3f5febe1.js";import"./Box-315038cd.js";import"./extendSxProp-1599c125.js";import"./Typography-2070e12b.js";import"./ButtonBase-0b48aa94.js";import"./emotion-react.browser.esm-687770fd.js";import"./assertThisInitialized-081f9914.js";import"./index-891d46e9.js";import"./Menu-6c264efb.js";import"./Grow-89e5daf2.js";import"./List-a1b05c24.js";import"./ListContext-aeaca2aa.js";import"./GlobalStyles-7aea6e12.js";import"./GlobalStyles-4ceeac40.js";const b=s.memo(()=>e("div",{style:{display:"flex"},children:d("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("rect",{width:"16",height:"16",rx:"4",fill:"#0068FF"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1757 4.76285C12.5828 5.13604 12.6104 5.76861 12.2372 6.17573L7.79324 11.0236C7.19873 11.6722 6.17628 11.6722 5.58177 11.0236L3.76285 9.03937C3.38966 8.63225 3.41716 7.99968 3.82428 7.62649C4.2314 7.2533 4.86397 7.2808 5.23716 7.68792L6.68751 9.27011L10.7629 4.82428C11.136 4.41716 11.7686 4.38966 12.1757 4.76285Z",fill:"white"})]})}));try{b.displayName="CheckboxCheckedIcon",b.__docgenInfo={description:"",displayName:"CheckboxCheckedIcon",props:{}}}catch{}const k=s.memo(()=>e("div",{style:{display:"flex"},children:e("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d("g",{opacity:"0.5",children:[e("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"3.5",fill:"#F2F3F5"}),e("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"3.5",stroke:"#B4BFCF"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1757 4.76285C12.5828 5.13604 12.6104 5.76861 12.2372 6.17573L7.79324 11.0236C7.19873 11.6722 6.17628 11.6722 5.58177 11.0236L3.76285 9.03937C3.38966 8.63225 3.41716 7.99968 3.82428 7.62649C4.2314 7.2533 4.86397 7.2808 5.23716 7.68792L6.68751 9.27011L10.7629 4.82428C11.136 4.41716 11.7686 4.38966 12.1757 4.76285Z",fill:"#8F9EB4"})]})})}));try{k.displayName="CheckboxDisabledCheckedIcon",k.__docgenInfo={description:"",displayName:"CheckboxDisabledCheckedIcon",props:{}}}catch{}const w=s.memo(()=>e(Z,{type:te,render:t=>e(g,{...t})})),te="show-edit-role-dialog",g=s.memo(({open:t,setOpen:i,detail:l})=>{const[m,o,p,c]=s.useMemo(()=>{const{permissions:r,role:n,onConfirm:x,isRoleUnique:a}=l;return[r,n,x,a]},[l]),{handleSubmit:R,control:u,formState:{errors:_,isDirty:M}}=z({defaultValues:{permissions:m.filter(({permission:r})=>(o==null?void 0:o.permissions.includes(r))||r===O),role:o==null?void 0:o.role}}),V=s.useCallback(r=>{i(!1),p({key:(o==null?void 0:o.key)||"",role:r.role,permissions:r.permissions.map(n=>n.permission)})},[p,o==null?void 0:o.key,i]),y=s.useCallback(()=>{i(!1)},[i]),A=s.useCallback(({field:{value:r,onChange:n}})=>{const x=(a,h)=>{if(a)return n([...r,h]);n(r.filter(j=>j.permission!==h.permission))};return e(W,{children:m.map(a=>e(I,{permission:a,onToggleCheckbox:x,checked:r.some(h=>h.permission===a.permission)},a.permission))})},[m]),S=o?"Update":"Create",U=o?"Edit Role":"Create Role";return d(G,{open:t,onClose:y,onSubmit:R(V),width:"440px",children:[d(K,{children:[U,e(Q,{sx:{position:"absolute",right:8,top:8,color:"#626D82"},onClick:y,children:e($,{fontSize:"small"})})]}),d(X,{sx:{display:"flex",flexDirection:"column",width:"auto",minWidth:"unset"},children:[e(E,{name:"role",rules:{required:"The field must be filled",validate:o?{}:{alreadyExists:r=>(c==null?void 0:c(r))||"Role already exists"}},control:u,render:({field:r})=>{var n;return e(Y,{...r,sx:{mt:"4px",mb:"12px"},required:!0,inputProps:{required:!1},value:r.value,disabled:!!o,label:"Role Name",error:!!_.role,helperText:(n=_.role)==null?void 0:n.message,InputProps:_.role?{endAdornment:e(H,{color:"error","data-testid":"ErrorIcon"})}:{},"data-testid":"RoleNameTextField"})}}),e(ee,{required:!0,sx:{fontWeight:500,color:"#000000"},children:"Select permissions"}),e(E,{name:"permissions",control:u,render:A})]}),d(J,{children:[e(L,{variant:"contained",type:"submit",disabled:o&&!M,"data-testid":`${S}Button`,children:S}),e(L,{variant:"outlined",onClick:y,"data-testid":"CancelButton",children:"Cancel"})]})]})}),I=s.memo(({permission:t,checked:i,onToggleCheckbox:l})=>{const{permission:m,name:o}=t,p=m===O;function c(R,u){l(u,t)}return e(oe,{label:o,sx:{mt:"6px"},control:e(re,{value:t,disabled:p,checked:i,onChange:c,checkedIcon:p?e(k,{}):e(b,{}),"data-testid":`${t.permission}Checkbox`})},m)});try{w.displayName="EditRoleDialog",w.__docgenInfo={description:"",displayName:"EditRoleDialog",props:{}}}catch{}try{g.displayName="EditRolePopup",g.__docgenInfo={description:"",displayName:"EditRolePopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(value: boolean) => void"}},detail:{defaultValue:null,description:"",name:"detail",required:!1,type:{name:"Detail"}}}}}catch{}try{I.displayName="PermissionControl",I.__docgenInfo={description:"",displayName:"PermissionControl",props:{permission:{defaultValue:null,description:"",name:"permission",required:!0,type:{name:"Readonly<{ permission: PackagePermission; name: string; }>"}},checked:{defaultValue:null,description:"",name:"checked",required:!0,type:{name:"boolean"}},onToggleCheckbox:{defaultValue:null,description:"",name:"onToggleCheckbox",required:!0,type:{name:"(checked: boolean, permission: Readonly<{ permission: PackagePermission; name: string; }>) => void"}}}}}catch{}const to={title:"Edit Role Dialog",component:g},f={name:"Create",args:{open:!0,detail:{permissions:q,isRoleUnique:t=>{var i;return!((i=B)!=null&&i.some(({role:l})=>l.toLowerCase()===t.toLowerCase()))}}}},C={name:"Edit",args:{open:!0,detail:{permissions:q,role:B[3]}}};var D,N,P;f.parameters={...f.parameters,docs:{...(D=f.parameters)==null?void 0:D.docs,source:{originalSource:`{
  name: 'Create',
  args: {
    open: true,
    detail: {
      permissions: PERMISSIONS_LIST,
      isRoleUnique: (roleName: string) => !ROLES_LIST?.some(({
        role
      }) => role.toLowerCase() === roleName.toLowerCase())
    }
  }
}`,...(P=(N=f.parameters)==null?void 0:N.docs)==null?void 0:P.source}}};var v,T,F;C.parameters={...C.parameters,docs:{...(v=C.parameters)==null?void 0:v.docs,source:{originalSource:`{
  name: 'Edit',
  args: {
    open: true,
    detail: {
      permissions: PERMISSIONS_LIST,
      role: ROLES_LIST[3]
    }
  }
}`,...(F=(T=C.parameters)==null?void 0:T.docs)==null?void 0:F.source}}};const io=["CreateStory","EditStory"];export{f as CreateStory,C as EditStory,io as __namedExportsOrder,to as default};
//# sourceMappingURL=EditRoleDialog.stories-7b95a48d.js.map
