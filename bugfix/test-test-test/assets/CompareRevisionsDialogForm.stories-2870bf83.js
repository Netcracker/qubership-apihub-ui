import{j as i,a as p}from"./createTheme-d4c6d141.js";import{r as n}from"./index-37ba2b57.js";import{a as _,C as V,u as K}from"./index.esm-cb87e173.js";import{D as $}from"./DialogForm-2cfd9c64.js";import{C as j}from"./CustomChip-bf02a2f3.js";import{S as G}from"./Swapper-9d328420.js";import{T as S}from"./Typography-d1555f73.js";import{P as D,W as L,a as E,R as B}from"./WarningApiProcessorVersion-04a86fdb.js";import{u as U}from"./index-6c7a5d00.js";import{e as H}from"./index-6b7f7c95.js";import{D as Z,a as z}from"./DialogTitle-cd1b99ce.js";import{D as X}from"./DialogContent-fd001b96.js";import{B as c}from"./Box-11e4398c.js";import{L as Y}from"./LoadingButton-cb4d7c28.js";import{B as J}from"./Button-7fbb2719.js";import{A as Q}from"./Autocomplete-2807028c.js";import{T as ee}from"./TextField-df0281ba.js";import{L as ie}from"./ListItem-843e96c4.js";import{R as re,D as te}from"./version-status-fb60f024.js";import{U as I}from"./principals-c6a73eca.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./dialogTitleClasses-c8d9dbc5.js";import"./clsx.m-6cf3b989.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-90078124.js";import"./useTheme-0ad13214.js";import"./Modal-9f2c2b11.js";import"./utils-0c060528.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-fc00eb8c.js";import"./isHostComponent-73d6e646.js";import"./Paper-dca8f967.js";import"./useId-f6e37502.js";import"./palette-48c6076f.js";import"./colors-f8087473.js";import"./Chip-52e0400d.js";import"./createSvgIcon-473ccb66.js";import"./ButtonBase-1b5192e9.js";import"./emotion-react.browser.esm-f969ea94.js";import"./assertThisInitialized-081f9914.js";import"./jsx-runtime_commonjs-proxy-74302a61.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useControlled-1dfdd739.js";import"./Tooltip-d1587ebe.js";import"./Popper-d07ae8ca.js";import"./Grow-452ed02c.js";import"./IconButton-c2813217.js";import"./extendSxProp-acc1143e.js";import"./constants-e3f42350.js";import"./router-3bda5a86.js";import"./index-2374ef69.js";import"./api-types-41bc9880.js";import"./apihub-builder.es-920328f2.js";import"./arrays-b0979955.js";import"./ButtonWithHint-46f7d1cb.js";import"./WarningIcon-7c28d7cc.js";import"./CircularProgress-76f8944a.js";import"./usePreviousProps-c4e5492e.js";import"./index-891d46e9.js";import"./Menu-8a90c0e2.js";import"./List-59624ac0.js";import"./ListContext-aeaca2aa.js";import"./GlobalStyles-974ec2e0.js";import"./GlobalStyles-a3183719.js";import"./listItemButtonClasses-dc30136d.js";import"./package-permissions-7239f49d.js";const A=n.memo(({latest:e=!1})=>i(S,{variant:"subtitle2",fontSize:13,children:`${e?" (latest)":""}`}));try{A.displayName="LatestRevisionMark",A.__docgenInfo={description:"",displayName:"LatestRevisionMark",props:{latest:{defaultValue:null,description:"",name:"latest",required:!0,type:{name:"boolean | undefined"}}}}}catch{}function ae(e){const[r]=U();return r.get(e)??void 0}function oe(){const[e,r]=U();return n.useCallback((t,a)=>{for(const s in t)t[s]?e.set(s,t[s]):e.delete(s);r(e,a)},[e,r])}function ne(){const e=ae(D),r=oe();return n.useMemo(()=>[e,t=>r({[D]:t??""},{replace:!0})],[e,r])}const g=n.memo(({open:e,setOpen:r,setValue:t,control:a,onSubmit:s,onSwap:v,isApiTypeFetching:f,originalRevisions:o,changedRevisions:l,isRevisionsLoading:C})=>{const{packageId:w}=H(),[W]=ne(),P=W??w,[M,T]=n.useState(!1),[b,x]=n.useState(!1),y=_({control:a,name:"originalRevision"}),h=_({control:a,name:"changedRevision"});return p($,{open:e,onClose:()=>r(!1),onSubmit:s,maxWidth:"md",children:[i(Z,{children:"Select Revisions To Compare"}),p(X,{sx:le,children:[i(S,{sx:{gridArea:"originalTitle"},variant:"button",children:"Previous"}),i(V,{name:"originalRevision",control:a,render:({field:{value:m,onChange:R}})=>i(N,{value:m,onChange:u=>{u||T(!1),R(u)},controllerName:"originalRevision",revisions:o,isLoading:C,setValue:()=>t("originalRevision",null),dataTestId:"PreviousRevisionAutocomplete"})}),i(c,{sx:{gridArea:"swapper",alignSelf:"center"},children:i(G,{onSwap:v})}),i(S,{sx:{gridArea:"changedTitle"},variant:"button",children:"Current"}),i(V,{name:"changedRevision",control:a,render:({field:{value:m,onChange:R}})=>i(N,{value:m,onChange:u=>{u||x(!1),R(u)},controllerName:"changedRevision",revisions:l,isLoading:C,setValue:()=>t("changedRevision",null),dataTestId:"CurrentRevisionAutocomplete"})})]}),p(c,{sx:{maxWidth:"692px",padding:"0 24px"},children:[i(L,{versionKey:y==null?void 0:y.version,packageKey:P,type:E,hidden:b,"data-testid":"WarningApiProcessorVersionPrevios",onWarningTextChange:m=>T(!!m)}),i(L,{"data-testid":"WarningApiProcessorVersionCurrent",versionKey:h==null?void 0:h.version,packageKey:P,type:E,onWarningTextChange:m=>x(!!m)})]}),p(z,{children:[i(Y,{variant:"contained",type:"submit",disabled:M||b,loading:f,"data-testid":"CompareButton",children:"Compare"}),i(J,{variant:"outlined",onClick:()=>r(!1),"data-testid":"CancelButton",children:"Cancel"})]})]})}),N=n.memo(({value:e,onChange:r,controllerName:t,revisions:a,isLoading:s,setValue:v,dataTestId:f})=>i(Q,{sx:{gridArea:t},value:e??null,loading:s,options:s?[]:a,getOptionLabel:o=>`${B}${o.revision}`,isOptionEqualToValue:(o,l)=>o.revision===l.revision,renderOption:(o,l)=>i(se,{revision:l,props:o}),renderInput:o=>i(ee,{...o,required:!0,label:"Revision"}),onChange:(o,l)=>{v(),r(l)},"data-testid":f})),se=n.memo(({revision:e,props:r})=>n.createElement(ie,{...r,key:e.revision},p(c,{width:"100%",display:"flex",justifyContent:"space-between",children:[p(c,{display:"flex",gap:"4px",alignItems:"center",children:[`${B}${e.revision}`,i(A,{latest:e.latestRevision})]}),i(j,{value:e.status})]}))),le={display:"grid",columnGap:1,gridTemplateRows:"repeat(2, max-content)",gridTemplateColumns:"300px max-content 300px",gridTemplateAreas:`
    'originalTitle      originalTitle   changedTitle'
    'originalRevision   swapper         changedRevision'
  `};try{g.displayName="CompareRevisionsDialogForm",g.__docgenInfo={description:"",displayName:"CompareRevisionsDialogForm",props:{control:{defaultValue:null,description:"",name:"control",required:!0,type:{name:"Control<CompareRevisionsDialogFormData, any>"}},setValue:{defaultValue:null,description:"",name:"setValue",required:!0,type:{name:"UseFormSetValue<CompareRevisionsDialogFormData>"}},originalRevisions:{defaultValue:null,description:"",name:"originalRevisions",required:!0,type:{name:"readonly Readonly<{ revision: number; version: string; latestRevision: boolean; status: VersionStatus; createdBy: Principal; createdAt: string; revisionLabels?: string[] | undefined; publishMeta?: Partial<...> | undefined; }>[]"}},changedRevisions:{defaultValue:null,description:"",name:"changedRevisions",required:!0,type:{name:"readonly Readonly<{ revision: number; version: string; latestRevision: boolean; status: VersionStatus; createdBy: Principal; createdAt: string; revisionLabels?: string[] | undefined; publishMeta?: Partial<...> | undefined; }>[]"}},isApiTypeFetching:{defaultValue:null,description:"",name:"isApiTypeFetching",required:!0,type:{name:"boolean"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"() => void"}},onSwap:{defaultValue:null,description:"",name:"onSwap",required:!0,type:{name:"() => void"}},isRevisionsLoading:{defaultValue:null,description:"",name:"isRevisionsLoading",required:!0,type:{name:"boolean | undefined"}},open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(value: boolean) => void"}}}}}catch{}const O=[{revision:2,version:"2.6@2",latestRevision:!1,status:re,createdBy:{type:I,id:"user1221",name:"Name Surname",email:"name.surname@example.com",avatarUrl:"string"},createdAt:"2023-10-06T14:33:44.550622Z",revisionLabels:["my-cloud-label"],publishMeta:{commitKey:"a5d45af7",repositoryUrl:"https://git.example.com/APIHUB/apihub-registry",cloudName:"my-cloud",cloudUrl:"https://cloud.example.com",namespace:"my-cloud-release2"}},{revision:3,version:"2.6@3",latestRevision:!0,status:te,createdBy:{type:I,id:"user1221",name:"Name Surname",email:"name.surname@example.com",avatarUrl:"string"},createdAt:"2023-10-05T14:33:44.550622Z",revisionLabels:["my-cloud-label"],publishMeta:{commitKey:"a5d45af7",repositoryUrl:"https://git.example.com/APIHUB/apihub-registry",cloudName:"my-cloud",cloudUrl:"https://cloud.example.com",namespace:"my-cloud-namespace"}}],Li={component:g},me=e=>{const r=n.useMemo(()=>({changedRevision:null,originalRevision:null}),[]),{control:t,setValue:a}=K({defaultValues:r});return i(g,{...e,control:t,setValue:a})},d={name:"Default",args:{open:!0,setOpen:()=>null,onSubmit:()=>null,onSwap:()=>null,originalRevisions:O,changedRevisions:O,isApiTypeFetching:!1,isRevisionsLoading:!1},render:me};var k,F,q;d.parameters={...d.parameters,docs:{...(k=d.parameters)==null?void 0:k.docs,source:{originalSource:`{
  name: 'Default',
  args: {
    open: true,
    setOpen: () => null,
    onSubmit: () => null,
    onSwap: () => null,
    originalRevisions: revisions,
    changedRevisions: revisions,
    isApiTypeFetching: false,
    isRevisionsLoading: false
  },
  render: StoryComponent
}`,...(q=(F=d.parameters)==null?void 0:F.docs)==null?void 0:q.source}}};const Ei=["DefaultStory"];export{d as DefaultStory,Ei as __namedExportsOrder,Li as default};
//# sourceMappingURL=CompareRevisionsDialogForm.stories-2870bf83.js.map
