var he=Object.defineProperty;var de=(t,e,r)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var v=(t,e,r)=>(de(t,typeof e!="symbol"?e+"":e,r),r);import{a as fe,j as I}from"./createTheme-d4c6d141.js";import{r as d}from"./index-37ba2b57.js";import{S as se,b as pe,c as ye,d as me}from"./constants-e3f42350.js";import{m as Re,b as Ee}from"./router-3bda5a86.js";import{s as ge}from"./index-2374ef69.js";import{t as ve}from"./api-types-1ae0469d.js";import{r as V}from"./apihub-builder.es-2c0e2e8a.js";import{B as Ie}from"./ButtonWithHint-46f7d1cb.js";import{R as M}from"./WarningIcon-7c28d7cc.js";import{B as Se}from"./Box-11e4398c.js";import{T as be}from"./Typography-d1555f73.js";class we extends Error{constructor(r,n,i){super(r);v(this,"code");v(this,"status");this.name="HttpError",this.code=n,this.status=i}}const Oe={INTERNAL:"internal",EXTERNAL:"external"};function Ce(t){return t.type===Oe.INTERNAL}const or="package";function g(t){const e=new URLSearchParams;return Object.entries(t).forEach(([r,{value:n,toStringValue:i}])=>{if(Array.isArray(n)){const[s]=n;if(!s)return}(n||n===0)&&e.set(r,(i==null?void 0:i(n))??`${n}`)}),e}function Pe(){ie("/login",g({[se]:{value:!0},redirectUri:{value:location.href}}))}function ie(t,e=new URLSearchParams){const r=e.get("redirectUri")??location.href;e.set("redirectUri",r);let n=location.origin;t.includes("?")?n=`${n}${t}&${e}`:n=`${n}${t}?${e}`,window.stop(),location.replace(n)}function Te(t,e){const r=new URL(t.url),n=Re(`${Le}${e}`,r.pathname);return n&&n.params.packageId?{redirectType:De,id:n.params.packageId}:null}function K(){const e=new URL(location.href).searchParams.get(pe);return e||(location.pathname==="/login"?location.origin:location.href)}async function Ae(t="Thread is stopped"){await _e(0,t)}async function _e(t=0,e="Thread is paused"){await new Promise(r=>{console.log(e),t>0&&setTimeout(()=>{r(void 0)},t)})}const Qe="/api/v3",m={NO_PROVIDER:"no-provider",NO_ENDPOINT:"no-endpoint",TOKEN_REFRESHED:"token-refreshed",UNKNOWN:"unknown"};function A(t){return t===m.TOKEN_REFRESHED}class Ne extends Error{constructor(){super("HTTP 401 Unauthorized");v(this,"responseStatus",401);this.name="WorkerUnauthorizedError"}}async function Fe(t){const r=!new URLSearchParams(location.search).get(se);let n;if(t===401&&r){if(typeof window>"u")throw new Ne;const i=sessionStorage.getItem(ye),s=JSON.parse(i),{authConfig:o}=s,{autoLogin:a}=o;if(a){const[c]=o.identityProviders;if(n=await W(c),A(n))return n}else{const c=localStorage.getItem(me),l=c?o.identityProviders.find(u=>u.id===c):void 0;if(n=await W(l),A(n))return n}n===m.NO_PROVIDER&&Pe()}return n}async function W(t){if(!t)return m.NO_PROVIDER;let e="";if(Ce(t)){const n=g({noAutoLogin:{value:!0},redirectUri:{value:K()}}),i=g({redirectUri:{value:`${location.origin}/login?${n}`}});e=`${Qe}/auth/local/refresh?${i}`}else if(t.loginStartEndpoint){const n=g({redirectUri:{value:K()}});e=`${t.loginStartEndpoint}?${n}`}else return m.NO_ENDPOINT;const r=await fetch(e,{method:"GET",redirect:"manual"});if(r.ok)return m.TOKEN_REFRESHED;if(r.type==="opaqueredirect"){const n=r.url.replace(location.origin,"");ie(n),await Ae("Waiting for redirection...")}return console.error("Can't refresh token. Response:",r),m.UNKNOWN}const xe="/api/v1",Ue="/api/v3",Le="/api/:apiVersion",oe=5*(60*1e3);async function b(t,e,r={},n){const{basePath:i="",customErrorHandler:s,customRedirectHandler:o,ignoreNotFound:a=!1}=r,c=await fetch(`${i}${t}`,{...e,signal:n,credentials:"include"});if(!c.ok){const l=await Fe(c.status);return A(l)?b(t,e,r,n):(await ke(c,{401:!0,404:a},s),null)}return await Ve(c,o),await c.json()}async function ke(t,e,r){if(e[t.status])return Promise.reject();r?r(t):await ae(t)}async function Ve(t,e){if(t.redirected&&e){const r=e(t);r?await Me(r):await ae(t)}}async function ae(t){const[e,r,n]=await Ke(t),i={title:`Error ${t.status}`,message:e,code:r,status:n};throw dispatchEvent(new CustomEvent(We,{detail:i,bubbles:!0,composed:!0,cancelable:!1})),new we(e,r,n)}async function Me(t){dispatchEvent(new CustomEvent(qe,{detail:t,bubbles:!0,composed:!0,cancelable:!1})),window.stop()}async function Ke(t){const e=await t.json(),r=(e==null?void 0:e.message)??"Something went wrong",n=(e==null?void 0:e.code)??"",i=(e==null?void 0:e.status)??null;return e!=null&&e.params?[Object.entries(e.params).reduce((s,[o,a])=>s.replace(`$${o}`,a),r),n,i]:[r,n,i]}const We="fetch-error",qe="fetch-redirect",De="package-redirect";class Q{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(r=>r!==e),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const S=typeof window>"u"||"Deno"in window;function He(){}function q(t){return typeof t=="number"&&t>=0&&t!==1/0}function $e(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Be(t,e,r){return Ye(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function ce(t,e){if(t===e)return t;const r=H(t)&&H(e);if(r||$(t)&&$(e)){const n=r?t.length:Object.keys(t).length,i=r?e:Object.keys(e),s=i.length,o=r?[]:{};let a=0;for(let c=0;c<s;c++){const l=r?c:i[c];o[l]=ce(t[l],e[l]),o[l]===t[l]&&a++}return n===s&&a===n?t:o}return e}function D(t,e){if(t&&!e||e&&!t)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function H(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $(t){if(!B(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!B(r)||!r.hasOwnProperty("isPrototypeOf"))}function B(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ye(t){return Array.isArray(t)}function je(t){return new Promise(e=>{setTimeout(e,t)})}function Y(t){je(0).then(t)}function j(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?ce(t,e):e}class Ge extends Q{constructor(){super(),this.setup=e=>{if(!S&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const ze=new Ge;class Xe extends Q{constructor(){super(),this.setup=e=>{if(!S&&window.addEventListener){const r=()=>e();return window.addEventListener("online",r,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach(e=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Je=new Xe;function Ze(t){return(t??"online")==="online"?Je.isOnline():!0}class et{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function tt(t){return t instanceof et}function rt(){let t=[],e=0,r=u=>{u()},n=u=>{u()};const i=u=>{let h;e++;try{h=u()}finally{e--,e||a()}return h},s=u=>{e?t.push(u):Y(()=>{r(u)})},o=u=>(...h)=>{s(()=>{u(...h)})},a=()=>{const u=t;t=[],u.length&&Y(()=>{n(()=>{u.forEach(h=>{r(h)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:u=>{r=u},setBatchNotifyFunction:u=>{n=u}}}const E=rt();class nt extends Q{constructor(e,r){super(),this.client=e,this.options=r,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(r)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),G(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return _(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,r){const n=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),D(n,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=n.queryKey),this.updateQuery();const s=this.hasListeners();s&&z(this.currentQuery,i,this.options,n)&&this.executeFetch(),this.updateResult(r),s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||this.options.staleTime!==n.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==n.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)}getCurrentResult(){return this.currentResult}trackResult(e){const r={};return Object.keys(e).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(n),e[n])})}),r}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...r}={}){return this.fetch({...r,meta:{refetchPage:e}})}fetchOptimistic(e){const r=this.client.defaultQueryOptions(e),n=this.client.getQueryCache().build(this.client,r);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,r))}fetch(e){var r;return this.executeFetch({...e,cancelRefetch:(r=e.cancelRefetch)!=null?r:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let r=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(He)),r}updateStaleTimeout(){if(this.clearStaleTimeout(),S||this.currentResult.isStale||!q(this.options.staleTime))return;const r=$e(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},r)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(S||this.options.enabled===!1||!q(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||ze.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,r){const n=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==n,l=c?e.state:this.currentQueryInitialState,u=c?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:w,error:x,errorUpdatedAt:U,fetchStatus:R,status:y}=h,L=!1,k=!1,p;if(r._optimisticResults){const f=this.hasListeners(),T=!f&&G(e,r),le=f&&z(e,n,r,i);(T||le)&&(R=Ze(e.options.networkMode)?"fetching":"paused",w||(y="loading")),r._optimisticResults==="isRestoring"&&(R="idle")}if(r.keepPreviousData&&!h.dataUpdatedAt&&u!=null&&u.isSuccess&&y!=="error")p=u.data,w=u.dataUpdatedAt,y=u.status,L=!0;else if(r.select&&typeof h.data<"u")if(s&&h.data===(o==null?void 0:o.data)&&r.select===this.selectFn)p=this.selectResult;else try{this.selectFn=r.select,p=r.select(h.data),p=j(s==null?void 0:s.data,p,r),this.selectResult=p,this.selectError=null}catch(f){this.selectError=f}else p=h.data;if(typeof r.placeholderData<"u"&&typeof p>"u"&&y==="loading"){let f;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(a==null?void 0:a.placeholderData))f=s.data;else if(f=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof f<"u")try{f=r.select(f),this.selectError=null}catch(T){this.selectError=T}typeof f<"u"&&(y="success",p=j(s==null?void 0:s.data,f,r),k=!0)}this.selectError&&(x=this.selectError,p=this.selectResult,U=Date.now(),y="error");const O=R==="fetching",C=y==="loading",P=y==="error";return{status:y,fetchStatus:R,isLoading:C,isSuccess:y==="success",isError:P,isInitialLoading:C&&O,data:p,dataUpdatedAt:w,error:x,errorUpdatedAt:U,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:O,isRefetching:O&&!C,isLoadingError:P&&h.dataUpdatedAt===0,isPaused:R==="paused",isPlaceholderData:k,isPreviousData:L,isRefetchError:P&&h.dataUpdatedAt!==0,isStale:N(e,r),refetch:this.refetch,remove:this.remove}}updateResult(e){const r=this.currentResult,n=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,D(n,r))return;this.currentResult=n;const i={cache:!0},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(c=>{const l=c;return this.currentResult[l]!==r[l]&&a.has(l)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const r=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const r={};e.type==="success"?r.onSuccess=!e.manual:e.type==="error"&&!tt(e.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()}notify(e){E.batch(()=>{if(e.onSuccess){var r,n,i,s;(r=(n=this.options).onSuccess)==null||r.call(n,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,l;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(l=this.options).onSettled)==null||c.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(u=>{u(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function st(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function G(t,e){return st(t,e)||t.state.dataUpdatedAt>0&&_(t,e,e.refetchOnMount)}function _(t,e,r){if(e.enabled!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&N(t,e)}return!1}function z(t,e,r,n){return r.enabled!==!1&&(t!==e||n.enabled===!1)&&(!r.suspense||t.state.status!=="error")&&N(t,r)}function N(t,e){return t.isStaleByTime(e.staleTime)}const it=ge.useSyncExternalStore,X=d.createContext(void 0),ot=d.createContext(!1);function at(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=X),window.ReactQueryClientContext):X)}const ct=({context:t}={})=>{const e=d.useContext(at(t,d.useContext(ot)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ue=d.createContext(!1),ut=()=>d.useContext(ue);ue.Provider;function lt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const ht=d.createContext(lt()),dt=()=>d.useContext(ht);function ft(t,e){return typeof t=="function"?t(...e):!!t}const pt=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},yt=t=>{d.useEffect(()=>{t.clearReset()},[t])},mt=({result:t,errorResetBoundary:e,useErrorBoundary:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&ft(r,[t.error,n]),Rt=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Et=(t,e)=>t.isLoading&&t.isFetching&&!e,gt=(t,e,r)=>(t==null?void 0:t.suspense)&&Et(e,r),vt=(t,e,r)=>e.fetchOptimistic(t).then(({data:n})=>{t.onSuccess==null||t.onSuccess(n),t.onSettled==null||t.onSettled(n,null)}).catch(n=>{r.clearReset(),t.onError==null||t.onError(n),t.onSettled==null||t.onSettled(void 0,n)});function It(t,e){const r=ct({context:t.context}),n=ut(),i=dt(),s=r.defaultQueryOptions(t);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=E.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=E.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=E.batchCalls(s.onSettled)),Rt(s),pt(s,i),yt(i);const[o]=d.useState(()=>new e(r,s)),a=o.getOptimisticResult(s);if(it(d.useCallback(c=>n?()=>{}:o.subscribe(E.batchCalls(c)),[o,n]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),gt(s,a,n))throw vt(s,o,i);if(mt({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function F(t,e,r){const n=Be(t,e,r);return It(n,nt)}const St="version-info",bt={portal:"portal",agent:"agents"},{portal:wt,agent:ar}=bt;function Ot(t){return{queryKey:[St],queryFn:()=>Ct(t),enabled:!0,refetchInterval:oe,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}async function Ct(t){return await b(`/${t}/version.json`,{method:"get"})}const Pt="3.0.5",Tt={frontendVersion:Pt,apiProcessorVersion:"0.0.0-unknown"};function At(t=wt){const{data:e}=F(Ot(t));return e??Tt}const _t="system-info",Qt={backendVersionKey:"0.0.0",frontendVersionKey:"0.0.0",productionMode:!1,externalLinks:[],migrationInProgress:!1};function Nt(t){const e=t.externalLinks.reduce((r,n)=>{const i=n.indexOf("|");return i===-1||r.push({title:n.slice(0,i),url:n.slice(i+1)}),r},[]);return{backendVersionKey:t.backendVersion,frontendVersionKey:t.frontendVersion,productionMode:t.productionMode,externalLinks:e,notification:t.notification,migrationInProgress:t.migrationInProgress}}function Ft(t=!0){return{queryKey:[_t],queryFn:xt,select:Nt,enabled:t,refetchInterval:oe,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}async function xt(){return await b("/system/info",{method:"get"},{basePath:xe})}function Ut(t=!0){const{data:e}=F(Ft(t));return window.apihubProductionMode=(e==null?void 0:e.productionMode)??!1,e??Qt}const Lt="@",cr="@",kt="package-version-content-query-key";function Vt(t){const{packageKey:e,versionKey:r}=t,{data:{apiProcessorVersion:n}={}}=F({queryKey:[kt,e,r],queryFn:({signal:i})=>Mt(e,r,i),enabled:!!e&&!!r&&r!==Lt,select:Kt});return n}async function Mt(t,e,r,n=!1,i=!1,s=!1){const o=encodeURIComponent(t),a=encodeURIComponent(e),c=g({includeSummary:{value:n},includeOperations:{value:i},includeGroups:{value:s}}),l="/packages/:packageId/versions/:versionId";return await b(`${Ee(l,{packageId:o,versionId:a})}?${c}`,{method:"get"},{customRedirectHandler:u=>Te(u,l),basePath:Ue},r)}function Kt(t){var e;return{...t,packageKey:t.packageId,createdAt:new Date(t.createdAt).toDateString(),operationTypes:ve(Wt(t.operationTypes)),latestRevision:!(t!=null&&t.notLatestRevision),revisionsCount:t.revisionsCount??0,operationGroups:((e=t.operationGroups)==null?void 0:e.map(r=>({...r,description:(r==null?void 0:r.description)??"",operationsCount:(r==null?void 0:r.operationsCount)??0})))??[]}}function Wt(t){return(t==null?void 0:t.map(e=>{const{changesSummary:r,numberOfImpactedOperations:n}=e;return{...e,changesSummary:r&&V(r),numberOfImpactedOperations:n&&V(n)}}))??[]}const qt=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,J=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const e=t.match(qt);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},Z=t=>t==="*"||t==="x"||t==="X",ee=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},Dt=(t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e],Ht=(t,e)=>{if(Z(t)||Z(e))return 0;const[r,n]=Dt(ee(t),ee(e));return r>n?1:r<n?-1:0},te=(t,e)=>{for(let r=0;r<Math.max(t.length,e.length);r++){const n=Ht(t[r]||"0",e[r]||"0");if(n!==0)return n}return 0},$t=(t,e)=>{const r=J(t),n=J(e),i=r.pop(),s=n.pop(),o=te(r,n);return o!==0?o:i&&s?te(i.split("."),s.split(".")):i||s?i?-1:1:0},re="TooltipWarning",Bt="TextWarning",ne=d.memo(({versionKey:t,packageKey:e,type:r=re,onWarningTextChange:n,hidden:i=!1})=>{const{apiProcessorVersion:s}=At(),{migrationInProgress:o}=Ut(),a=Vt({versionKey:t,packageKey:e}),[c,l]=d.useState(""),u=d.useCallback(()=>{if(o){l("");return}if(a&&s){const h=$t(a,s);h>0?l(`The data in the version '${t}' may be incorrect, please contact the system administrators`):h<0&&l(`The data in the version '${t}' may be incorrect, as the data has not been processed according to the latest system rules. Please republish the version and if this does not help, contact the system administrators.`)}},[a,s,o,t]);if(d.useEffect(()=>(u(),()=>{l("")}),[u]),d.useEffect(()=>{n&&n(c)},[c,n]),i||o)return null;if(a&&a!==s)switch(r){case re:return I(Ie,{hint:c,color:"inherit",size:"small",disabled:!0,tooltipMaxWidth:668,startIcon:I(M,{}),"data-testid":"WarningApiProcessorVersion"});case Bt:return fe(Se,{display:"flex",children:[I(M,{}),I(be,{marginLeft:"4px","data-testid":"WarningApiProcessorTypography",variant:"body2",children:c})]});default:return null}return null});try{ne.displayName="WarningApiProcessorVersion",ne.__docgenInfo={description:"",displayName:"WarningApiProcessorVersion",props:{packageKey:{defaultValue:null,description:"",name:"packageKey",required:!1,type:{name:"string"}},versionKey:{defaultValue:null,description:"",name:"versionKey",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"TooltipWarning"'},{value:'"TextWarning"'}]}},onWarningTextChange:{defaultValue:null,description:"",name:"onWarningTextChange",required:!1,type:{name:"((text: string) => void)"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}}}}}catch{}export{or as P,cr as R,ne as W,Bt as a};
//# sourceMappingURL=WarningApiProcessorVersion-232fd54b.js.map
