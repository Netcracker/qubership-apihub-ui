import{a as f,F as y,j as e}from"./createTheme-e504d7a1.js";import{r as u}from"./index-37ba2b57.js";import{O as P}from"./OptionItem-e25d5775.js";import{d as z}from"./mui-fb0164d9.js";import{a as X}from"./constants-e3f42350.js";import{I as h,T as b}from"./TextField-53f19ca3.js";import{A as T}from"./Autocomplete-114ba1e5.js";import{d as Q}from"./debounce-517eeb3c.js";import{s as Z}from"./files-3493fd53.js";import{A as ee,U as ae}from"./operation-groups-ef2977c6.js";import{A as S,b as x}from"./operations-65d8ec2b.js";import{r as te,i as re,a as ne}from"./jsx-runtime_commonjs-proxy-350e4ed0.js";import{S as ie,o as K}from"./SidebarWithTags-bfe281f7.js";import{B as A}from"./Box-3dbc4f20.js";import{A as le,a as oe,b as se}from"./AccordionSummary-bb810e6c.js";import{T as de}from"./Typography-74efa758.js";import{r as pe}from"./reference-samples-74f6e1ef.js";import{b as ue}from"./api-types-27a6e86d.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./OverflowTooltip-48f061e8.js";import"./Tooltip-930d3447.js";import"./clsx.m-e8952646.js";import"./index-65a2139a.js";import"./useThemeProps-be56d1e2.js";import"./useTheme-e67ac9fd.js";import"./Popper-0de88a38.js";import"./ownerDocument-613eb639.js";import"./Portal-363c6d1a.js";import"./isHostComponent-73d6e646.js";import"./TransitionGroupContext-0440df69.js";import"./index-4da2af8c.js";import"./useControlled-1dfdd739.js";import"./useId-f6e37502.js";import"./Grow-7e6ee5db.js";import"./utils-4745b4c1.js";import"./inheritsLoose-5494d9cc.js";import"./CustomChip-4efdab6b.js";import"./palette-8c6d2233.js";import"./Chip-f7e42c61.js";import"./createSvgIcon-23119704.js";import"./ButtonBase-d7ff9540.js";import"./emotion-react.browser.esm-6b7ec201.js";import"./hoist-non-react-statics.cjs-b1c88361.js";import"./assertThisInitialized-081f9914.js";import"./ListItem-fed0229b.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-02314725.js";import"./isMuiElement-de695f11.js";import"./index-891d46e9.js";import"./Menu-620abe77.js";import"./Modal-ffa4feac.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Paper-024c4ac3.js";import"./List-9913b344.js";import"./GlobalStyles-cfaf7057.js";import"./IconButton-ae1303d1.js";import"./usePreviousProps-c4e5492e.js";import"./apihub-builder.es-6ece7602.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";import"./arrays-b0979955.js";import"./useIntersectionObserver-b83c97e3.js";import"./Skeleton-bf6ca5e0.js";import"./ListItemButton-3b7c05f0.js";import"./ListItemText-63c0edd0.js";import"./listItemTextClasses-3dd10bc0.js";import"./Placeholder-185d0ba9.js";import"./SearchBar-4ab47dd8.js";import"./SearchOutlined-2c969e41.js";import"./useDebounce-c4a5dbf1.js";import"./extendSxProp-c6b156d7.js";import"./packages-3bb54737.js";import"./version-status-fb60f024.js";import"./package-permissions-7239f49d.js";const ce="Filter by Package",O=u.memo(l=>{const{onSelectPackage:r,defaultPackageKey:s,required:a=!0,disableClearable:n=!1,labelText:t=ce,references:i,isLoading:g}=l,[m,p]=u.useState(""),c=u.useCallback((o,d)=>p(d),[]),k=u.useMemo(()=>m?i.filter(o=>{var d;return(d=o.name)==null?void 0:d.toLowerCase().includes(m.toLowerCase())}):i,[i,m]),V=u.useMemo(()=>i.find(o=>o.key===s)??null,[s,i]);return f(y,{children:[e(h,{required:a,htmlFor:"package-select",children:t}),e(T,{freeSolo:!0,loading:g,disableClearable:n,forcePopupIcon:!0,options:k,filterOptions:z,value:V,renderOption:(o,{key:d,name:q})=>e(P,{props:o,title:q},d),getOptionLabel:o=>o.name??"",isOptionEqualToValue:(o,d)=>o.key===d.key,onInputChange:Q(c,X),onChange:(o,d)=>r(d),renderInput:o=>e(b,{...o,id:"package-select",placeholder:"Package",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}},value:m,onKeyDown:d=>d.stopPropagation()}),"data-testid":"PackageFilter"})]})});try{O.displayName="DashboardPackageSelector",O.__docgenInfo={description:"",displayName:"DashboardPackageSelector",props:{defaultPackageKey:{defaultValue:null,description:"",name:"defaultPackageKey",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},disableClearable:{defaultValue:null,description:"",name:"disableClearable",required:!1,type:{name:"boolean"}},onSelectPackage:{defaultValue:null,description:"",name:"onSelectPackage",required:!0,type:{name:"(packageRef: Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null) => void"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}}}}}catch{}const me="Filter by Group",I=l=>{const{required:r=!1,labelText:s,value:a,onSelectValue:n,isLoading:t,apiType:i,versionContent:g}=l,m=ge(i,g);return f(y,{children:[e(h,{required:r,children:s??me}),e(T,{loading:t,disabled:!t&&m.length===N.length,forcePopupIcon:!0,value:a,options:m,renderOption:(p,c)=>e(P,{props:p,title:c,testId:`FilterByGroup-Option-${Z(c)}`},c),isOptionEqualToValue:(p,c)=>p===c,getOptionLabel:p=>p??"",renderInput:p=>e(b,{...p,id:"operation-group-filter",placeholder:"Group",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),onChange:(p,c)=>n==null?void 0:n(c??void 0),"data-testid":"OperationGroupFilter"})]})};function ge(l,r){const s=u.useMemo(()=>((r==null?void 0:r.operationGroups)??[]).filter(({apiType:a})=>a===l).map(({groupName:a})=>a),[l,r==null?void 0:r.operationGroups]);return[...N,...s]}const N=[ee,ae];try{I.displayName="OperationGroupFilter",I.__docgenInfo={description:"",displayName:"OperationGroupFilter",props:{required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onSelectValue:{defaultValue:null,description:"",name:"onSelectValue",required:!1,type:{name:"((value?: string) => void)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},apiType:{defaultValue:null,description:"",name:"apiType",required:!1,type:{name:"enum",value:[{value:'"rest"'},{value:'"graphql"'}]}},versionContent:{defaultValue:null,description:"",name:"versionContent",required:!1,type:{name:"Readonly<{ version: string; packageKey: string; status: VersionStatus; createdAt: string; createdBy: Principal; operationGroups: readonly Readonly<{ groupName: string; description: string; ... 4 more ...; template?: File; }>[]; ... 6 more ...; apiProcessorVersion: string; }> | null"}}}}}catch{}const fe="Filter by API Kind",F=u.memo(l=>{const{value:r,onSelectApiKind:s,required:a=!1,labelText:n}=l;return f(y,{children:[e(h,{required:a,children:n??fe}),e(T,{forcePopupIcon:!0,value:r,options:Object.keys(S).map(t=>t),renderOption:(t,i)=>e(P,{props:t,title:S[i],testId:`Option-${i}`},i),isOptionEqualToValue:(t,i)=>t===i,renderInput:t=>e(b,{...t,id:"api-kind-filter",placeholder:"API Kind",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),getOptionLabel:t=>S[t]??"",onChange:(t,i)=>s(i??void 0),"data-testid":"ApiKindFilter"})]})});try{F.displayName="ApiKindFilter",F.__docgenInfo={description:"",displayName:"ApiKindFilter",props:{onSelectApiKind:{defaultValue:null,description:"",name:"onSelectApiKind",required:!0,type:{name:"(value?: ApiKind | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"bwc"'},{value:'"no-bwc"'},{value:'"experimental"'}]}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}}}}}catch{}var L={},ye=re;Object.defineProperty(L,"__esModule",{value:!0});var B=L.default=void 0,Ae=ye(te()),ve=ne,_e=(0,Ae.default)((0,ve.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");B=L.default=_e;const Pe="Filter by API Audience",C=u.memo(l=>{const{value:r,onSelectApiAudience:s}=l;return f(y,{children:[e(h,{children:Pe}),e(T,{forcePopupIcon:!0,value:r,options:Object.keys(x).map(a=>a),renderOption:(a,n)=>e(P,{props:a,title:x[n],testId:`Option-${n}`},n),isOptionEqualToValue:(a,n)=>a===n,renderInput:a=>e(b,{...a,id:"api-audience-filter",placeholder:"API Audience",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),getOptionLabel:a=>x[a]??"",onChange:(a,n)=>s(n??void 0),"data-testid":"ApiAudienceFilter"})]})});try{C.displayName="ApiAudienceFilter",C.__docgenInfo={description:"",displayName:"ApiAudienceFilter",props:{onSelectApiAudience:{defaultValue:null,description:"",name:"onSelectApiAudience",required:!0,type:{name:"(value?: ApiAudience | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"unknown"'},{value:'"internal"'},{value:'"external"'}]}}}}}catch{}const _=u.memo(l=>{const{selectedPackageKey:r,selectedOperationGroupName:s,selectedApiAudience:a,selectedApiKind:n,onSelectPackage:t,onSelectOperationGroup:i,onSelectApiAudience:g,onSelectApiKind:m,onClickExpandCollapseButton:p,areTagsLoading:c,fetchNextTagsPage:k,hasNextTagsPage:V,isNextTagsPageFetching:o,isReferencesLoading:d,isPackageVersionContentLoading:q,hiddenGeneralFilters:D,tags:w,references:M,versionContent:U,apiType:j,onSelectTag:W,onTagSearch:$,selectedTag:Y}=l,H=u.useCallback((Te,J)=>p(!J),[p]);return f(y,{children:[e(A,{sx:{borderBottom:"1px solid #D9D9D9",p:2},children:f(le,{expanded:!D,onChange:H,"data-testid":"GeneralFiltersAccordion",children:[e(oe,{sx:{p:0},expandIcon:e(B,{}),children:e(de,{width:"100%",noWrap:!0,variant:"button",children:"General Filters"})}),f(se,{children:[t&&e(O,{onSelectPackage:t,references:M,isLoading:d,defaultPackageKey:r,required:!1}),i&&e(A,{sx:{mt:t?1:0},children:e(I,{value:s,onSelectValue:i,isLoading:q,apiType:j,versionContent:U})}),g&&e(A,{sx:{mt:t||i?1:0},children:e(C,{value:a,onSelectApiAudience:g})}),m&&e(A,{sx:{mt:t||i||g?1:0},children:e(F,{value:n,onSelectApiKind:m})})]})]})}),e(ie,{tags:w,areTagsLoading:c,fetchNextTagsPage:k,isNextTagsPageFetching:o,hasNextTagsPage:V,onSearch:$,selectedTag:Y,onSelectTag:W})]})});try{_.displayName="OperationFilters",_.__docgenInfo={description:"",displayName:"OperationFilters",props:{selectedPackageKey:{defaultValue:null,description:"",name:"selectedPackageKey",required:!1,type:{name:"string"}},onSelectPackage:{defaultValue:null,description:"",name:"onSelectPackage",required:!1,type:{name:"((packageRef: Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null) => void)"}},selectedOperationGroupName:{defaultValue:null,description:"",name:"selectedOperationGroupName",required:!1,type:{name:"string"}},onSelectOperationGroup:{defaultValue:null,description:"",name:"onSelectOperationGroup",required:!1,type:{name:"((operationGroupName?: string) => void)"}},selectedApiAudience:{defaultValue:null,description:"",name:"selectedApiAudience",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"unknown"'},{value:'"internal"'},{value:'"external"'}]}},onSelectApiAudience:{defaultValue:null,description:"",name:"onSelectApiAudience",required:!1,type:{name:"((value?: ApiAudience) => void)"}},selectedApiKind:{defaultValue:null,description:"",name:"selectedApiKind",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"bwc"'},{value:'"no-bwc"'},{value:'"experimental"'}]}},onSelectApiKind:{defaultValue:null,description:"",name:"onSelectApiKind",required:!1,type:{name:"((value?: ApiKind) => void)"}},hiddenGeneralFilters:{defaultValue:null,description:"",name:"hiddenGeneralFilters",required:!0,type:{name:"boolean"}},onClickExpandCollapseButton:{defaultValue:null,description:"",name:"onClickExpandCollapseButton",required:!0,type:{name:"(value: boolean) => void"}},areTagsLoading:{defaultValue:null,description:"",name:"areTagsLoading",required:!0,type:{name:"boolean"}},fetchNextTagsPage:{defaultValue:null,description:"",name:"fetchNextTagsPage",required:!1,type:{name:"(() => Promise<void>)"}},isNextTagsPageFetching:{defaultValue:null,description:"",name:"isNextTagsPageFetching",required:!1,type:{name:"boolean"}},hasNextTagsPage:{defaultValue:null,description:"",name:"hasNextTagsPage",required:!1,type:{name:"HasNextPage"}},isReferencesLoading:{defaultValue:null,description:"",name:"isReferencesLoading",required:!0,type:{name:"boolean"}},isPackageVersionContentLoading:{defaultValue:null,description:"",name:"isPackageVersionContentLoading",required:!0,type:{name:"boolean"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"Tags"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},apiType:{defaultValue:null,description:"",name:"apiType",required:!0,type:{name:"enum",value:[{value:'"rest"'},{value:'"graphql"'}]}},versionContent:{defaultValue:null,description:"",name:"versionContent",required:!0,type:{name:"Readonly<{ version: string; packageKey: string; status: VersionStatus; createdAt: string; createdBy: Principal; operationGroups: readonly Readonly<{ groupName: string; description: string; ... 4 more ...; template?: File | undefined; }>[]; ... 6 more ...; apiProcessorVersion: string; }> | null"}},onTagSearch:{defaultValue:null,description:"",name:"onTagSearch",required:!1,type:{name:"((value: string) => void)"}},selectedTag:{defaultValue:null,description:"",name:"selectedTag",required:!1,type:{name:"string"}},onSelectTag:{defaultValue:null,description:"",name:"onSelectTag",required:!0,type:{name:"(value?: string | undefined) => void"}}}}}catch{}const he={createdAt:"Fri Oct 06 2023",createdBy:{name:"John Williams",type:"user",id:"JW_1234"},status:"draft",version:"2023.1@3",revisionsCount:3,packageKey:"PSB.alint-dash",key:"c90f0e0d-005c-4349-a93c-8418822e06b2",latestRevision:!0,operationGroups:[]},{useArgs:be}=__STORYBOOK_MODULE_PREVIEW_API__,$a={title:"Operation Filters",args:{tags:K,areTagsLoading:!1,isPackageVersionContentLoading:!1,isReferencesLoading:!1,references:pe,apiType:ue,versionContent:he,hiddenGeneralFilters:!1},component:_},v=l=>{const[,r]=be(),s=u.useCallback(n=>{r({tags:K.filter(t=>t.toLowerCase().includes(n.toLowerCase()))})},[r]),a=u.useCallback(n=>{r({hiddenGeneralFilters:n})},[r]);return e(_,{...l,onTagSearch:s,onClickExpandCollapseButton:a})};var E,R,G;v.parameters={...v.parameters,docs:{...(E=v.parameters)==null?void 0:E.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  const onTagSearch = useCallback((value: string) => {
    updateArgs({
      tags: operationTags.filter(tag => tag.toLowerCase().includes(value.toLowerCase()))
    });
  }, [updateArgs]);
  const onClickExpandCollapseButton = useCallback((value: boolean) => {
    updateArgs({
      hiddenGeneralFilters: value
    });
  }, [updateArgs]);
  return <OperationFilters {...args} onTagSearch={onTagSearch} onClickExpandCollapseButton={onClickExpandCollapseButton} />;
}`,...(G=(R=v.parameters)==null?void 0:R.docs)==null?void 0:G.source}}};const Ya=["DefaultStory"];export{v as DefaultStory,Ya as __namedExportsOrder,$a as default};
//# sourceMappingURL=OperationFilters.stories-22a4535e.js.map
