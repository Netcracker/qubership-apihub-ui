import{j as e,a as c,F as $}from"./createTheme-d4c6d141.js";import{r as o}from"./index-37ba2b57.js";import{C as ae,M as se,P as ce,J as de,S as pe,O as me,G as ue,R as fe}from"./SwaggerIcon-6b4aaea4.js";import{I as ge}from"./InfoContextIcon-52b511d8.js";import{C as he,F as z}from"./FileIcon-7db5e810.js";import{t as H,M as Fe,P as ye,J as _e,b as be,i as Ce,d as Ie}from"./files-772a8531.js";import{D as xe}from"./DeleteIcon-9a3e9e7a.js";import{b as Q}from"./arrays-b0979955.js";import{D as Te,u as Se,a as Ne,b as Ee,g as Re,f as B}from"./useResizeObserver-fcd31389.js";import{C as we}from"./ColumnDelimiter-b81ed7b9.js";import{T as X}from"./TextWithOverflowTooltip-664ae472.js";import{B as p}from"./Box-11e4398c.js";import{B as Z}from"./Button-7fbb2719.js";import{L as De}from"./LabelsTableCell-8888e118.js";import{D as Le}from"./constants-e3f42350.js";import{c as Ae}from"./components-a7f02bf2.js";import{T as Me,a as ve,b as Pe}from"./TableHead-ecf4b65b.js";import{T as Ve,a as A,b as C}from"./TableRow-9ee80158.js";import{P as qe,C as Oe}from"./Placeholder-7ab57df5.js";import{S as U}from"./Skeleton-e0fe84cc.js";import{E as ke}from"./EditIcon-5ae8e069.js";import{T as ze}from"./Typography-d1555f73.js";import{T as E}from"./Tooltip-d1587ebe.js";import{I as L}from"./IconButton-c2813217.js";import{f as He}from"./decorators-a57c1b78.js";import{b as Be,c as Ue}from"./api-types-41bc9880.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./createSvgIcon-473ccb66.js";import"./clsx.m-6cf3b989.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-90078124.js";import"./jsx-runtime_commonjs-proxy-74302a61.js";import"./createChainedFunction-0bab83cf.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useId-f6e37502.js";import"./useControlled-1dfdd739.js";import"./apihub-builder.es-920328f2.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";import"./OverflowTooltip-b1a37a90.js";import"./extendSxProp-acc1143e.js";import"./ButtonBase-1b5192e9.js";import"./emotion-react.browser.esm-f969ea94.js";import"./assertThisInitialized-081f9914.js";import"./inheritsLoose-5494d9cc.js";import"./CustomChip-bf02a2f3.js";import"./palette-48c6076f.js";import"./colors-f8087473.js";import"./Chip-52e0400d.js";import"./useTheme-0ad13214.js";import"./Popper-d07ae8ca.js";import"./Portal-fc00eb8c.js";import"./isHostComponent-73d6e646.js";import"./index-4da2af8c.js";import"./Grow-452ed02c.js";import"./utils-0c060528.js";import"./theme-e1aaa86c.js";import"./GlobalStyles-a3183719.js";const We=""+new URL("border-e0928461.svg",import.meta.url).href,M=o.memo(({fileKey:t,file:i,getFileClickHandler:r,getFileLeftIcon:a,getFileRightIcon:d})=>{const s=o.useMemo(()=>r(i),[i,r]),m=o.useMemo(()=>a(i),[i,a]),f=o.useMemo(()=>d(i),[i,d]);function g(){s==null||s(i)}return e(p,{sx:{display:"flex",justifyContent:"space-between",overflow:"hidden"},children:c(p,{sx:{display:"flex"},children:[m,e(Z,{disabled:!s,onClick:g,sx:{p:0,height:"20px",ml:"4px",minWidth:"fit-content"},"data-testid":"FileTitleButton",children:e(X,{tooltipText:i.name,sx:{color:s?"#0068FF":"#000000"},children:i.name})}),f]})},t)});try{M.displayName="FileCellContent",M.__docgenInfo={description:"",displayName:"FileCellContent",props:{fileKey:{defaultValue:null,description:"",name:"fileKey",required:!0,type:{name:"string"}},file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}},getFileClickHandler:{defaultValue:null,description:"",name:"getFileClickHandler",required:!0,type:{name:"(file: File) => ((file: File) => void) | null"}},getFileLeftIcon:{defaultValue:null,description:"",name:"getFileLeftIcon",required:!0,type:{name:"(file: File) => ReactNode"}},getFileRightIcon:{defaultValue:null,description:"",name:"getFileRightIcon",required:!0,type:{name:"(file: File) => ReactNode"}}}}}catch{}const R=({title:t})=>e(X,{tooltipText:t,sx:{fontSize:"inherit",color:"inherit"},children:t});try{R.displayName="CustomTableHeadCell",R.__docgenInfo={description:"",displayName:"CustomTableHeadCell",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}}}catch{}const ee="file-column",te="labels-column",oe="actions-column",ie=[{name:ee,width:300},{name:te},{name:oe,fixedWidth:90}],Ye=ie.reduce((t,{width:i,fixedWidth:r})=>t+(i||r||0),0),v=o.memo(t=>{const{filesMap:i,showPlaceholder:r=!1,isLoading:a,getFileActions:d,getFileLeftIcon:s,getFileRightIcon:m,getFileClickHandler:f}=t,g=o.useMemo(()=>[{id:ee,header:()=>e(R,{title:"File"}),cell:({row:{original:{file:l,fileKey:b}}})=>e(M,{fileKey:b,file:l,getFileClickHandler:f,getFileLeftIcon:s,getFileRightIcon:m})},{id:te,header:()=>e(R,{title:"Labels"}),cell:({row:{original:{labels:l}}})=>e(De,{labels:l})},{id:oe,cell:({row:{original:{fileActions:l}}})=>l}],[f,s,m]),w=o.useMemo(()=>Object.entries(i).map(([u,{file:l,labels:b}],re)=>({fileKey:`${re}-${u}`,file:l,fileActions:d(l),labels:b})),[i,d]),[y,I]=o.useState(Te),[_,F]=o.useState(),[,x]=o.useState(),T=o.useRef(null);Se(T,I);const h=Ne({containerWidth:y,columnModels:ie,columnSizingInfo:_,defaultMinColumnSize:60}),[n,D]=o.useState({}),{getHeaderGroups:le,getRowModel:ne,setColumnSizing:k}=Ee({data:w,columns:g,state:{columnVisibility:n},onColumnVisibilityChange:D,getCoreRowModel:Re(),columnResizeMode:"onChange",onColumnSizingChange:x,onColumnSizingInfoChange:F});return o.useEffect(()=>k(h),[k,h]),c(Me,{ref:T,sx:{overflowX:"hidden",display:"flex",flexDirection:"column"},children:[c(Ve,{sx:{minWidth:Ye},children:[e(ve,{children:le().map(u=>e(A,{children:u.headers.map((l,b)=>c(C,{align:"left",width:h?h[l.id]:l.getSize(),sx:{"&:hover":{borderRight:"2px solid rgba(224, 224, 224, 1)"}},children:[B(l.column.columnDef.header,l.getContext()),b!==u.headers.length-1&&e(we,{header:l,resizable:!0})]},l.id))},u.id))}),c(Pe,{children:[ne().rows.map(u=>e(o.Fragment,{children:e(A,{children:u.getVisibleCells().map(l=>e(C,{"data-testid":`Cell-${l.column.id}`,children:B(l.column.columnDef.cell,l.getContext())},l.id))})},u.id)),a&&e(je,{})]})]}),!Q(i)&&r&&e(qe,{sx:{width:"inherit",flexGrow:1},invisible:!r,area:Oe,message:"No files"})]})}),je=o.memo(()=>Ae(e(Ke,{}),Le)),Ke=o.memo(()=>c(A,{children:[e(C,{children:e(U,{variant:"rectangular",width:"80%"})}),e(C,{children:e(U,{variant:"rectangular",width:"80%"})}),e(C,{})]}));try{v.displayName="FileTable",v.__docgenInfo={description:"",displayName:"FileTable",props:{filesMap:{defaultValue:null,description:"",name:"filesMap",required:!0,type:{name:"FileLabelsRecord"}},showPlaceholder:{defaultValue:null,description:"",name:"showPlaceholder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},getFileClickHandler:{defaultValue:null,description:"",name:"getFileClickHandler",required:!0,type:{name:"(file: File) => ((file: File) => void) | null"}},getFileActions:{defaultValue:null,description:"",name:"getFileActions",required:!0,type:{name:"(file: File) => ReactNode"}},getFileLeftIcon:{defaultValue:null,description:"",name:"getFileLeftIcon",required:!0,type:{name:"(file: File) => ReactNode"}},getFileRightIcon:{defaultValue:null,description:"",name:"getFileRightIcon",required:!0,type:{name:"(file: File) => ReactNode"}}}}}catch{}const P=o.memo(({acceptableFileTypes:t,uploadFilesMap:i,onAddFiles:r,getFileClickHandler:a,getFileLeftIcon:d,getFileRightIcon:s,getFileActions:m,showPlaceholder:f,isLoading:g})=>{const[w,y]=o.useState(!1),I=Q(i),_=f||g,F=n=>{n.stopPropagation(),n.preventDefault()},x=o.useMemo(()=>({onDragEnter:n=>{F(n),y(!0)},onDragLeave:n=>{F(n),y(!1)},onDragOver:n=>{F(n)},onDrop:n=>{F(n),y(!1);const{dataTransfer:{files:D}}=n;r(H(D))}}),[r]),T=o.useCallback(({target:{files:n}})=>{n!==null&&r(H(n))},[r]),h=o.useMemo(()=>e($,{children:_&&e(v,{isLoading:g,showPlaceholder:f,filesMap:i,getFileClickHandler:a,getFileActions:m,getFileLeftIcon:d,getFileRightIcon:s})}),[_,g,f,i,a,m,d,s]);return!w&&_?e(p,{...x,sx:{height:1},children:h}):c(p,{component:"label",...x,htmlFor:"file-upload",sx:{position:"relative",cursor:"pointer",display:"flex",height:1},"data-testid":"FileUpload",children:[e(p,{component:"input",id:"file-upload",multiple:!0,type:"file",accept:t==null?void 0:t.toString(),onChange:T,sx:{display:"none"}}),e(p,{sx:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",gap:"8px",pointerEvents:"none",backgroundColor:"rgba(242, 243, 245, 0.4)",backgroundImage:`url(${We})`,boxSizing:"border-box",borderRadius:"10px",width:1,height:1},children:c(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"14px"},children:[e(he,{sx:{fontSize:56,color:"#626D82"}}),c(p,{sx:{display:"flex",gap:.5,width:"fit-content",alignItems:"center"},children:[e(ze,{variant:"h2",color:"#626D82",children:I?"Drop files here to attach":"Drop files here to attach or"}),!I&&e(Z,{sx:{p:0,lineHeight:"22px",fontSize:"15px",minWidth:"fit-content"},"data-testid":"BrowseButton",children:"browse"})]})]})}),e(p,{sx:{pointerEvents:"none"},children:h})]})}),V=o.memo(({file:t,onDeleteAction:i,onEditAction:r,onRestoreAction:a})=>{const d=o.useCallback(()=>{i(t)},[i,t]),s=o.useCallback(()=>{r(t)},[r,t]),m=o.useCallback(()=>{a==null||a(t)},[a,t]);return c(p,{sx:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[a&&e(E,{title:"Restore previous file",children:e(L,{size:"small",sx:{visibility:"hidden",p:0},className:"hoverable",onClick:m,"data-testid":"RestoreButton",children:e(ae,{sx:{color:"#626D82",fontSize:20}})})}),e(E,{title:"Remove",children:e(L,{sx:{visibility:"hidden",p:0},className:"hoverable",onClick:d,"data-testid":"RemoveButton",children:e(xe,{color:"#626D82"})})}),e(E,{title:"Edit",children:e(L,{sx:{visibility:"hidden",p:0},className:"hoverable",onClick:s,"data-testid":"EditButton",children:e(ke,{color:"#626D82"})})})]})}),q=o.memo(()=>e(E,{title:c($,{children:["This file has replaced one with the same name.",e("br",{}),"You can restore previous file in place of the new one by clicking Restore icon."]}),PopperProps:{sx:{".MuiTooltip-tooltip":{maxWidth:"unset"}}},children:e(ge,{sx:{ml:"6px"}})}));try{P.displayName="FileTableUpload",P.__docgenInfo={description:"",displayName:"FileTableUpload",props:{acceptableFileTypes:{defaultValue:null,description:"",name:"acceptableFileTypes",required:!1,type:{name:"string[]"}},uploadFilesMap:{defaultValue:null,description:"",name:"uploadFilesMap",required:!0,type:{name:"FileLabelsRecord"}},onAddFiles:{defaultValue:null,description:"",name:"onAddFiles",required:!0,type:{name:"(files: File[]) => void"}},getFileClickHandler:{defaultValue:null,description:"",name:"getFileClickHandler",required:!0,type:{name:"(file: File) => ((file: File) => void) | null"}},getFileLeftIcon:{defaultValue:null,description:"",name:"getFileLeftIcon",required:!0,type:{name:"(files: File) => ReactNode"}},getFileRightIcon:{defaultValue:null,description:"",name:"getFileRightIcon",required:!0,type:{name:"(files: File) => ReactNode"}},getFileActions:{defaultValue:null,description:"",name:"getFileActions",required:!0,type:{name:"(file: File) => ReactNode"}},showPlaceholder:{defaultValue:null,description:"",name:"showPlaceholder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}}}}}catch{}try{V.displayName="FileActions",V.__docgenInfo={description:"",displayName:"FileActions",props:{file:{defaultValue:null,description:"",name:"file",required:!0,type:{name:"File"}},onDeleteAction:{defaultValue:null,description:"",name:"onDeleteAction",required:!0,type:{name:"(file: File) => void"}},onEditAction:{defaultValue:null,description:"",name:"onEditAction",required:!0,type:{name:"(file: File) => void"}},onRestoreAction:{defaultValue:null,description:"",name:"onRestoreAction",required:!1,type:{name:"((file: File) => void) | null"}}}}}catch{}try{q.displayName="FileInfoIcon",q.__docgenInfo={description:"",displayName:"FileInfoIcon",props:{}}}catch{}const O=o.memo(({value:t})=>t?t===Fe?e(se,{}):t===ye?e(ce,{}):t===_e?e(de,{}):t===be?e(pe,{}):Ce(t)?e(me,{}):Ie(t)?e(ue,{}):Ge[t]??e(z,{}):e(z,{})),Ge={[Be]:e(fe,{}),[Ue]:null};try{O.displayName="SpecLogo",O.__docgenInfo={description:"",displayName:"SpecLogo",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}}}}}catch{}const ao={title:"/File Table Upload/File Table Upload",parameters:{layout:"fullscreen"},component:P,decorators:[He]},Je="Test file 1 with a super long looooooooooooooooooooooooooooooooooooooooooooong name",$e="Test file 2",S={name:"With Files",args:{uploadFilesMap:{longFileName:{file:new File([],Je),labels:["important","work"]},fileName:{file:new File([],$e),labels:["personal","holiday"]}},showPlaceholder:!0,onAddFiles:()=>null,getFileClickHandler:()=>null,getFileLeftIcon:()=>e(O,{value:""}),getFileRightIcon:()=>e(q,{}),getFileActions:t=>e(V,{file:t,onDeleteAction:()=>null,onRestoreAction:()=>null,onEditAction:()=>null})}},N={name:"Empty",args:{uploadFilesMap:{}}};var W,Y,j;S.parameters={...S.parameters,docs:{...(W=S.parameters)==null?void 0:W.docs,source:{originalSource:`{
  name: 'With Files',
  args: {
    uploadFilesMap: {
      longFileName: {
        file: new File([], longFileName),
        labels: ['important', 'work']
      },
      fileName: {
        file: new File([], fileName),
        labels: ['personal', 'holiday']
      }
    },
    showPlaceholder: true,
    onAddFiles: () => null,
    getFileClickHandler: () => null,
    getFileLeftIcon: () => <SpecLogo value={''} />,
    getFileRightIcon: () => <FileInfoIcon />,
    getFileActions: (file: File): ReactNode => {
      return <FileActions file={file} onDeleteAction={() => null} onRestoreAction={() => null} onEditAction={() => null} />;
    }
  }
}`,...(j=(Y=S.parameters)==null?void 0:Y.docs)==null?void 0:j.source}}};var K,G,J;N.parameters={...N.parameters,docs:{...(K=N.parameters)==null?void 0:K.docs,source:{originalSource:`{
  name: 'Empty',
  args: {
    uploadFilesMap: {}
  }
}`,...(J=(G=N.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const so=["WithFilesStory","EmptyStory"];export{N as EmptyStory,S as WithFilesStory,so as __namedExportsOrder,ao as default};
//# sourceMappingURL=FileTableUpload.stories-b02eef06.js.map
