var he=Object.defineProperty;var de=(t,e,n)=>e in t?he(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var T=(t,e,n)=>(de(t,typeof e!="symbol"?e+"":e,n),n);import{a as fe,j as v}from"./createTheme-d4c6d141.js";import{r as d}from"./index-37ba2b57.js";import{S as se,b as pe,c as ye,d as me}from"./constants-e3f42350.js";import{m as Re,b as Ee}from"./router-3bda5a86.js";import{s as ge}from"./index-2374ef69.js";import{t as ve}from"./api-types-41bc9880.js";import{r as V}from"./apihub-builder.es-920328f2.js";import{B as Ie}from"./ButtonWithHint-46f7d1cb.js";import{R as M}from"./WarningIcon-7c28d7cc.js";import{B as Se}from"./Box-11e4398c.js";import{T as be}from"./Typography-d1555f73.js";class we extends Error{constructor(n,r,i){super(n);T(this,"code");T(this,"status");this.name="HttpError",this.code=r,this.status=i}}const Oe={INTERNAL:"internal",EXTERNAL:"external"};function Pe(t){return t.type===Oe.INTERNAL}const an="package";function g(t){const e=new URLSearchParams;return Object.entries(t).forEach(([n,{value:r,toStringValue:i}])=>{if(Array.isArray(r)){const[s]=r;if(!s)return}(r||r===0)&&e.set(n,(i==null?void 0:i(r))??`${r}`)}),e}function Ce(){ie("/login",g({[se]:{value:!0},redirectUri:{value:location.href}}))}function ie(t,e=new URLSearchParams){const n=e.get("redirectUri")??location.href;e.set("redirectUri",n);let r=location.origin;t.includes("?")?r=`${r}${t}&${e}`:r=`${r}${t}?${e}`,window.stop(),location.replace(r)}function Te(t,e){const n=new URL(t.url),r=Re(`${Le}${e}`,n.pathname);return r&&r.params.packageId?{redirectType:qe,id:r.params.packageId}:null}function K(){const e=new URL(location.href).searchParams.get(pe);return e||(location.pathname==="/login"?location.origin:location.href)}async function Ae(t="Thread is stopped"){await _e(0,t)}async function _e(t=0,e="Thread is paused"){await new Promise(n=>{console.log(e),t>0&&setTimeout(()=>{n(void 0)},t)})}const Qe="/api/v3",m={NO_PROVIDER:"no-provider",NO_ENDPOINT:"no-endpoint",TOKEN_REFRESHED:"token-refreshed",UNKNOWN:"unknown"};function A(t){return t===m.TOKEN_REFRESHED}function Ne(t){return typeof WorkerGlobalScope<"u"&&t instanceof WorkerGlobalScope}async function Fe(t){const n=!new URLSearchParams(location.search).get(se);let r;if(t===401&&n){let i,s;Ne(self)&&({systemConfigurationDto:s}=self,i=self.lastIdentityProviderId),s=s||JSON.parse(sessionStorage.getItem(ye));const{authConfig:o}=s,{autoLogin:a}=o;if(a){const[c]=o.identityProviders;if(r=await W(c),A(r))return r}else{i=i||localStorage.getItem(me);const c=i?o.identityProviders.find(l=>l.id===i):void 0;if(r=await W(c),A(r))return r}r===m.NO_PROVIDER&&Ce()}return r}async function W(t){if(!t)return m.NO_PROVIDER;let e="";if(Pe(t)){const r=g({noAutoLogin:{value:!0},redirectUri:{value:K()}}),i=g({redirectUri:{value:`${location.origin}/login?${r}`}});e=`${Qe}/auth/local/refresh?${i}`}else if(t.loginStartEndpoint){const r=g({redirectUri:{value:K()}});e=`${t.loginStartEndpoint}?${r}`}else return m.NO_ENDPOINT;const n=await fetch(e,{method:"GET",redirect:"manual"});if(n.ok)return m.TOKEN_REFRESHED;if(n.type==="opaqueredirect"){const r=n.url.replace(location.origin,"");ie(r),await Ae("Waiting for redirection...")}return console.error("Can't refresh token. Response:",n),m.UNKNOWN}const xe="/api/v1",Ue="/api/v3",Le="/api/:apiVersion",oe=5*(60*1e3);async function S(t,e,n={},r){const{basePath:i="",customErrorHandler:s,customRedirectHandler:o,ignoreNotFound:a=!1}=n,c=await fetch(`${i}${t}`,{...e,signal:r,credentials:"include"});if(!c.ok){const l=await Fe(c.status);return A(l)?S(t,e,n,r):(await ke(c,{401:!0,404:a},s),null)}return await Ve(c,o),await c.json()}async function ke(t,e,n){if(e[t.status])return Promise.reject();n?n(t):await ae(t)}async function Ve(t,e){if(t.redirected&&e){const n=e(t);n?await Me(n):await ae(t)}}async function ae(t){const[e,n,r]=await Ke(t),i={title:`Error ${t.status}`,message:e,code:n,status:r};throw dispatchEvent(new CustomEvent(We,{detail:i,bubbles:!0,composed:!0,cancelable:!1})),new we(e,n,r)}async function Me(t){dispatchEvent(new CustomEvent(De,{detail:t,bubbles:!0,composed:!0,cancelable:!1})),window.stop()}async function Ke(t){const e=await t.json(),n=(e==null?void 0:e.message)??"Something went wrong",r=(e==null?void 0:e.code)??"",i=(e==null?void 0:e.status)??null;return e!=null&&e.params?[Object.entries(e.params).reduce((s,[o,a])=>s.replace(`$${o}`,a),n),r,i]:[n,r,i]}const We="fetch-error",De="fetch-redirect",qe="package-redirect";class Q{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(n=>n!==e),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const I=typeof window>"u"||"Deno"in window;function He(){}function D(t){return typeof t=="number"&&t>=0&&t!==1/0}function $e(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Be(t,e,n){return Ge(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function ce(t,e){if(t===e)return t;const n=H(t)&&H(e);if(n||$(t)&&$(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let c=0;c<s;c++){const l=n?c:i[c];o[l]=ce(t[l],e[l]),o[l]===t[l]&&a++}return r===s&&a===r?t:o}return e}function q(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function H(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function $(t){if(!B(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!B(n)||!n.hasOwnProperty("isPrototypeOf"))}function B(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ge(t){return Array.isArray(t)}function Ye(t){return new Promise(e=>{setTimeout(e,t)})}function G(t){Ye(0).then(t)}function Y(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?ce(t,e):e}class je extends Q{constructor(){super(),this.setup=e=>{if(!I&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const ze=new je;class Xe extends Q{constructor(){super(),this.setup=e=>{if(!I&&window.addEventListener){const n=()=>e();return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach(e=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Je=new Xe;function Ze(t){return(t??"online")==="online"?Je.isOnline():!0}class et{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function tt(t){return t instanceof et}function nt(){let t=[],e=0,n=u=>{u()},r=u=>{u()};const i=u=>{let h;e++;try{h=u()}finally{e--,e||a()}return h},s=u=>{e?t.push(u):G(()=>{n(u)})},o=u=>(...h)=>{s(()=>{u(...h)})},a=()=>{const u=t;t=[],u.length&&G(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u}}}const E=nt();class rt extends Q{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),j(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return _(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),q(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&z(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e);return this.createResult(n,e)}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(He)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),I||this.currentResult.isStale||!D(this.options.staleTime))return;const n=$e(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(I||this.options.enabled===!1||!D(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||ze.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==r,l=c?e.state:this.currentQueryInitialState,u=c?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:b,error:x,errorUpdatedAt:U,fetchStatus:R,status:y}=h,L=!1,k=!1,p;if(n._optimisticResults){const f=this.hasListeners(),C=!f&&j(e,n),le=f&&z(e,r,n,i);(C||le)&&(R=Ze(e.options.networkMode)?"fetching":"paused",b||(y="loading")),n._optimisticResults==="isRestoring"&&(R="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&u!=null&&u.isSuccess&&y!=="error")p=u.data,b=u.dataUpdatedAt,y=u.status,L=!0;else if(n.select&&typeof h.data<"u")if(s&&h.data===(o==null?void 0:o.data)&&n.select===this.selectFn)p=this.selectResult;else try{this.selectFn=n.select,p=n.select(h.data),p=Y(s==null?void 0:s.data,p,n),this.selectResult=p,this.selectError=null}catch(f){this.selectError=f}else p=h.data;if(typeof n.placeholderData<"u"&&typeof p>"u"&&y==="loading"){let f;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))f=s.data;else if(f=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof f<"u")try{f=n.select(f),this.selectError=null}catch(C){this.selectError=C}typeof f<"u"&&(y="success",p=Y(s==null?void 0:s.data,f,n),k=!0)}this.selectError&&(x=this.selectError,p=this.selectResult,U=Date.now(),y="error");const w=R==="fetching",O=y==="loading",P=y==="error";return{status:y,fetchStatus:R,isLoading:O,isSuccess:y==="success",isError:P,isInitialLoading:O&&w,data:p,dataUpdatedAt:b,error:x,errorUpdatedAt:U,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:w,isRefetching:w&&!O,isLoadingError:P&&h.dataUpdatedAt===0,isPaused:R==="paused",isPlaceholderData:k,isPreviousData:L,isRefetchError:P&&h.dataUpdatedAt!==0,isStale:N(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,q(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(c=>{const l=c;return this.currentResult[l]!==n[l]&&a.has(l)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!tt(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){E.batch(()=>{if(e.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,l;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(l=this.options).onSettled)==null||c.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(u=>{u(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function st(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function j(t,e){return st(t,e)||t.state.dataUpdatedAt>0&&_(t,e,e.refetchOnMount)}function _(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&N(t,e)}return!1}function z(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&N(t,n)}function N(t,e){return t.isStaleByTime(e.staleTime)}const it=ge.useSyncExternalStore,X=d.createContext(void 0),ot=d.createContext(!1);function at(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=X),window.ReactQueryClientContext):X)}const ct=({context:t}={})=>{const e=d.useContext(at(t,d.useContext(ot)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},ue=d.createContext(!1),ut=()=>d.useContext(ue);ue.Provider;function lt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const ht=d.createContext(lt()),dt=()=>d.useContext(ht);function ft(t,e){return typeof t=="function"?t(...e):!!t}const pt=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},yt=t=>{d.useEffect(()=>{t.clearReset()},[t])},mt=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&ft(n,[t.error,r]),Rt=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},Et=(t,e)=>t.isLoading&&t.isFetching&&!e,gt=(t,e,n)=>(t==null?void 0:t.suspense)&&Et(e,n),vt=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function It(t,e){const n=ct({context:t.context}),r=ut(),i=dt(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=E.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=E.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=E.batchCalls(s.onSettled)),Rt(s),pt(s,i),yt(i);const[o]=d.useState(()=>new e(n,s)),a=o.getOptimisticResult(s);if(it(d.useCallback(c=>r?()=>{}:o.subscribe(E.batchCalls(c)),[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),gt(s,a,r))throw vt(s,o,i);if(mt({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function F(t,e,n){const r=Be(t,e,n);return It(r,rt)}const St="version-info",bt={portal:"portal",agent:"agents"},{portal:wt,agent:cn}=bt;function Ot(t){return{queryKey:[St],queryFn:()=>Pt(t),enabled:!0,refetchInterval:oe,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}async function Pt(t){return await S(`/${t}/version.json`,{method:"get"})}const Ct="3.0.5",Tt={frontendVersion:Ct,apiProcessorVersion:"0.0.0-unknown"};function At(t=wt){const{data:e}=F(Ot(t));return e??Tt}const _t="system-info",Qt={backendVersionKey:"0.0.0",frontendVersionKey:"0.0.0",productionMode:!1,externalLinks:[],migrationInProgress:!1};function Nt(t){const e=t.externalLinks.reduce((n,r)=>{const i=r.indexOf("|");return i===-1||n.push({title:r.slice(0,i),url:r.slice(i+1)}),n},[]);return{backendVersionKey:t.backendVersion,frontendVersionKey:t.frontendVersion,productionMode:t.productionMode,externalLinks:e,notification:t.notification,migrationInProgress:t.migrationInProgress}}function Ft(t=!0){return{queryKey:[_t],queryFn:xt,select:Nt,enabled:t,refetchInterval:oe,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}async function xt(){return await S("/system/info",{method:"get"},{basePath:xe})}function Ut(t=!0){const{data:e}=F(Ft(t));return window.apihubProductionMode=(e==null?void 0:e.productionMode)??!1,e??Qt}const Lt="@",un="@",kt="package-version-content-query-key";function Vt(t){const{packageKey:e,versionKey:n}=t,{data:{apiProcessorVersion:r}={}}=F({queryKey:[kt,e,n],queryFn:({signal:i})=>Mt(e,n,i),enabled:!!e&&!!n&&n!==Lt,select:Kt});return r}async function Mt(t,e,n,r=!1,i=!1,s=!1){const o=encodeURIComponent(t),a=encodeURIComponent(e),c=g({includeSummary:{value:r},includeOperations:{value:i},includeGroups:{value:s}}),l="/packages/:packageId/versions/:versionId";return await S(`${Ee(l,{packageId:o,versionId:a})}?${c}`,{method:"get"},{customRedirectHandler:u=>Te(u,l),basePath:Ue},n)}function Kt(t){var e;return{...t,packageKey:t.packageId,createdAt:new Date(t.createdAt).toDateString(),operationTypes:ve(Wt(t.operationTypes)),latestRevision:!(t!=null&&t.notLatestRevision),revisionsCount:t.revisionsCount??0,operationGroups:((e=t.operationGroups)==null?void 0:e.map(n=>({...n,description:(n==null?void 0:n.description)??"",operationsCount:(n==null?void 0:n.operationsCount)??0})))??[]}}function Wt(t){return(t==null?void 0:t.map(e=>{const{changesSummary:n,numberOfImpactedOperations:r}=e;return{...e,changesSummary:n&&V(n),numberOfImpactedOperations:r&&V(r)}}))??[]}const Dt=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,J=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const e=t.match(Dt);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},Z=t=>t==="*"||t==="x"||t==="X",ee=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},qt=(t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e],Ht=(t,e)=>{if(Z(t)||Z(e))return 0;const[n,r]=qt(ee(t),ee(e));return n>r?1:n<r?-1:0},te=(t,e)=>{for(let n=0;n<Math.max(t.length,e.length);n++){const r=Ht(t[n]||"0",e[n]||"0");if(r!==0)return r}return 0},$t=(t,e)=>{const n=J(t),r=J(e),i=n.pop(),s=r.pop(),o=te(n,r);return o!==0?o:i&&s?te(i.split("."),s.split(".")):i||s?i?-1:1:0},ne="TooltipWarning",Bt="TextWarning",re=d.memo(({versionKey:t,packageKey:e,type:n=ne,onWarningTextChange:r,hidden:i=!1})=>{const{apiProcessorVersion:s}=At(),{migrationInProgress:o}=Ut(),a=Vt({versionKey:t,packageKey:e}),[c,l]=d.useState(""),u=d.useCallback(()=>{if(o){l("");return}if(a&&s){const h=$t(a,s);h>0?l(`The data in the version '${t}' may be incorrect, please contact the system administrators`):h<0&&l(`The data in the version '${t}' may be incorrect, as the data has not been processed according to the latest system rules. Please republish the version and if this does not help, contact the system administrators.`)}},[a,s,o,t]);if(d.useEffect(()=>(u(),()=>{l("")}),[u]),d.useEffect(()=>{r&&r(c)},[c,r]),i||o)return null;if(a&&a!==s)switch(n){case ne:return v(Ie,{hint:c,color:"inherit",size:"small",disabled:!0,tooltipMaxWidth:668,startIcon:v(M,{}),"data-testid":"WarningApiProcessorVersion"});case Bt:return fe(Se,{display:"flex",children:[v(M,{}),v(be,{marginLeft:"4px","data-testid":"WarningApiProcessorTypography",variant:"body2",children:c})]});default:return null}return null});try{re.displayName="WarningApiProcessorVersion",re.__docgenInfo={description:"",displayName:"WarningApiProcessorVersion",props:{packageKey:{defaultValue:null,description:"",name:"packageKey",required:!1,type:{name:"string"}},versionKey:{defaultValue:null,description:"",name:"versionKey",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"TooltipWarning"'},{value:'"TextWarning"'}]}},onWarningTextChange:{defaultValue:null,description:"",name:"onWarningTextChange",required:!1,type:{name:"((text: string) => void)"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}}}}}catch{}export{an as P,un as R,re as W,Bt as a};
//# sourceMappingURL=WarningApiProcessorVersion-bdc21da5.js.map
