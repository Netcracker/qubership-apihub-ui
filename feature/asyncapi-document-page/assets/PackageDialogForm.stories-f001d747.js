import{_ as j,j as e,a as b}from"./createTheme-d4c6d141.js";import{r as i}from"./index-37ba2b57.js";import{E as M,W as D,P as U}from"./packages-3bb54737.js";import{a as B}from"./constants-e3f42350.js";import{u as $,C as u}from"./index.esm-cb87e173.js";import{D as z}from"./DialogForm-2cfd9c64.js";import{d as Y}from"./mui-fb0164d9.js";import{G as H}from"./GroupIcon-13642e4e.js";import{A as J}from"./validations-0b10c8f4.js";import{r as Q,i as X,a as Z}from"./jsx-runtime_commonjs-proxy-74302a61.js";import{d as ee}from"./debounce-517eeb3c.js";import{D as te,a as re}from"./DialogTitle-cd1b99ce.js";import{D as ae}from"./DialogContent-fd001b96.js";import{T as g}from"./TextField-df0281ba.js";import{A as oe}from"./Autocomplete-2807028c.js";import{L as ie}from"./ListItem-843e96c4.js";import{_ as x}from"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import{s as ne,c as se,a as le}from"./clsx.m-6cf3b989.js";import{u as me}from"./useThemeProps-90078124.js";import{g as de}from"./listItemIconClasses-b4d57120.js";import{L as pe}from"./ListContext-aeaca2aa.js";import{L as ue}from"./ListItemText-7a135c9d.js";import{F as ce,C as fe}from"./FormControlLabel-355b08e5.js";import{L as ge}from"./LoadingButton-cb4d7c28.js";import{B as ye}from"./Button-7fbb2719.js";import{W as ke,G as Ie}from"./packages-sample-6c8fee78.js";import"./_commonjsHelpers-de833af9.js";import"./dialogTitleClasses-c8d9dbc5.js";import"./useTheme-0ad13214.js";import"./Modal-9f2c2b11.js";import"./utils-0c060528.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-fc00eb8c.js";import"./isHostComponent-73d6e646.js";import"./Paper-dca8f967.js";import"./useId-f6e37502.js";import"./Box-11e4398c.js";import"./extendSxProp-acc1143e.js";import"./ClassNameGenerator-bd600f10.js";import"./files-4a2443bf.js";import"./apihub-builder.es-95465d40.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";import"./createSvgIcon-473ccb66.js";import"./isMuiElement-de695f11.js";import"./useControlled-1dfdd739.js";import"./Typography-d1555f73.js";import"./index-891d46e9.js";import"./Menu-8a90c0e2.js";import"./Grow-452ed02c.js";import"./List-59624ac0.js";import"./GlobalStyles-974ec2e0.js";import"./GlobalStyles-a3183719.js";import"./emotion-react.browser.esm-f969ea94.js";import"./IconButton-c2813217.js";import"./ButtonBase-1b5192e9.js";import"./assertThisInitialized-081f9914.js";import"./Popper-d07ae8ca.js";import"./usePreviousProps-c4e5492e.js";import"./Chip-52e0400d.js";import"./listItemButtonClasses-dc30136d.js";import"./listItemTextClasses-450da6a6.js";import"./CircularProgress-76f8944a.js";const _e=["className"],be=r=>{const{alignItems:o,classes:n}=r;return le({root:["root",o==="flex-start"&&"alignItemsFlexStart"]},de,n)},xe=ne("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(r,o)=>{const{ownerState:n}=r;return[o.root,n.alignItems==="flex-start"&&o.alignItemsFlexStart]}})(({theme:r,ownerState:o})=>x({minWidth:56,color:(r.vars||r).palette.action.active,flexShrink:0,display:"inline-flex"},o.alignItems==="flex-start"&&{marginTop:8})),ve=i.forwardRef(function(o,n){const l=me({props:o,name:"MuiListItemIcon"}),{className:d}=l,k=j(l,_e),s=i.useContext(pe),m=x({},l,{alignItems:s.alignItems}),c=be(m);return e(xe,x({className:se(c.root,d),ownerState:m,ref:n},k))}),Se=ve;var C={},Ce=X;Object.defineProperty(C,"__esModule",{value:!0});var F=C.default=void 0,Le=Ce(Q()),he=Z,De=(0,Le.default)((0,he.jsx)("path",{d:"M6 15c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0-2c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm6-8c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0-2C9.8 3 8 4.8 8 7s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4zm6 12c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0-2c-2.2 0-4 1.8-4 4s1.8 4 4 4 4-1.8 4-4-1.8-4-4-4z"}),"WorkspacesOutlined");F=C.default=De;const v=i.memo(({open:r,setOpen:o,onSubmit:n,title:l,currentWorkspace:d,isLoading:k=!1,parentPackage:s,kind:m,packages:c=[],arePackagesLoading:P=!1,submitError:I,packageSearch:R="",onPackageSearch:f,submitText:L="Submit"})=>{const V=m===D,O=i.useMemo(()=>ee((t,a)=>f==null?void 0:f(a),B),[f]),N=d&&d.name.toLowerCase().includes(R.toLowerCase()),G=i.useMemo(()=>({...M,kind:m,parentGroup:s==null?void 0:s.key}),[s,m]),{handleSubmit:W,control:p,setValue:T,reset:h,formState:{errors:_}}=$({defaultValues:G});return i.useEffect(()=>{!r&&h()},[r,h]),b(z,{open:r,onClose:()=>o(!1),onSubmit:W(n),children:[e(te,{children:l}),b(ae,{children:[e(u,{name:"name",control:p,render:({field:t})=>e(g,{...t,autoFocus:!0,required:!0,label:"Name","data-testid":"NameTextField"})}),!V&&e(u,{name:"parentGroup",control:p,render:()=>e(oe,{options:N?[d,...c]:c,loading:P,filterOptions:Y,defaultValue:s,getOptionLabel:({name:t})=>t,renderOption:(t,{key:a,name:w,kind:K})=>i.createElement(ie,{...t,key:a},e(Se,{sx:{minWidth:3,mr:1},children:K===D?e(S,{}):e(H,{})}),e(ue,{children:w})),isOptionEqualToValue:(t,a)=>t.key===a.key,renderInput:t=>e(g,{...t,required:!0,label:"Workspace/Parent Group"}),onChange:(t,a)=>T("parentGroup",(a==null?void 0:a.key)??""),onInputChange:O,"data-testid":"ParentAutocomplete"})}),e(u,{name:"alias",control:p,rules:{validate:J},render:({field:t})=>{var a;return e(g,{...t,required:!0,label:"Alias",error:!!_.alias||!!I,helperText:!!_.alias&&((a=_.alias)==null?void 0:a.message)||!!I&&I.message,"data-testid":"AliasTextField"})}}),e(u,{name:"description",control:p,render:({field:t})=>e(g,{...t,multiline:!0,rows:"4",type:"text",label:"Description","data-testid":"DescriptionTextField"})}),e(u,{name:"packageVisibility",control:p,render:({field:t})=>e(ce,{...t,control:e(fe,{"data-testid":"PackageVisibilityCheckbox"}),label:"Private"})})]}),b(re,{children:[e(ge,{variant:"contained",type:"submit",loading:k,"data-testid":`${L}Button`,children:L}),e(ye,{variant:"outlined",onClick:()=>o(!1),"data-testid":"CancelButton",children:"Cancel"})]})]})}),S=i.memo(()=>e(F,{sx:{height:"20px",width:"20px"}}));try{v.displayName="PackageDialogForm",v.__docgenInfo={description:"",displayName:"PackageDialogForm",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(value: boolean) => void"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(value: Readonly<{ key: string; alias: string; name: string; parentGroup?: string | undefined; kind: PackageKind; description?: string | undefined; isFavorite?: boolean | undefined; serviceName?: string | undefined; ... 10 more ...; bwcErrors?: Readonly<...> | undefined; }>) => void"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:"enum",value:[{value:'"group"'},{value:'"package"'},{value:'"workspace"'},{value:'"dashboard"'}]}},currentWorkspace:{defaultValue:null,description:"",name:"currentWorkspace",required:!1,type:{name:"Readonly<{ key: string; alias: string; name: string; parentGroup?: string; kind: PackageKind; description?: string; isFavorite?: boolean | undefined; serviceName?: string | undefined; ... 10 more ...; bwcErrors?: Readonly<...> | undefined; }> | undefined"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},parentPackage:{defaultValue:null,description:"",name:"parentPackage",required:!1,type:{name:"Readonly<{ key: string; alias: string; name: string; parentGroup?: string; kind: PackageKind; description?: string; isFavorite?: boolean | undefined; serviceName?: string | undefined; ... 10 more ...; bwcErrors?: Readonly<...> | undefined; }> | null | undefined"}},packages:{defaultValue:null,description:"",name:"packages",required:!1,type:{name:"readonly Readonly<{ key: string; alias: string; name: string; parentGroup?: string; kind: PackageKind; description?: string; isFavorite?: boolean | undefined; serviceName?: string | undefined; ... 10 more ...; bwcErrors?: Readonly<...> | undefined; }>[] | undefined"}},arePackagesLoading:{defaultValue:null,description:"",name:"arePackagesLoading",required:!1,type:{name:"boolean"}},submitError:{defaultValue:null,description:"",name:"submitError",required:!1,type:{name:"Error | null"}},packageSearch:{defaultValue:null,description:"",name:"packageSearch",required:!1,type:{name:"string"}},onPackageSearch:{defaultValue:null,description:"",name:"onPackageSearch",required:!1,type:{name:"((testFilter: string) => void)"}},submitText:{defaultValue:null,description:"",name:"submitText",required:!1,type:{name:"string"}}}}}catch{}try{S.displayName="WorkspaceIcon",S.__docgenInfo={description:"",displayName:"WorkspaceIcon",props:{}}}catch{}const Mt={component:v},y={name:"Default",args:{open:!0,setOpen:()=>null,onSubmit:()=>null,packages:[...ke,...Ie],title:"Some Package Form",kind:U}};var E,q,A;y.parameters={...y.parameters,docs:{...(E=y.parameters)==null?void 0:E.docs,source:{originalSource:`{
  name: 'Default',
  args: {
    open: true,
    setOpen: () => null,
    onSubmit: () => null,
    packages: [...WORKSPACES, ...GROUPS],
    title: 'Some Package Form',
    kind: PACKAGE_KIND
  }
}`,...(A=(q=y.parameters)==null?void 0:q.docs)==null?void 0:A.source}}};const Ut=["DefaultStory"];export{y as DefaultStory,Ut as __namedExportsOrder,Mt as default};
//# sourceMappingURL=PackageDialogForm.stories-f001d747.js.map
