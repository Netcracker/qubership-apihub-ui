{"version":3,"file":"ChangesTooltip.stories-e548b545.js","sources":["../../packages/shared/src/entities/change-severities.ts","../../packages/shared/src/components/ChangesTooltip.tsx"],"sourcesContent":["/**\n * Copyright 2024-2025 NetCracker Technology Corporation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ChangeSummary } from '@netcracker/qubership-apihub-api-processor'\nimport type { DiffType } from '@netcracker/qubership-apihub-api-diff'\nimport type { Color } from '../utils/types'\n\nexport const ADD_ACTION_TYPE = 'add'\nexport const REMOVE_ACTION_TYPE = 'remove'\nexport const REPLACE_ACTION_TYPE = 'replace'\nexport const RENAME_ACTION_TYPE = 'rename'\n\n// TODO: Use from builder\nexport type ActionType =\n  | typeof ADD_ACTION_TYPE\n  | typeof REMOVE_ACTION_TYPE\n  | typeof REPLACE_ACTION_TYPE\n  | typeof RENAME_ACTION_TYPE\n\nexport const BREAKING_CHANGE_SEVERITY = 'breaking'\nexport const NON_BREAKING_CHANGE_SEVERITY = 'non-breaking'\nexport const SEMI_BREAKING_CHANGE_SEVERITY = 'semi-breaking'\nexport const DEPRECATED_CHANGE_SEVERITY = 'deprecated'\nexport const ANNOTATION_CHANGE_SEVERITY = 'annotation'\nexport const UNCLASSIFIED_CHANGE_SEVERITY = 'unclassified'\n\nexport type ChangesSummary = ChangesSummaryDto\n\nexport type ChangesSummaryDto = ChangeSummary\n\nexport type ChangeSeverity = DiffType\n\nexport const CHANGE_SEVERITY_COLOR_MAP: Record<ChangeSeverity, string> = {\n  [BREAKING_CHANGE_SEVERITY]: '#ED4A54',\n  [SEMI_BREAKING_CHANGE_SEVERITY]: '#E98554',\n  [DEPRECATED_CHANGE_SEVERITY]: '#FFB02E',\n  [NON_BREAKING_CHANGE_SEVERITY]: '#6BCE70',\n  [UNCLASSIFIED_CHANGE_SEVERITY]: '#61AAF2',\n  [ANNOTATION_CHANGE_SEVERITY]: '#C55DCF',\n}\n\nexport const CHANGE_SEVERITY_NAME_MAP: Record<ChangeSeverity, string> = {\n  [BREAKING_CHANGE_SEVERITY]: 'Breaking',\n  [SEMI_BREAKING_CHANGE_SEVERITY]: 'Risky',\n  [DEPRECATED_CHANGE_SEVERITY]: 'Deprecated',\n  [NON_BREAKING_CHANGE_SEVERITY]: 'Non-breaking',\n  [UNCLASSIFIED_CHANGE_SEVERITY]: 'Unclassified',\n  [ANNOTATION_CHANGE_SEVERITY]: 'Annotation',\n}\n\nexport const CHANGE_SEVERITY_DESCRIPTION_MAP: Record<ChangeSeverity, { text: string; options?: string[] }> = {\n  [BREAKING_CHANGE_SEVERITY]: { text: 'Breaking change is a change that breaks backward compatibility with the previous version of API. For example, deleting an operation, adding a required parameter or changing type of a parameter are breaking changes.' },\n  [SEMI_BREAKING_CHANGE_SEVERITY]: {\n    text: 'Risky change is a change that breaks backward compatibility according to the rules:',\n    options: ['operation was annotated as deprecated in at least two previous consecutive releases and then it was deleted', 'operation is marked as no-BWC'],\n  },\n  [DEPRECATED_CHANGE_SEVERITY]: { text: 'Deprecating change is a change that annotates an operation, parameter or schema as deprecated. Removing a \"deprecated\" annotation is also considered a deprecating change.' },\n  [NON_BREAKING_CHANGE_SEVERITY]: { text: 'Non-breaking change is change that does not break backward compatibility with the previous version of API. For example, adding new operation or optional parameter is non-breaking change.' },\n  [UNCLASSIFIED_CHANGE_SEVERITY]: { text: 'An unclassified change is a change that cannot be classified as any of the other types.' },\n  [ANNOTATION_CHANGE_SEVERITY]: { text: 'An annotation change is a change to enrich the API documentation with information that does not affect the functionality of the API. For example, adding/changing/deleting descriptions or examples is annotation change.' },\n}\n\nexport const CHANGE_SEVERITIES: ReadonlySet<ChangeSeverity> = new Set([\n    BREAKING_CHANGE_SEVERITY,\n    SEMI_BREAKING_CHANGE_SEVERITY,\n    DEPRECATED_CHANGE_SEVERITY,\n    NON_BREAKING_CHANGE_SEVERITY,\n    ANNOTATION_CHANGE_SEVERITY,\n    UNCLASSIFIED_CHANGE_SEVERITY,\n  ],\n)\n\nexport const ACTION_TYPE_COLOR_MAP: Partial<Record<ActionType, Color>> = {\n  [ADD_ACTION_TYPE]: 'rgba(0,187,91,0.08)',\n  [REMOVE_ACTION_TYPE]: '#FFF1F2',\n  [REPLACE_ACTION_TYPE]: '#FFF9EE',\n}\n\nexport const DEFAULT_CHANGE_SEVERITY_MAP = {\n  [BREAKING_CHANGE_SEVERITY]: 0,\n  [SEMI_BREAKING_CHANGE_SEVERITY]: 0,\n  [DEPRECATED_CHANGE_SEVERITY]: 0,\n  [NON_BREAKING_CHANGE_SEVERITY]: 0,\n  [ANNOTATION_CHANGE_SEVERITY]: 0,\n  [UNCLASSIFIED_CHANGE_SEVERITY]: 0,\n}\n","/**\n * Copyright 2024-2025 NetCracker Technology Corporation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { FC, PropsWithChildren } from 'react'\nimport { memo } from 'react'\nimport type { ChangeSeverity } from '../entities/change-severities'\nimport {\n  CHANGE_SEVERITY_COLOR_MAP,\n  CHANGE_SEVERITY_DESCRIPTION_MAP,\n  CHANGE_SEVERITY_NAME_MAP,\n} from '../entities/change-severities'\nimport { Box, Divider, Tooltip } from '@mui/material'\nimport ListItem from '@mui/material/ListItem'\n\nexport type ChangesTooltipProps = PropsWithChildren<{\n  changeType: ChangeSeverity\n  disableHoverListener?: boolean\n  category?: ChangesTooltipCategory\n}>\n\nexport const ChangesTooltip: FC<ChangesTooltipProps> = memo<ChangesTooltipProps>(props => {\n  const {\n    children,\n    changeType,\n    disableHoverListener = false,\n    category,\n  } = props\n\n  return (\n    <Tooltip\n      title={\n        <ChangesTooltipContent\n          changeType={changeType}\n          category={category}\n        />\n      }\n      placement=\"bottom-end\"\n      disableHoverListener={disableHoverListener}\n    >\n      <Box>\n        {children}\n      </Box>\n    </Tooltip>\n  )\n})\n\ntype ChangesTooltipContentProps = {\n  changeType: ChangeSeverity\n  category?: ChangesTooltipCategory\n}\n\nconst ChangesTooltipContent: FC<ChangesTooltipContentProps> = memo<ChangesTooltipContentProps>(({\n  changeType,\n  category,\n}) => {\n  const tooltipContent = CHANGE_SEVERITY_DESCRIPTION_MAP[changeType]\n  const categoryTitle = `${category ? `${TOOLTIP_TITLE_BY_CATEGORY[category]} with ` : ''}${CHANGE_SEVERITY_NAME_MAP[changeType]} Changes`\n\n  return (\n    <Box sx={{ p: '4px 4px' }}>\n      <Box display=\"flex\" alignItems=\"center\">\n        <Box\n          component=\"span\"\n          sx={{\n            background: CHANGE_SEVERITY_COLOR_MAP[changeType],\n            width: 8,\n            height: 8,\n            borderRadius: '50%',\n            mr: 1,\n          }}\n        />\n        {categoryTitle}\n      </Box>\n      <Divider sx={{ mx: 0, mt: 1, mb: 1 }} orientation=\"horizontal\"/>\n      <Box>\n        {tooltipContent.text}\n        {tooltipContent.options && tooltipContent.options.map((item, index) => (\n          <ListItem sx={{ display: 'list-item', py: 0 }} key={index}>\n            {item}\n          </ListItem>\n        ))}\n      </Box>\n    </Box>\n  )\n})\n\nexport const CATEGORY_OPERATION = 'operation'\nexport const CATEGORY_PACKAGE = 'packages'\n\nconst TOOLTIP_TITLE_BY_CATEGORY = {\n  [CATEGORY_OPERATION]: 'Operations',\n  [CATEGORY_PACKAGE]: 'Packages',\n}\n\nexport type ChangesTooltipCategory = typeof CATEGORY_OPERATION | typeof CATEGORY_PACKAGE\n"],"names":["BREAKING_CHANGE_SEVERITY","NON_BREAKING_CHANGE_SEVERITY","SEMI_BREAKING_CHANGE_SEVERITY","DEPRECATED_CHANGE_SEVERITY","ANNOTATION_CHANGE_SEVERITY","UNCLASSIFIED_CHANGE_SEVERITY","CHANGE_SEVERITY_COLOR_MAP","CHANGE_SEVERITY_NAME_MAP","CHANGE_SEVERITY_DESCRIPTION_MAP","CHANGE_SEVERITIES","ChangesTooltip","memo","props","children","changeType","disableHoverListener","category","jsx","Tooltip","ChangesTooltipContent","Box","tooltipContent","categoryTitle","TOOLTIP_TITLE_BY_CATEGORY","jsxs","Divider","item","index","ListItem","CATEGORY_OPERATION","CATEGORY_PACKAGE"],"mappings":"usCAgCO,MAAMA,EAA2B,WAC3BC,EAA+B,eAC/BC,EAAgC,gBAChCC,EAA6B,aAC7BC,EAA6B,aAC7BC,EAA+B,eAQ/BC,EAA4D,CACvE,CAACN,CAAwB,EAAG,UAC5B,CAACE,CAA6B,EAAG,UACjC,CAACC,CAA0B,EAAG,UAC9B,CAACF,CAA4B,EAAG,UAChC,CAACI,CAA4B,EAAG,UAChC,CAACD,CAA0B,EAAG,SAChC,EAEaG,EAA2D,CACtE,CAACP,CAAwB,EAAG,WAC5B,CAACE,CAA6B,EAAG,QACjC,CAACC,CAA0B,EAAG,aAC9B,CAACF,CAA4B,EAAG,eAChC,CAACI,CAA4B,EAAG,eAChC,CAACD,CAA0B,EAAG,YAChC,EAEaI,EAAgG,CAC3G,CAACR,CAAwB,EAAG,CAAE,KAAM,wNAAyN,EAC7P,CAACE,CAA6B,EAAG,CAC/B,KAAM,sFACN,QAAS,CAAC,8GAA+G,+BAA+B,CAC1J,EACA,CAACC,CAA0B,EAAG,CAAE,KAAM,4KAA6K,EACnN,CAACF,CAA4B,EAAG,CAAE,KAAM,4LAA6L,EACrO,CAACI,CAA4B,EAAG,CAAE,KAAM,yFAA0F,EAClI,CAACD,CAA0B,EAAG,CAAE,KAAM,2NAA4N,CACpQ,EAEaK,EAAqD,IAAA,IAAI,CAClET,EACAE,EACAC,EACAF,EACAG,EACAC,CACF,CACF,EClDOK,EAAAC,EAAAA,KAAAC,GAAA,CACL,KAAA,CAAM,SAAAC,EACJ,WAAAC,EACA,qBAAAC,EAAA,GACuB,SAAAC,CACvB,EAAAJ,EAGF,OAAAK,EACEC,EAAC,CAAA,MAAAD,EAEGE,EAAC,CAAA,WAAAL,EACC,SAAAE,CACA,CAAA,EACF,UAAA,aAEQ,qBAAAD,EACV,SAAAE,EAAAG,EAAA,CAAA,SAAAP,CAAA,CAAA,CAIA,CAAA,CAGN,CAAA,EAOAM,EAAAR,EAAA,KAAA,CAAA,CAAgG,WAAAG,EAC9F,SAAAE,CAEF,IAAA,CACE,MAAAK,EAAAb,EAAAM,CAAA,EACAQ,EAAA,GAAAN,EAAA,GAAAO,EAAAP,CAAA,CAAA,SAAA,EAAA,GAAAT,EAAAO,CAAA,CAAA,WAEA,OAAAU,EAAAJ,EAAA,CAAA,GAAA,CAAA,EAAA,SAAA,EAAA,SAAA,CAEII,EAAAJ,EAAA,CAAA,QAAA,OAAA,WAAA,SAAA,SAAA,CACEH,EAAAG,EAAC,CAAA,UAAA,OACW,GAAA,CACN,WAAAd,EAAAQ,CAAA,EAC8C,MAAA,EACzC,OAAA,EACC,aAAA,MACM,GAAA,CACV,CACN,CAAA,EACFQ,CACC,EAAA,EACHL,EAAAQ,EAAA,CAAA,GAAA,CAAA,GAAA,EAAA,GAAA,EAAA,GAAA,CAAA,EAAA,YAAA,YAAA,CAAA,EAC8DD,EAAAJ,EAAA,CAAA,SAAA,CAE3DC,EAAA,KAAeA,EAAA,SAAAA,EAAA,QAAA,IAAA,CAAAK,EAAAC,IAAAV,EAAAW,EAAA,CAAA,GAAA,CAAA,QAAA,YAAA,GAAA,CAAA,EAAA,SAAAF,GAAAC,CAAA,CAAA,CAKf,EAAA,CACH,CAAA,CAAA,CAGN,CAAA,EAEOE,EAAA,YACAC,EAAA,WAEPP,EAAA,CAAkC,CAAAM,CAAA,EAAA,aACV,CAAAC,CAAA,EAAA,UAExB;;;;"}