import{a as f,F as y,j as e}from"./createTheme-3f433a46.js";import{r as p}from"./index-37ba2b57.js";import{r as z,i as X,a as Q}from"./jsx-runtime_commonjs-proxy-28857837.js";import{S as Z,o as K}from"./tags-samples-215a7b61.js";import{A as V,b as x}from"./operations-9d08d890.js";import{O as b}from"./OptionItem-5314683a.js";import{I as h,T as P}from"./TextField-3c0250c8.js";import{A as T}from"./Autocomplete-bd4ef415.js";import{a as ee}from"./constants-963f5fd0.js";import{d as ae}from"./mui-fb0164d9.js";import{d as te}from"./debounce-517eeb3c.js";import{A as re,U as ne}from"./operation-groups-ef2977c6.js";import{s as ie}from"./files-ef0fb646.js";import{B as A}from"./Box-56201235.js";import{A as le,a as oe,b as se}from"./AccordionSummary-45a99270.js";import{T as de}from"./Typography-de8bdcfd.js";import{b as ue}from"./api-types-95d252ab.js";import{r as pe}from"./reference-samples-74f6e1ef.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./createSvgIcon-5350b5dc.js";import"./styled-ebc30f5f.js";import"./index-420fbc32.js";import"./useThemeProps-6f68535c.js";import"./createChainedFunction-0bab83cf.js";import"./isMuiElement-de695f11.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./TransitionGroupContext-0440df69.js";import"./useId-f6e37502.js";import"./useControlled-1dfdd739.js";import"./SearchBar-29ac82cf.js";import"./SearchOutlined-bb65d4e3.js";import"./useDebounce-c4a5dbf1.js";import"./IconButton-8d89ebab.js";import"./ButtonBase-3c58fb83.js";import"./emotion-react.browser.esm-636148c3.js";import"./hoist-non-react-statics.cjs-b1c88361.js";import"./assertThisInitialized-081f9914.js";import"./inheritsLoose-5494d9cc.js";import"./useIntersectionObserver-b83c97e3.js";import"./arrays-4b61f5c5.js";import"./ListItem-9685675c.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-bde5ad2f.js";import"./isHostComponent-73d6e646.js";import"./ListItemButton-b6e09fb5.js";import"./ListItemText-ba7adc34.js";import"./listItemTextClasses-f661df63.js";import"./List-4d5fe3c9.js";import"./Skeleton-7a2f0bcb.js";import"./Placeholder-ea4208c7.js";import"./apihub-builder.es-bf0e6a1e.js";import"./CustomChip-bf8fa283.js";import"./palette-8c6d2233.js";import"./Chip-67104dc4.js";import"./OverflowTooltip-4be14982.js";import"./Tooltip-e9b79301.js";import"./useTheme-cfa4c669.js";import"./Popper-85bfdec6.js";import"./Portal-6ea91f30.js";import"./index-4da2af8c.js";import"./Grow-af5e6305.js";import"./utils-cf3d21be.js";import"./index-891d46e9.js";import"./Menu-982af263.js";import"./Modal-f2dc4c1a.js";import"./Paper-260613e6.js";import"./GlobalStyles-f97aed57.js";import"./usePreviousProps-c4e5492e.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";import"./extendSxProp-1e23d004.js";import"./packages-3bb54737.js";import"./version-status-fb60f024.js";import"./package-permissions-7239f49d.js";var L={},ce=X;Object.defineProperty(L,"__esModule",{value:!0});var N=L.default=void 0,me=ce(z()),ge=Q,fe=(0,me.default)((0,ge.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");N=L.default=fe;const ye="Filter by API Audience",O=p.memo(l=>{const{value:r,onSelectApiAudience:s}=l;return f(y,{children:[e(h,{children:ye}),e(T,{forcePopupIcon:!0,value:r,options:Object.keys(V).map(a=>a),renderOption:(a,n)=>e(b,{props:a,title:V[n],testId:`Option-${n}`},n),isOptionEqualToValue:(a,n)=>a===n,renderInput:a=>e(P,{...a,id:"api-audience-filter",placeholder:"API Audience",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),getOptionLabel:a=>V[a]??"",onChange:(a,n)=>s(n??void 0),"data-testid":"ApiAudienceFilter"})]})});try{O.displayName="ApiAudienceFilter",O.__docgenInfo={description:"",displayName:"ApiAudienceFilter",props:{onSelectApiAudience:{defaultValue:null,description:"",name:"onSelectApiAudience",required:!0,type:{name:"(value?: ApiAudience | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"unknown"'},{value:'"internal"'},{value:'"external"'}]}}}}}catch{}const Ae="Filter by API Kind",I=p.memo(l=>{const{value:r,onSelectApiKind:s,required:a=!1,labelText:n}=l;return f(y,{children:[e(h,{required:a,children:n??Ae}),e(T,{forcePopupIcon:!0,value:r,options:Object.keys(x).map(t=>t),renderOption:(t,i)=>e(b,{props:t,title:x[i],testId:`Option-${i}`},i),isOptionEqualToValue:(t,i)=>t===i,renderInput:t=>e(P,{...t,id:"api-kind-filter",placeholder:"API Kind",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),getOptionLabel:t=>x[t]??"",onChange:(t,i)=>s(i??void 0),"data-testid":"ApiKindFilter"})]})});try{I.displayName="ApiKindFilter",I.__docgenInfo={description:"",displayName:"ApiKindFilter",props:{onSelectApiKind:{defaultValue:null,description:"",name:"onSelectApiKind",required:!0,type:{name:"(value?: ApiKind | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"bwc"'},{value:'"no-bwc"'},{value:'"experimental"'}]}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}}}}}catch{}const ve="Filter by Package",C=p.memo(l=>{const{onSelectPackage:r,defaultPackageKey:s,required:a=!0,disableClearable:n=!1,labelText:t=ve,references:i,isLoading:g}=l,[m,u]=p.useState(""),c=p.useCallback((o,d)=>u(d),[]),k=p.useMemo(()=>m?i.filter(o=>{var d;return(d=o.name)==null?void 0:d.toLowerCase().includes(m.toLowerCase())}):i,[i,m]),q=p.useMemo(()=>i.find(o=>o.key===s)??null,[s,i]);return f(y,{children:[e(h,{required:a,htmlFor:"package-select",children:t}),e(T,{freeSolo:!0,loading:g,disableClearable:n,forcePopupIcon:!0,options:k,filterOptions:ae,value:q,renderOption:(o,{key:d,name:S})=>e(b,{props:o,title:S},d),getOptionLabel:o=>o.name??"",isOptionEqualToValue:(o,d)=>o.key===d.key,onInputChange:te(c,ee),onChange:(o,d)=>r(d),renderInput:o=>e(P,{...o,id:"package-select",placeholder:"Package",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}},value:m,onKeyDown:d=>d.stopPropagation()}),"data-testid":"PackageFilter"})]})});try{C.displayName="DashboardPackageSelector",C.__docgenInfo={description:"",displayName:"DashboardPackageSelector",props:{defaultPackageKey:{defaultValue:null,description:"",name:"defaultPackageKey",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},disableClearable:{defaultValue:null,description:"",name:"disableClearable",required:!1,type:{name:"boolean"}},onSelectPackage:{defaultValue:null,description:"",name:"onSelectPackage",required:!0,type:{name:"(packageRef: Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null) => void"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}}}}}catch{}const _e="Filter by Group",F=l=>{const{required:r=!1,labelText:s,value:a,onSelectValue:n,isLoading:t,apiType:i,versionContent:g}=l,m=be(i,g);return f(y,{children:[e(h,{required:r,children:s??_e}),e(T,{loading:t,disabled:!t&&m.length===B.length,forcePopupIcon:!0,value:a,options:m,renderOption:(u,c)=>e(b,{props:u,title:c,testId:`FilterByGroup-Option-${ie(c)}`},c),isOptionEqualToValue:(u,c)=>u===c,getOptionLabel:u=>u??"",renderInput:u=>e(P,{...u,id:"operation-group-filter",placeholder:"Group",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),onChange:(u,c)=>n==null?void 0:n(c??void 0),"data-testid":"OperationGroupFilter"})]})};function be(l,r){const s=p.useMemo(()=>((r==null?void 0:r.operationGroups)??[]).filter(({apiType:a})=>a===l).map(({groupName:a})=>a),[l,r==null?void 0:r.operationGroups]);return[...B,...s]}const B=[re,ne];try{F.displayName="OperationGroupFilter",F.__docgenInfo={description:"",displayName:"OperationGroupFilter",props:{required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onSelectValue:{defaultValue:null,description:"",name:"onSelectValue",required:!1,type:{name:"((value?: string) => void)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},apiType:{defaultValue:null,description:"",name:"apiType",required:!1,type:{name:"enum",value:[{value:'"rest"'},{value:'"graphql"'}]}},versionContent:{defaultValue:null,description:"",name:"versionContent",required:!1,type:{name:"Readonly<{ version: string; packageKey: string; status: VersionStatus; createdAt: string; createdBy: Principal; operationGroups: readonly Readonly<{ groupName: string; description: string; ... 4 more ...; template?: File; }>[]; ... 5 more ...; revisionsCount: number; }> | null"}}}}}catch{}const _=p.memo(l=>{const{selectedPackageKey:r,selectedOperationGroupName:s,selectedApiAudience:a,selectedApiKind:n,onSelectPackage:t,onSelectOperationGroup:i,onSelectApiAudience:g,onSelectApiKind:m,onClickExpandCollapseButton:u,areTagsLoading:c,fetchNextTagsPage:k,hasNextTagsPage:q,isNextTagsPageFetching:o,isReferencesLoading:d,isPackageVersionContentLoading:S,hiddenGeneralFilters:D,tags:w,references:M,versionContent:U,apiType:j,onSelectTag:W,onTagSearch:$,selectedTag:Y}=l,H=p.useCallback((Te,J)=>u(!J),[u]);return f(y,{children:[e(A,{sx:{borderBottom:"1px solid #D9D9D9",p:2},children:f(le,{expanded:!D,onChange:H,"data-testid":"GeneralFiltersAccordion",children:[e(oe,{sx:{p:0},expandIcon:e(N,{}),children:e(de,{width:"100%",noWrap:!0,variant:"button",children:"General Filters"})}),f(se,{children:[t&&e(C,{onSelectPackage:t,references:M,isLoading:d,defaultPackageKey:r,required:!1}),i&&e(A,{sx:{mt:t?1:0},children:e(F,{value:s,onSelectValue:i,isLoading:S,apiType:j,versionContent:U})}),g&&e(A,{sx:{mt:t||i?1:0},children:e(O,{value:a,onSelectApiAudience:g})}),m&&e(A,{sx:{mt:t||i||g?1:0},children:e(I,{value:n,onSelectApiKind:m})})]})]})}),e(Z,{tags:w,areTagsLoading:c,fetchNextTagsPage:k,isNextTagsPageFetching:o,hasNextTagsPage:q,onSearch:$,selectedTag:Y,onSelectTag:W})]})});try{_.displayName="OperationFilters",_.__docgenInfo={description:"",displayName:"OperationFilters",props:{selectedPackageKey:{defaultValue:null,description:"",name:"selectedPackageKey",required:!1,type:{name:"string"}},onSelectPackage:{defaultValue:null,description:"",name:"onSelectPackage",required:!1,type:{name:"((packageRef: Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null) => void)"}},selectedOperationGroupName:{defaultValue:null,description:"",name:"selectedOperationGroupName",required:!1,type:{name:"string"}},onSelectOperationGroup:{defaultValue:null,description:"",name:"onSelectOperationGroup",required:!1,type:{name:"((operationGroupName?: string) => void)"}},selectedApiAudience:{defaultValue:null,description:"",name:"selectedApiAudience",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"unknown"'},{value:'"internal"'},{value:'"external"'}]}},onSelectApiAudience:{defaultValue:null,description:"",name:"onSelectApiAudience",required:!1,type:{name:"((value?: ApiAudience) => void)"}},selectedApiKind:{defaultValue:null,description:"",name:"selectedApiKind",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"bwc"'},{value:'"no-bwc"'},{value:'"experimental"'}]}},onSelectApiKind:{defaultValue:null,description:"",name:"onSelectApiKind",required:!1,type:{name:"((value?: ApiKind) => void)"}},hiddenGeneralFilters:{defaultValue:null,description:"",name:"hiddenGeneralFilters",required:!0,type:{name:"boolean"}},onClickExpandCollapseButton:{defaultValue:null,description:"",name:"onClickExpandCollapseButton",required:!0,type:{name:"(value: boolean) => void"}},areTagsLoading:{defaultValue:null,description:"",name:"areTagsLoading",required:!0,type:{name:"boolean"}},fetchNextTagsPage:{defaultValue:null,description:"",name:"fetchNextTagsPage",required:!1,type:{name:"(() => Promise<void>)"}},isNextTagsPageFetching:{defaultValue:null,description:"",name:"isNextTagsPageFetching",required:!1,type:{name:"boolean"}},hasNextTagsPage:{defaultValue:null,description:"",name:"hasNextTagsPage",required:!1,type:{name:"HasNextPage"}},isReferencesLoading:{defaultValue:null,description:"",name:"isReferencesLoading",required:!0,type:{name:"boolean"}},isPackageVersionContentLoading:{defaultValue:null,description:"",name:"isPackageVersionContentLoading",required:!0,type:{name:"boolean"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"Tags"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},apiType:{defaultValue:null,description:"",name:"apiType",required:!0,type:{name:"enum",value:[{value:'"rest"'},{value:'"graphql"'}]}},versionContent:{defaultValue:null,description:"",name:"versionContent",required:!0,type:{name:"Readonly<{ version: string; packageKey: string; status: VersionStatus; createdAt: string; createdBy: Principal; operationGroups: readonly Readonly<{ groupName: string; description: string; ... 4 more ...; template?: File | undefined; }>[]; ... 5 more ...; revisionsCount: number; }> | null"}},onTagSearch:{defaultValue:null,description:"",name:"onTagSearch",required:!1,type:{name:"((value: string) => void)"}},selectedTag:{defaultValue:null,description:"",name:"selectedTag",required:!1,type:{name:"string"}},onSelectTag:{defaultValue:null,description:"",name:"onSelectTag",required:!0,type:{name:"(value?: string | undefined) => void"}}}}}catch{}const he={createdAt:"Fri Oct 06 2023",createdBy:{name:"John Williams",type:"user",id:"JW_1234"},status:"draft",version:"2023.1@3",revisionsCount:3,packageKey:"PSB.alint-dash",key:"c90f0e0d-005c-4349-a93c-8418822e06b2",latestRevision:!0,operationGroups:[]},{useArgs:Pe}=__STORYBOOK_MODULE_PREVIEW_API__,$a={title:"Operation Filters",args:{tags:K,areTagsLoading:!1,isPackageVersionContentLoading:!1,isReferencesLoading:!1,references:pe,apiType:ue,versionContent:he,hiddenGeneralFilters:!1},component:_},v=l=>{const[,r]=Pe(),s=p.useCallback(n=>{r({tags:K.filter(t=>t.toLowerCase().includes(n.toLowerCase()))})},[r]),a=p.useCallback(n=>{r({hiddenGeneralFilters:n})},[r]);return e(_,{...l,onTagSearch:s,onClickExpandCollapseButton:a})};var E,R,G;v.parameters={...v.parameters,docs:{...(E=v.parameters)==null?void 0:E.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  const onTagSearch = useCallback((value: string) => {
    updateArgs({
      tags: operationTags.filter(tag => tag.toLowerCase().includes(value.toLowerCase()))
    });
  }, [updateArgs]);
  const onClickExpandCollapseButton = useCallback((value: boolean) => {
    updateArgs({
      hiddenGeneralFilters: value
    });
  }, [updateArgs]);
  return <OperationFilters {...args} onTagSearch={onTagSearch} onClickExpandCollapseButton={onClickExpandCollapseButton} />;
}`,...(G=(R=v.parameters)==null?void 0:R.docs)==null?void 0:G.source}}};const Ya=["DefaultStory"];export{v as DefaultStory,Ya as __namedExportsOrder,$a as default};
//# sourceMappingURL=OperationFilters.stories-68ee6892.js.map
