var ye=Object.defineProperty;var me=(t,e,n)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var I=(t,e,n)=>(me(t,typeof e!="symbol"?e+"":e,n),n);import{j as p,a as ae}from"./createTheme-e504d7a1.js";import{r as d}from"./index-37ba2b57.js";import{S as ce,b as Re,c as ge,d as Ee}from"./constants-e3f42350.js";import{m as ve,b as Ie}from"./router-3bda5a86.js";import{s as we}from"./index-2374ef69.js";import{t as Se}from"./api-types-27a6e86d.js";import{r as W}from"./apihub-builder.es-6ece7602.js";import{B as Ce}from"./ButtonWithHint-482f7da8.js";import{B as be}from"./Box-3dbc4f20.js";import{T as Oe}from"./Typography-74efa758.js";class Pe extends Error{constructor(n,r,i){super(n);I(this,"code");I(this,"status");this.name="HttpError",this.code=r,this.status=i}}const Te={INTERNAL:"internal",EXTERNAL:"external"};function _e(t){return t.type===Te.INTERNAL}const un="package";function v(t){const e=new URLSearchParams;return Object.entries(t).forEach(([n,{value:r,toStringValue:i}])=>{if(Array.isArray(r)){const[s]=r;if(!s)return}(r||r===0)&&e.set(n,(i==null?void 0:i(r))??`${r}`)}),e}function Ae(){ue("/login",v({[ce]:{value:!0},redirectUri:{value:location.href}}))}function ue(t,e=new URLSearchParams){const n=e.get("redirectUri")??location.href;e.set("redirectUri",n);let r=location.origin;t.includes("?")?r=`${r}${t}&${e}`:r=`${r}${t}?${e}`,window.stop(),location.replace(r)}function Ne(t,e){const n=new URL(t.url),r=ve(`${Me}${e}`,n.pathname);return r&&r.params.packageId?{redirectType:Be,id:r.params.packageId}:null}function K(){const e=new URL(location.href).searchParams.get(Re);return e||(location.pathname==="/login"?location.origin:location.href)}async function Fe(t="Thread is stopped"){await Qe(0,t)}async function Qe(t=0,e="Thread is paused"){await new Promise(n=>{console.log(e),t>0&&setTimeout(()=>{n(void 0)},t)})}const xe="/api/v3",R={NO_PROVIDER:"no-provider",NO_ENDPOINT:"no-endpoint",TOKEN_REFRESHED:"token-refreshed",UNKNOWN:"unknown"};function A(t){return t===R.TOKEN_REFRESHED}class Le extends Error{constructor(){super("HTTP 401 Unauthorized");I(this,"responseStatus",401);this.name="WorkerUnauthorizedError"}}async function Ue(t){const n=!new URLSearchParams(location.search).get(ce);let r;if(t===401&&n){if(typeof window>"u")throw new Le;const i=sessionStorage.getItem(ge),s=JSON.parse(i),{authConfig:o}=s,{autoLogin:a}=o;if(a){const[c]=o.identityProviders;if(r=await D(c),A(r))return r}else{const c=localStorage.getItem(Ee),l=c?o.identityProviders.find(u=>u.id===c):void 0;if(r=await D(l),A(r))return r}r===R.NO_PROVIDER&&Ae()}return r}async function D(t){if(!t)return R.NO_PROVIDER;let e="";if(_e(t)){const r=v({noAutoLogin:{value:!0},redirectUri:{value:K()}}),i=v({redirectUri:{value:`${location.origin}/login?${r}`}});e=`${xe}/auth/local/refresh?${i}`}else if(t.loginStartEndpoint){const r=v({redirectUri:{value:K()}});e=`${t.loginStartEndpoint}?${r}`}else return R.NO_ENDPOINT;const n=await fetch(e,{method:"GET",redirect:"manual"});if(n.ok)return R.TOKEN_REFRESHED;if(n.type==="opaqueredirect"){const r=n.url.replace(location.origin,"");ue(r),await Fe("Waiting for redirection...")}return console.error("Can't refresh token. Response:",n),R.UNKNOWN}const ke="/api/v1",Ve="/api/v3",Me="/api/:apiVersion",le=5*(60*1e3);async function C(t,e,n={},r){const{basePath:i="",customErrorHandler:s,customRedirectHandler:o,ignoreNotFound:a=!1}=n,c=await fetch(`${i}${t}`,{...e,signal:r,credentials:"include"});if(!c.ok){const l=await Ue(c.status);return A(l)?C(t,e,n,r):(await We(c,{401:!0,404:a},s),null)}return await Ke(c,o),await c.json()}async function We(t,e,n){if(e[t.status])return Promise.reject();n?n(t):await he(t)}async function Ke(t,e){if(t.redirected&&e){const n=e(t);n?await De(n):await he(t)}}async function he(t){const[e,n,r]=await qe(t),i={title:`Error ${t.status}`,message:e,code:n,status:r};throw dispatchEvent(new CustomEvent(He,{detail:i,bubbles:!0,composed:!0,cancelable:!1})),new Pe(e,n,r)}async function De(t){dispatchEvent(new CustomEvent($e,{detail:t,bubbles:!0,composed:!0,cancelable:!1})),window.stop()}async function qe(t){const e=await t.json(),n=(e==null?void 0:e.message)??"Something went wrong",r=(e==null?void 0:e.code)??"",i=(e==null?void 0:e.status)??null;return e!=null&&e.params?[Object.entries(e.params).reduce((s,[o,a])=>s.replace(`$${o}`,a),n),r,i]:[n,r,i]}const He="fetch-error",$e="fetch-redirect",Be="package-redirect";class F{constructor(){this.listeners=[],this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.push(e),this.onSubscribe(),()=>{this.listeners=this.listeners.filter(n=>n!==e),this.onUnsubscribe()}}hasListeners(){return this.listeners.length>0}onSubscribe(){}onUnsubscribe(){}}const w=typeof window>"u"||"Deno"in window;function Ye(){}function q(t){return typeof t=="number"&&t>=0&&t!==1/0}function je(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ge(t,e,n){return ze(t)?typeof e=="function"?{...n,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}function de(t,e){if(t===e)return t;const n=$(t)&&$(e);if(n||B(t)&&B(e)){const r=n?t.length:Object.keys(t).length,i=n?e:Object.keys(e),s=i.length,o=n?[]:{};let a=0;for(let c=0;c<s;c++){const l=n?c:i[c];o[l]=de(t[l],e[l]),o[l]===t[l]&&a++}return r===s&&a===r?t:o}return e}function H(t,e){if(t&&!e||e&&!t)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function B(t){if(!Y(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!Y(n)||!n.hasOwnProperty("isPrototypeOf"))}function Y(t){return Object.prototype.toString.call(t)==="[object Object]"}function ze(t){return Array.isArray(t)}function Ze(t){return new Promise(e=>{setTimeout(e,t)})}function j(t){Ze(0).then(t)}function G(t,e,n){return n.isDataEqual!=null&&n.isDataEqual(t,e)?t:typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?de(t,e):e}class Xe extends F{constructor(){super(),this.setup=e=>{if(!w&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1),()=>{window.removeEventListener("visibilitychange",n),window.removeEventListener("focus",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused=e,e&&this.onFocus()}onFocus(){this.listeners.forEach(e=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Je=new Xe;class et extends F{constructor(){super(),this.setup=e=>{if(!w&&window.addEventListener){const n=()=>e();return window.addEventListener("online",n,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",n)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var n;this.setup=e,(n=this.cleanup)==null||n.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online=e,e&&this.onOnline()}onOnline(){this.listeners.forEach(e=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const tt=new et;function nt(t){return(t??"online")==="online"?tt.isOnline():!0}class rt{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function st(t){return t instanceof rt}function it(){let t=[],e=0,n=u=>{u()},r=u=>{u()};const i=u=>{let h;e++;try{h=u()}finally{e--,e||a()}return h},s=u=>{e?t.push(u):j(()=>{n(u)})},o=u=>(...h)=>{s(()=>{u(...h)})},a=()=>{const u=t;t=[],u.length&&j(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u}}}const E=it();class ot extends F{constructor(e,n){super(),this.client=e,this.options=n,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(n)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.length===1&&(this.currentQuery.addObserver(this),z(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return N(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return N(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,n){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),H(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&Z(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(n),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const n=this.client.getQueryCache().build(this.client,e);return this.createResult(n,e)}getCurrentResult(){return this.currentResult}trackResult(e){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),n}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...n}={}){return this.fetch({...n,meta:{refetchPage:e}})}fetchOptimistic(e){const n=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,n);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,n))}fetch(e){var n;return this.executeFetch({...e,cancelRefetch:(n=e.cancelRefetch)!=null?n:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let n=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ye)),n}updateStaleTimeout(){if(this.clearStaleTimeout(),w||this.currentResult.isStale||!q(this.options.staleTime))return;const n=je(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},n)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(w||this.options.enabled===!1||!q(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Je.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,n){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,a=this.currentResultOptions,c=e!==r,l=c?e.state:this.currentQueryInitialState,u=c?this.currentResult:this.previousQueryResult,{state:h}=e;let{dataUpdatedAt:b,error:U,errorUpdatedAt:k,fetchStatus:g,status:m}=h,V=!1,M=!1,y;if(n._optimisticResults){const f=this.hasListeners(),_=!f&&z(e,n),pe=f&&Z(e,r,n,i);(_||pe)&&(g=nt(e.options.networkMode)?"fetching":"paused",b||(m="loading")),n._optimisticResults==="isRestoring"&&(g="idle")}if(n.keepPreviousData&&!h.dataUpdatedAt&&u!=null&&u.isSuccess&&m!=="error")y=u.data,b=u.dataUpdatedAt,m=u.status,V=!0;else if(n.select&&typeof h.data<"u")if(s&&h.data===(o==null?void 0:o.data)&&n.select===this.selectFn)y=this.selectResult;else try{this.selectFn=n.select,y=n.select(h.data),y=G(s==null?void 0:s.data,y,n),this.selectResult=y,this.selectError=null}catch(f){this.selectError=f}else y=h.data;if(typeof n.placeholderData<"u"&&typeof y>"u"&&m==="loading"){let f;if(s!=null&&s.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))f=s.data;else if(f=typeof n.placeholderData=="function"?n.placeholderData():n.placeholderData,n.select&&typeof f<"u")try{f=n.select(f),this.selectError=null}catch(_){this.selectError=_}typeof f<"u"&&(m="success",y=G(s==null?void 0:s.data,f,n),M=!0)}this.selectError&&(U=this.selectError,y=this.selectResult,k=Date.now(),m="error");const O=g==="fetching",P=m==="loading",T=m==="error";return{status:m,fetchStatus:g,isLoading:P,isSuccess:m==="success",isError:T,isInitialLoading:P&&O,data:y,dataUpdatedAt:b,error:U,errorUpdatedAt:k,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:O,isRefetching:O&&!P,isLoadingError:T&&h.dataUpdatedAt===0,isPaused:g==="paused",isPlaceholderData:M,isPreviousData:V,isRefetchError:T&&h.dataUpdatedAt!==0,isStale:Q(e,n),refetch:this.refetch,remove:this.remove}}updateResult(e){const n=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,H(r,n))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options;if(o==="all"||!o&&!this.trackedProps.size)return!0;const a=new Set(o??this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(c=>{const l=c;return this.currentResult[l]!==n[l]&&a.has(l)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const n=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const n={};e.type==="success"?n.onSuccess=!e.manual:e.type==="error"&&!st(e.error)&&(n.onError=!0),this.updateResult(n),this.hasListeners()&&this.updateTimers()}notify(e){E.batch(()=>{if(e.onSuccess){var n,r,i,s;(n=(r=this.options).onSuccess)==null||n.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,a,c,l;(o=(a=this.options).onError)==null||o.call(a,this.currentResult.error),(c=(l=this.options).onSettled)==null||c.call(l,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(u=>{u(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function at(t,e){return e.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&e.retryOnMount===!1)}function z(t,e){return at(t,e)||t.state.dataUpdatedAt>0&&N(t,e,e.refetchOnMount)}function N(t,e,n){if(e.enabled!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Q(t,e)}return!1}function Z(t,e,n,r){return n.enabled!==!1&&(t!==e||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Q(t,n)}function Q(t,e){return t.isStaleByTime(e.staleTime)}const ct=we.useSyncExternalStore,X=d.createContext(void 0),ut=d.createContext(!1);function lt(t,e){return t||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=X),window.ReactQueryClientContext):X)}const ht=({context:t}={})=>{const e=d.useContext(lt(t,d.useContext(ut)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},fe=d.createContext(!1),dt=()=>d.useContext(fe);fe.Provider;function ft(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}const pt=d.createContext(ft()),yt=()=>d.useContext(pt);function mt(t,e){return typeof t=="function"?t(...e):!!t}const Rt=(t,e)=>{(t.suspense||t.useErrorBoundary)&&(e.isReset()||(t.retryOnMount=!1))},gt=t=>{d.useEffect(()=>{t.clearReset()},[t])},Et=({result:t,errorResetBoundary:e,useErrorBoundary:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&mt(n,[t.error,r]),vt=t=>{t.suspense&&typeof t.staleTime!="number"&&(t.staleTime=1e3)},It=(t,e)=>t.isLoading&&t.isFetching&&!e,wt=(t,e,n)=>(t==null?void 0:t.suspense)&&It(e,n),St=(t,e,n)=>e.fetchOptimistic(t).then(({data:r})=>{t.onSuccess==null||t.onSuccess(r),t.onSettled==null||t.onSettled(r,null)}).catch(r=>{n.clearReset(),t.onError==null||t.onError(r),t.onSettled==null||t.onSettled(void 0,r)});function Ct(t,e){const n=ht({context:t.context}),r=dt(),i=yt(),s=n.defaultQueryOptions(t);s._optimisticResults=r?"isRestoring":"optimistic",s.onError&&(s.onError=E.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=E.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=E.batchCalls(s.onSettled)),vt(s),Rt(s,i),gt(i);const[o]=d.useState(()=>new e(n,s)),a=o.getOptimisticResult(s);if(ct(d.useCallback(c=>r?()=>{}:o.subscribe(E.batchCalls(c)),[o,r]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d.useEffect(()=>{o.setOptions(s,{listeners:!1})},[s,o]),wt(s,a,r))throw St(s,o,i);if(Et({result:a,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:o.getCurrentQuery()}))throw a.error;return s.notifyOnChangeProps?a:o.trackResult(a)}function x(t,e,n){const r=Ge(t,e,n);return Ct(r,ot)}const bt="version-info",Ot={portal:"portal",agent:"agents"},{portal:Pt,agent:ln}=Ot;function Tt(t){return{queryKey:[bt],queryFn:()=>_t(t),enabled:!0,refetchInterval:le,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}async function _t(t){return await C(`/${t}/version.json`,{method:"get"})}const At="2.13.1",Nt={frontendVersion:At,apiProcessorVersion:"0.0.0-unknown"};function Ft(t=Pt){const{data:e}=x(Tt(t));return e??Nt}const Qt="system-info",xt={backendVersionKey:"0.0.0",frontendVersionKey:"0.0.0",productionMode:!1,externalLinks:[],migrationInProgress:!1};function Lt(t){const e=t.externalLinks.reduce((n,r)=>{const i=r.indexOf("|");return i===-1||n.push({title:r.slice(0,i),url:r.slice(i)}),n},[]);return{backendVersionKey:t.backendVersion,frontendVersionKey:t.frontendVersion,productionMode:t.productionMode,externalLinks:e,notification:t.notification,migrationInProgress:t.migrationInProgress}}function Ut(t=!0){return{queryKey:[Qt],queryFn:kt,select:Lt,enabled:t,refetchInterval:le,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}}async function kt(){return await C("/system/info",{method:"get"},{basePath:ke})}function Vt(t=!0){const{data:e}=x(Ut(t));return window.apihubProductionMode=(e==null?void 0:e.productionMode)??!1,e??xt}const Mt="@",hn="@",Wt="package-version-content-query-key";function Kt(t){const{packageKey:e,versionKey:n}=t,{data:{apiProcessorVersion:r}={}}=x({queryKey:[Wt,e,n],queryFn:({signal:i})=>Dt(e,n,i),enabled:!!e&&!!n&&n!==Mt,select:qt});return r}async function Dt(t,e,n,r=!1,i=!1,s=!1){const o=encodeURIComponent(t),a=encodeURIComponent(e),c=v({includeSummary:{value:r},includeOperations:{value:i},includeGroups:{value:s}}),l="/packages/:packageId/versions/:versionId";return await C(`${Ie(l,{packageId:o,versionId:a})}?${c}`,{method:"get"},{customRedirectHandler:u=>Ne(u,l),basePath:Ve},n)}function qt(t){var e;return{...t,packageKey:t.packageId,createdAt:new Date(t.createdAt).toDateString(),operationTypes:Se(Ht(t.operationTypes)),latestRevision:!(t!=null&&t.notLatestRevision),revisionsCount:t.revisionsCount??0,operationGroups:((e=t.operationGroups)==null?void 0:e.map(n=>({...n,description:(n==null?void 0:n.description)??"",operationsCount:(n==null?void 0:n.operationsCount)??0})))??[]}}function Ht(t){return(t==null?void 0:t.map(e=>{const{changesSummary:n,numberOfImpactedOperations:r}=e;return{...e,changesSummary:n&&W(n),numberOfImpactedOperations:r&&W(r)}}))??[]}const $t=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,J=t=>{if(typeof t!="string")throw new TypeError("Invalid argument expected string");const e=t.match($t);if(!e)throw new Error(`Invalid argument not valid semver ('${t}' received)`);return e.shift(),e},ee=t=>t==="*"||t==="x"||t==="X",te=t=>{const e=parseInt(t,10);return isNaN(e)?t:e},Bt=(t,e)=>typeof t!=typeof e?[String(t),String(e)]:[t,e],Yt=(t,e)=>{if(ee(t)||ee(e))return 0;const[n,r]=Bt(te(t),te(e));return n>r?1:n<r?-1:0},ne=(t,e)=>{for(let n=0;n<Math.max(t.length,e.length);n++){const r=Yt(t[n]||"0",e[n]||"0");if(r!==0)return r}return 0},jt=(t,e)=>{const n=J(t),r=J(e),i=n.pop(),s=r.pop(),o=ne(n,r);return o!==0?o:i&&s?ne(i.split("."),s.split(".")):i||s?i?-1:1:0},L=d.memo(({color:t="#626D82",fill:e=!1})=>p("div",{style:{display:"flex"},children:ae("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p("path",{d:"M 8.4647 3.2441 C 9.1285 2.0305 10.8716 2.0305 11.5354 3.2441 L 17.6429 14.4102 C 18.2807 15.5764 17.4368 17 16.1075 17 H 3.8926 C 2.5634 17 1.7194 15.5764 2.3573 14.4102 L 8.4647 3.2441 Z Z",fill:`${e?t:"none"}`}),p("path",{d:"M8.46473 3.24412C9.12854 2.03049 10.8716 2.03048 11.5354 3.24412L17.6429 14.4102C18.2807 15.5764 17.4368 17 16.1075 17H3.89261C2.56336 17 1.7194 15.5764 2.35727 14.4102L8.46473 3.24412ZM10.2194 3.96392C10.1246 3.79055 9.87557 3.79055 9.78074 3.96392L3.67328 15.13C3.58216 15.2966 3.70272 15.5 3.89261 15.5H16.1075C16.2974 15.5 16.418 15.2966 16.3269 15.13L10.2194 3.96392Z",fill:`${e?"none":t}`}),p("path",{d:"M10.004 6.74966C10.4182 6.74966 10.754 7.08545 10.754 7.49966V11.2551C10.754 11.6693 10.4182 12.0051 10.004 12.0051C9.58976 12.0051 9.25398 11.6693 9.25398 11.2551V7.49966C9.25398 7.08545 9.58976 6.74966 10.004 6.74966Z",fill:`${e?"white":t}`}),p("path",{d:"M10.8997 13.4C10.8997 13.8971 10.4967 14.3 9.99968 14.3C9.50262 14.3 9.09968 13.8971 9.09968 13.4C9.09968 12.9029 9.50262 12.5 9.99968 12.5C10.4967 12.5 10.8997 12.9029 10.8997 13.4Z",fill:`${e?"white":t}`})]})})),re=d.memo(()=>p(L,{fill:!1})),se=d.memo(()=>p(L,{color:"#FFB02E",fill:!0})),S=d.memo(()=>p(L,{color:"#FF5260",fill:!0}));try{re.displayName="DefaultWarningIcon",re.__docgenInfo={description:"",displayName:"DefaultWarningIcon",props:{}}}catch{}try{se.displayName="YellowWarningIcon",se.__docgenInfo={description:"",displayName:"YellowWarningIcon",props:{}}}catch{}try{S.displayName="RedWarningIcon",S.__docgenInfo={description:"",displayName:"RedWarningIcon",props:{}}}catch{}const ie="TooltipWarning",Gt="TextWarning",oe=d.memo(({versionKey:t,packageKey:e,type:n=ie,onWarningTextChange:r,hidden:i=!1})=>{const{apiProcessorVersion:s}=Ft(),{migrationInProgress:o}=Vt(),a=Kt({versionKey:t,packageKey:e}),[c,l]=d.useState(""),u=d.useCallback(()=>{if(o){l("");return}if(a&&s){const h=jt(a,s);h>0?l(`The data in the version '${t}' may be incorrect, please contact the system administrators`):h<0&&l(`The data in the version '${t}' may be incorrect, as the data has not been processed according to the latest system rules. Please republish the version and if this does not help, contact the system administrators.`)}},[a,s,o,t]);if(d.useEffect(()=>(u(),()=>{l("")}),[u]),d.useEffect(()=>{r&&r(c)},[c,r]),i||o)return null;if(a&&a!==s)switch(n){case ie:return p(Ce,{hint:c,color:"inherit",size:"small",disabled:!0,tooltipMaxWidth:668,startIcon:p(S,{}),"data-testid":"WarningApiProcessorVersion"});case Gt:return ae(be,{display:"flex",children:[p(S,{}),p(Oe,{marginLeft:"4px","data-testid":"WarningApiProcessorTypography",variant:"body2",children:c})]});default:return null}return null});try{oe.displayName="WarningApiProcessorVersion",oe.__docgenInfo={description:"",displayName:"WarningApiProcessorVersion",props:{packageKey:{defaultValue:null,description:"",name:"packageKey",required:!1,type:{name:"string"}},versionKey:{defaultValue:null,description:"",name:"versionKey",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"TooltipWarning"'},{value:'"TextWarning"'}]}},onWarningTextChange:{defaultValue:null,description:"",name:"onWarningTextChange",required:!1,type:{name:"((text: string) => void)"}},hidden:{defaultValue:null,description:"",name:"hidden",required:!1,type:{name:"boolean"}}}}}catch{}export{un as P,hn as R,oe as W,Gt as a};
//# sourceMappingURL=WarningApiProcessorVersion-441acc86.js.map
