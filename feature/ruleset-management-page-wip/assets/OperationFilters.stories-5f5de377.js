import{a as f,F as y,j as e}from"./createTheme-1a4eaa7d.js";import{r as p}from"./index-37ba2b57.js";import{O as b}from"./OptionItem-9976f505.js";import{d as z}from"./mui-fb0164d9.js";import{a as X}from"./constants-ba72550f.js";import{I as h,T as P}from"./TextField-602692c9.js";import{A as T}from"./Autocomplete-154ca838.js";import{d as Q}from"./debounce-517eeb3c.js";import{s as Z}from"./files-cf5aceec.js";import{A as ee,U as ae}from"./operation-groups-ef2977c6.js";import{A as V,b as x}from"./operations-c80569e0.js";import{r as te,i as re,a as ne}from"./jsx-runtime_commonjs-proxy-3443f841.js";import{S as ie,o as K}from"./SidebarWithTags-6d2ab7dd.js";import{B as A}from"./Box-b2cfc4a3.js";import{A as le,a as oe,b as se}from"./AccordionSummary-78b352cd.js";import{T as de}from"./Typography-9c382c21.js";import{r as ue}from"./reference-samples-74f6e1ef.js";import{b as pe}from"./api-types-ae07fd64.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./OverflowTooltip-7ef395b6.js";import"./Tooltip-745b8e8d.js";import"./clsx.m-1b02dc9e.js";import"./index-1bdc7346.js";import"./useThemeProps-8ef67cb9.js";import"./useTheme-ae4b0b2e.js";import"./Popper-3e330eba.js";import"./ownerDocument-613eb639.js";import"./Portal-a8892b29.js";import"./isHostComponent-73d6e646.js";import"./TransitionGroupContext-0440df69.js";import"./index-4da2af8c.js";import"./useControlled-1dfdd739.js";import"./useId-f6e37502.js";import"./Grow-bf76b499.js";import"./utils-cdc9c8cb.js";import"./inheritsLoose-5494d9cc.js";import"./CustomChip-76e35951.js";import"./palette-8c6d2233.js";import"./Chip-0d487cf4.js";import"./createSvgIcon-2db0a94c.js";import"./ButtonBase-b3aed2fe.js";import"./emotion-react.browser.esm-5b9d3e5b.js";import"./hoist-non-react-statics.cjs-b1c88361.js";import"./assertThisInitialized-081f9914.js";import"./ListItem-87be8be4.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-177033ed.js";import"./isMuiElement-de695f11.js";import"./index-891d46e9.js";import"./Menu-7e0057a3.js";import"./Modal-6c4f247b.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Paper-0d6d8d46.js";import"./List-af36be1a.js";import"./GlobalStyles-3b0a9260.js";import"./IconButton-5b25e58c.js";import"./usePreviousProps-c4e5492e.js";import"./apihub-builder.es-ef2bfb55.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";import"./arrays-4b61f5c5.js";import"./useIntersectionObserver-b83c97e3.js";import"./Skeleton-928e76ea.js";import"./ListItemButton-31b6b874.js";import"./ListItemText-8b15b122.js";import"./listItemTextClasses-4c1b1340.js";import"./Placeholder-04d297bf.js";import"./SearchBar-8b398255.js";import"./SearchOutlined-1d1146fa.js";import"./useDebounce-c4a5dbf1.js";import"./extendSxProp-287b071a.js";import"./packages-3bb54737.js";import"./version-status-fb60f024.js";import"./package-permissions-7239f49d.js";const ce="Filter by Package",O=p.memo(l=>{const{onSelectPackage:r,defaultPackageKey:s,required:a=!0,disableClearable:n=!1,labelText:t=ce,references:i,isLoading:g}=l,[m,u]=p.useState(""),c=p.useCallback((o,d)=>u(d),[]),k=p.useMemo(()=>m?i.filter(o=>{var d;return(d=o.name)==null?void 0:d.toLowerCase().includes(m.toLowerCase())}):i,[i,m]),q=p.useMemo(()=>i.find(o=>o.key===s)??null,[s,i]);return f(y,{children:[e(h,{required:a,htmlFor:"package-select",children:t}),e(T,{freeSolo:!0,loading:g,disableClearable:n,forcePopupIcon:!0,options:k,filterOptions:z,value:q,renderOption:(o,{key:d,name:S})=>e(b,{props:o,title:S},d),getOptionLabel:o=>o.name??"",isOptionEqualToValue:(o,d)=>o.key===d.key,onInputChange:Q(c,X),onChange:(o,d)=>r(d),renderInput:o=>e(P,{...o,id:"package-select",placeholder:"Package",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}},value:m,onKeyDown:d=>d.stopPropagation()}),"data-testid":"PackageFilter"})]})});try{O.displayName="DashboardPackageSelector",O.__docgenInfo={description:"",displayName:"DashboardPackageSelector",props:{defaultPackageKey:{defaultValue:null,description:"",name:"defaultPackageKey",required:!1,type:{name:"string"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},disableClearable:{defaultValue:null,description:"",name:"disableClearable",required:!1,type:{name:"boolean"}},onSelectPackage:{defaultValue:null,description:"",name:"onSelectPackage",required:!0,type:{name:"(packageRef: Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null) => void"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}}}}}catch{}const me="Filter by Group",I=l=>{const{required:r=!1,labelText:s,value:a,onSelectValue:n,isLoading:t,apiType:i,versionContent:g}=l,m=ge(i,g);return f(y,{children:[e(h,{required:r,children:s??me}),e(T,{loading:t,disabled:!t&&m.length===N.length,forcePopupIcon:!0,value:a,options:m,renderOption:(u,c)=>e(b,{props:u,title:c,testId:`FilterByGroup-Option-${Z(c)}`},c),isOptionEqualToValue:(u,c)=>u===c,getOptionLabel:u=>u??"",renderInput:u=>e(P,{...u,id:"operation-group-filter",placeholder:"Group",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),onChange:(u,c)=>n==null?void 0:n(c??void 0),"data-testid":"OperationGroupFilter"})]})};function ge(l,r){const s=p.useMemo(()=>((r==null?void 0:r.operationGroups)??[]).filter(({apiType:a})=>a===l).map(({groupName:a})=>a),[l,r==null?void 0:r.operationGroups]);return[...N,...s]}const N=[ee,ae];try{I.displayName="OperationGroupFilter",I.__docgenInfo={description:"",displayName:"OperationGroupFilter",props:{required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onSelectValue:{defaultValue:null,description:"",name:"onSelectValue",required:!1,type:{name:"((value?: string) => void)"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!1,type:{name:"boolean"}},apiType:{defaultValue:null,description:"",name:"apiType",required:!1,type:{name:"enum",value:[{value:'"rest"'},{value:'"graphql"'}]}},versionContent:{defaultValue:null,description:"",name:"versionContent",required:!1,type:{name:"Readonly<{ version: string; packageKey: string; status: VersionStatus; createdAt: string; createdBy: Principal; operationGroups: readonly Readonly<{ groupName: string; description: string; ... 4 more ...; template?: File; }>[]; ... 5 more ...; revisionsCount: number; }> | null"}}}}}catch{}const fe="Filter by API Kind",C=p.memo(l=>{const{value:r,onSelectApiKind:s,required:a=!1,labelText:n}=l;return f(y,{children:[e(h,{required:a,children:n??fe}),e(T,{forcePopupIcon:!0,value:r,options:Object.keys(V).map(t=>t),renderOption:(t,i)=>e(b,{props:t,title:V[i],testId:`Option-${i}`},i),isOptionEqualToValue:(t,i)=>t===i,renderInput:t=>e(P,{...t,id:"api-kind-filter",placeholder:"API Kind",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),getOptionLabel:t=>V[t]??"",onChange:(t,i)=>s(i??void 0),"data-testid":"ApiKindFilter"})]})});try{C.displayName="ApiKindFilter",C.__docgenInfo={description:"",displayName:"ApiKindFilter",props:{onSelectApiKind:{defaultValue:null,description:"",name:"onSelectApiKind",required:!0,type:{name:"(value?: ApiKind | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"bwc"'},{value:'"no-bwc"'},{value:'"experimental"'}]}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}}}}}catch{}var L={},ye=re;Object.defineProperty(L,"__esModule",{value:!0});var B=L.default=void 0,Ae=ye(te()),ve=ne,_e=(0,Ae.default)((0,ve.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");B=L.default=_e;const be="Filter by API Audience",F=p.memo(l=>{const{value:r,onSelectApiAudience:s}=l;return f(y,{children:[e(h,{children:be}),e(T,{forcePopupIcon:!0,value:r,options:Object.keys(x).map(a=>a),renderOption:(a,n)=>e(b,{props:a,title:x[n],testId:`Option-${n}`},n),isOptionEqualToValue:(a,n)=>a===n,renderInput:a=>e(P,{...a,id:"api-audience-filter",placeholder:"API Audience",sx:{"& .MuiInputBase-root":{pt:"1px",pb:"1px"}}}),getOptionLabel:a=>x[a]??"",onChange:(a,n)=>s(n??void 0),"data-testid":"ApiAudienceFilter"})]})});try{F.displayName="ApiAudienceFilter",F.__docgenInfo={description:"",displayName:"ApiAudienceFilter",props:{onSelectApiAudience:{defaultValue:null,description:"",name:"onSelectApiAudience",required:!0,type:{name:"(value?: ApiAudience | undefined) => void"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"unknown"'},{value:'"internal"'},{value:'"external"'}]}}}}}catch{}const _=p.memo(l=>{const{selectedPackageKey:r,selectedOperationGroupName:s,selectedApiAudience:a,selectedApiKind:n,onSelectPackage:t,onSelectOperationGroup:i,onSelectApiAudience:g,onSelectApiKind:m,onClickExpandCollapseButton:u,areTagsLoading:c,fetchNextTagsPage:k,hasNextTagsPage:q,isNextTagsPageFetching:o,isReferencesLoading:d,isPackageVersionContentLoading:S,hiddenGeneralFilters:D,tags:w,references:M,versionContent:U,apiType:j,onSelectTag:W,onTagSearch:$,selectedTag:Y}=l,H=p.useCallback((Te,J)=>u(!J),[u]);return f(y,{children:[e(A,{sx:{borderBottom:"1px solid #D9D9D9",p:2},children:f(le,{expanded:!D,onChange:H,"data-testid":"GeneralFiltersAccordion",children:[e(oe,{sx:{p:0},expandIcon:e(B,{}),children:e(de,{width:"100%",noWrap:!0,variant:"button",children:"General Filters"})}),f(se,{children:[t&&e(O,{onSelectPackage:t,references:M,isLoading:d,defaultPackageKey:r,required:!1}),i&&e(A,{sx:{mt:t?1:0},children:e(I,{value:s,onSelectValue:i,isLoading:S,apiType:j,versionContent:U})}),g&&e(A,{sx:{mt:t||i?1:0},children:e(F,{value:a,onSelectApiAudience:g})}),m&&e(A,{sx:{mt:t||i||g?1:0},children:e(C,{value:n,onSelectApiKind:m})})]})]})}),e(ie,{tags:w,areTagsLoading:c,fetchNextTagsPage:k,isNextTagsPageFetching:o,hasNextTagsPage:q,onSearch:$,selectedTag:Y,onSelectTag:W})]})});try{_.displayName="OperationFilters",_.__docgenInfo={description:"",displayName:"OperationFilters",props:{selectedPackageKey:{defaultValue:null,description:"",name:"selectedPackageKey",required:!1,type:{name:"string"}},onSelectPackage:{defaultValue:null,description:"",name:"onSelectPackage",required:!1,type:{name:"((packageRef: Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null) => void)"}},selectedOperationGroupName:{defaultValue:null,description:"",name:"selectedOperationGroupName",required:!1,type:{name:"string"}},onSelectOperationGroup:{defaultValue:null,description:"",name:"onSelectOperationGroup",required:!1,type:{name:"((operationGroupName?: string) => void)"}},selectedApiAudience:{defaultValue:null,description:"",name:"selectedApiAudience",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"unknown"'},{value:'"internal"'},{value:'"external"'}]}},onSelectApiAudience:{defaultValue:null,description:"",name:"onSelectApiAudience",required:!1,type:{name:"((value?: ApiAudience) => void)"}},selectedApiKind:{defaultValue:null,description:"",name:"selectedApiKind",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"bwc"'},{value:'"no-bwc"'},{value:'"experimental"'}]}},onSelectApiKind:{defaultValue:null,description:"",name:"onSelectApiKind",required:!1,type:{name:"((value?: ApiKind) => void)"}},hiddenGeneralFilters:{defaultValue:null,description:"",name:"hiddenGeneralFilters",required:!0,type:{name:"boolean"}},onClickExpandCollapseButton:{defaultValue:null,description:"",name:"onClickExpandCollapseButton",required:!0,type:{name:"(value: boolean) => void"}},areTagsLoading:{defaultValue:null,description:"",name:"areTagsLoading",required:!0,type:{name:"boolean"}},fetchNextTagsPage:{defaultValue:null,description:"",name:"fetchNextTagsPage",required:!1,type:{name:"(() => Promise<void>)"}},isNextTagsPageFetching:{defaultValue:null,description:"",name:"isNextTagsPageFetching",required:!1,type:{name:"boolean"}},hasNextTagsPage:{defaultValue:null,description:"",name:"hasNextTagsPage",required:!1,type:{name:"HasNextPage"}},isReferencesLoading:{defaultValue:null,description:"",name:"isReferencesLoading",required:!0,type:{name:"boolean"}},isPackageVersionContentLoading:{defaultValue:null,description:"",name:"isPackageVersionContentLoading",required:!0,type:{name:"boolean"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"Tags"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},apiType:{defaultValue:null,description:"",name:"apiType",required:!0,type:{name:"enum",value:[{value:'"rest"'},{value:'"graphql"'}]}},versionContent:{defaultValue:null,description:"",name:"versionContent",required:!0,type:{name:"Readonly<{ version: string; packageKey: string; status: VersionStatus; createdAt: string; createdBy: Principal; operationGroups: readonly Readonly<{ groupName: string; description: string; ... 4 more ...; template?: File | undefined; }>[]; ... 5 more ...; revisionsCount: number; }> | null"}},onTagSearch:{defaultValue:null,description:"",name:"onTagSearch",required:!1,type:{name:"((value: string) => void)"}},selectedTag:{defaultValue:null,description:"",name:"selectedTag",required:!1,type:{name:"string"}},onSelectTag:{defaultValue:null,description:"",name:"onSelectTag",required:!0,type:{name:"(value?: string | undefined) => void"}}}}}catch{}const he={createdAt:"Fri Oct 06 2023",createdBy:{name:"John Williams",type:"user",id:"JW_1234"},status:"draft",version:"2023.1@3",revisionsCount:3,packageKey:"PSB.alint-dash",key:"c90f0e0d-005c-4349-a93c-8418822e06b2",latestRevision:!0,operationGroups:[]},{useArgs:Pe}=__STORYBOOK_MODULE_PREVIEW_API__,$a={title:"Operation Filters",args:{tags:K,areTagsLoading:!1,isPackageVersionContentLoading:!1,isReferencesLoading:!1,references:ue,apiType:pe,versionContent:he,hiddenGeneralFilters:!1},component:_},v=l=>{const[,r]=Pe(),s=p.useCallback(n=>{r({tags:K.filter(t=>t.toLowerCase().includes(n.toLowerCase()))})},[r]),a=p.useCallback(n=>{r({hiddenGeneralFilters:n})},[r]);return e(_,{...l,onTagSearch:s,onClickExpandCollapseButton:a})};var E,R,G;v.parameters={...v.parameters,docs:{...(E=v.parameters)==null?void 0:E.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  const onTagSearch = useCallback((value: string) => {
    updateArgs({
      tags: operationTags.filter(tag => tag.toLowerCase().includes(value.toLowerCase()))
    });
  }, [updateArgs]);
  const onClickExpandCollapseButton = useCallback((value: boolean) => {
    updateArgs({
      hiddenGeneralFilters: value
    });
  }, [updateArgs]);
  return <OperationFilters {...args} onTagSearch={onTagSearch} onClickExpandCollapseButton={onClickExpandCollapseButton} />;
}`,...(G=(R=v.parameters)==null?void 0:R.docs)==null?void 0:G.source}}};const Ya=["DefaultStory"];export{v as DefaultStory,Ya as __namedExportsOrder,$a as default};
//# sourceMappingURL=OperationFilters.stories-5f5de377.js.map
