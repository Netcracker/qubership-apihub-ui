import{j as Y}from"./createTheme-e504d7a1.js";import{e as k,R as P,U as I,l as g,m as M,E as H,M as w,a as x}from"./toggleHighContrast-9b7ffca8.js";import{r as S}from"./index-37ba2b57.js";import{f as N}from"./graphql-samples-c48f6c86.js";import{u as z}from"./useDebounce-c4a5dbf1.js";import{u as W}from"./useEffectOnce-12abbac4.js";import{V as X,W as d,X as m,Y as E,Z as _}from"./SpecificationDialog.stories-247ea1f7.js";import{J as C,b,Y as D,d as B,O as J,e as Z}from"./files-4dcee782.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./iframe-7dd92678.js";import"../sb-preview/runtime.js";import"./_commonjsHelpers-de833af9.js";import"./dialogTitleClasses-c791e94b.js";import"./clsx.m-e8952646.js";import"./index-65a2139a.js";import"./useThemeProps-be56d1e2.js";import"./useTheme-e67ac9fd.js";import"./Modal-ffa4feac.js";import"./utils-4745b4c1.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./TransitionGroupContext-0440df69.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-363c6d1a.js";import"./isHostComponent-73d6e646.js";import"./Paper-024c4ac3.js";import"./useId-f6e37502.js";import"./DialogTitle-ab65ab7e.js";import"./Typography-74efa758.js";import"./extendSxProp-c6b156d7.js";import"./DialogContent-5bab94bb.js";import"./Button-3d3f424e.js";import"./ButtonBase-d7ff9540.js";import"./emotion-react.browser.esm-6b7ec201.js";import"./hoist-non-react-statics.cjs-b1c88361.js";import"./assertThisInitialized-081f9914.js";import"./createSvgIcon-23119704.js";import"./index-8d47fad6.js";import"./index-891d46e9.js";import"./index-686a0dd6.js";import"./ToggleButtonGroup-f9c3e761.js";import"./ToggleButton-174cd863.js";import"./jsx-runtime_commonjs-proxy-350e4ed0.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useControlled-1dfdd739.js";import"./CustomChip-4efdab6b.js";import"./palette-8c6d2233.js";import"./Chip-f7e42c61.js";import"./arrays-4b61f5c5.js";import"./AccordionSummary-bb810e6c.js";import"./ListItemButton-3b7c05f0.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-02314725.js";import"./ListItemText-63c0edd0.js";import"./listItemTextClasses-3dd10bc0.js";import"./Box-3dbc4f20.js";import"./LoadingIndicator-70031678.js";import"./CircularProgress-0a03ae15.js";import"./PopupDelegate-deae3236.js";import"./index-270a4b4c.js";import"./Placeholder-185d0ba9.js";import"./IconButton-ae1303d1.js";import"./theme-c443f225.js";import"./CssBaseline-457ecc65.js";import"./GlobalStyles-cfaf7057.js";import"./apihub-builder.es-ef2bfb55.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";function O(e,t){e.revealLineNearTop(t,k.ScrollType.Smooth),e.setPosition({lineNumber:t,column:0}),e.focus()}function G(e,t){const[r,o]=S.useState(void 0);S.useEffect(()=>{const a=e==null?void 0:e.current;if(!a||!t)return;r||o(a.createDecorationsCollection());const n=N(a.getValue(),t);if(n){const i=n==null?void 0:n.range.start.line,c=n==null?void 0:n.range.end.line,p=[{range:new P(i+1,0,c+1,0),options:{isWholeLine:!1,marginClassName:"MonacoSelectedDecorator"}}];r==null||r.set(p),O(a,i+1)}return()=>{r==null||r.clear()}},[r,e,t])}function Q(e,t,r){const[o,a]=S.useState("");z(()=>r==null?void 0:r(o),500,[o]),S.useEffect(()=>{const n=$(e),i=n==null?void 0:n.onFindReplaceStateChange(({searchString:c})=>{c&&a(n._searchString)});return i==null?void 0:i.dispose},[e]),W(()=>{var c,p,u;const n=e.current;if(!t||!n)return;a(t);const i=(p=(c=n.getModel())==null?void 0:c.findMatches(t,!1,!1,!1,null,!0)[0])==null?void 0:p.range;i&&n.setSelection(i),(u=n.getAction("actions.find"))==null||u.run().then()})}function $(e){var t,r;return(r=(t=e.current)==null?void 0:t.getContribution("editor.contrib.findController"))==null?void 0:r.getState()}function ee(e,t){S.useEffect(()=>{var a;const r=e.current;if(!r)return;const o=(a=r.getModel())==null?void 0:a.getValue();if(t&&o){const n=N(o,t);if(n){const i=n==null?void 0:n.range.start.line;O(r,i+1)}}},[e,t])}function te(e,t,r,o){const a=`${r}/*.${o}`;S.useEffect(()=>{const n=e.current;if(n)return n.setModel(k.createModel(t,o,I.parse(a))),()=>{var i,c;(i=n.getModel())==null||i.dispose(),(c=n.getModel())==null||c.dispose()}},[e,t,o,a])}function re(e,t,r,o){W(()=>{const a=k.createModel(r,o);return k.defineTheme("custom",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#FFFFFF"}}),t.current=k.create(e.current,{minimap:{enabled:!0},hover:{above:!1},automaticLayout:!0,readOnly:!0,wordWrap:"on",tabSize:2,model:a,glyphMargin:!0,theme:"custom"}),()=>{var n,i,c;(i=(n=t.current)==null?void 0:n.getModel())==null||i.dispose(),(c=t.current)==null||c.dispose()}})}function F(e,t,r){const o=new Map,a=s=>{if(t==="*")return!0;const l=s.getLanguageId();return Array.isArray(t)?t.includes(l):t===l},n=async s=>{const l=s.getVersionId(),y=await r.provideMarkerData(s);!s.isDisposed()&&l===s.getVersionId()&&a(s)&&e.editor.setModelMarkers(s,r.owner,y??[])},i=s=>{if(!a(s))return;let l;const y=s.onDidChangeContent(()=>{clearTimeout(l),l=setTimeout(()=>{n(s)},500)});o.set(s,{dispose(){clearTimeout(l),y.dispose()}}),n(s)},c=s=>{e.editor.setModelMarkers(s,r.owner,[]);const l=o.get(s);l&&(l.dispose(),o.delete(s))},p=e.editor.onDidCreateModel(i),u=e.editor.onWillDisposeModel(s=>{var l;c(s),(l=r.doReset)==null||l.call(r,s)}),v=e.editor.onDidChangeModelLanguage(({model:s})=>{var l;c(s),i(s),(l=r.doReset)==null||l.call(r,s)});for(const s of e.editor.getModels())i(s);return{dispose(){for(const s of o.keys())c(s);p.dispose(),u.dispose(),v.dispose()},async revalidate(){await Promise.all(e.editor.getModels().map(n))}}}function ne(e,t){let{createData:r,interval:o=3e4,label:a,moduleId:n,stopWhenIdleFor:i=12e4}=t,c,p=0,u=!1;const v=()=>{c&&(c.dispose(),c=void 0)},s=setInterval(()=>{if(!c)return;Date.now()-p>i&&v()},o);return{dispose(){u=!0,clearInterval(s),v()},getWorker(...l){if(u)throw new Error("Worker manager has been disposed");return p=Date.now(),c||(c=e.editor.createWebWorker({createData:r,label:a,moduleId:n})),c.withSyncedResources(l)},updateCreateData(l){r=l,v()}}}var f="yaml";function oe(e){switch(e){case E.Error:return w.Error;case E.Warning:return w.Warning;case E.Information:return w.Info;case E.Hint:return w.Hint;default:return w.Info}}function ae(e){switch(e){case _.Deprecated:return x.Deprecated;case _.Unnecessary:return x.Unnecessary}}function A(e){var t;return{severity:oe(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,code:String(e.code),source:e.source,tags:(t=e.tags)==null?void 0:t.map(ae)}}function L(e){return{owner:f,async provideMarkerData(t){return(await(await e(t.uri)).doValidation(String(t.uri))).map(A)},async doReset(t){await(await e(t.uri)).resetSchema(String(t.uri))}}}function T(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}function h(e){if(e)return new P(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function V(e){return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}function ie(e){return{message:e.message,range:V(e),code:typeof e.code=="object"?e.code.value:e.code,source:e.source}}function se(e){const t=g.CompletionItemKind;switch(e){case d.Text:return t.Text;case d.Method:return t.Method;case d.Function:return t.Function;case d.Constructor:return t.Constructor;case d.Field:return t.Field;case d.Variable:return t.Variable;case d.Class:return t.Class;case d.Interface:return t.Interface;case d.Module:return t.Module;case d.Property:return t.Property;case d.Unit:return t.Unit;case d.Value:return t.Value;case d.Enum:return t.Enum;case d.Keyword:return t.Keyword;case d.Snippet:return t.Snippet;case d.Color:return t.Color;case d.File:return t.File;case d.Reference:return t.Reference;default:return t.Property}}function q(e){if(e)return{range:h(e.range),text:e.newText}}function ce(e){return{triggerCharacters:[" ",":"],async provideCompletionItems(t,r){const o=t.uri,n=await(await e(o)).doComplete(String(o),T(r));if(!n)return;const i=t.getWordUntilPosition(r),c=new P(r.lineNumber,i.startColumn,r.lineNumber,i.endColumn),p=n.items.map(u=>{const v={label:u.label,insertText:u.insertText||u.label,sortText:u.sortText,filterText:u.filterText,documentation:u.documentation,detail:u.detail,kind:se(u.kind),range:c};return u.textEdit&&(v.range=h("range"in u.textEdit?u.textEdit.range:u.textEdit.replace),v.insertText=u.textEdit.newText),u.additionalTextEdits&&(v.additionalTextEdits=u.additionalTextEdits.map(q)),u.insertTextFormat===X.Snippet&&(v.insertTextRules=g.CompletionItemInsertTextRule.InsertAsSnippet),v});return{incomplete:n.isIncomplete,suggestions:p}}}}function ue(e){return{originSelectionRange:h(e.originSelectionRange),range:h(e.targetRange),targetSelectionRange:h(e.targetSelectionRange),uri:I.parse(e.targetUri)}}function le(e){return{async provideDefinition(t,r){const o=t.uri,n=await(await e(o)).doDefinition(String(o),T(r));return n==null?void 0:n.map(ue)}}}function de(e){return{async provideHover(t,r){const o=t.uri,n=await(await e(o)).doHover(String(o),T(r));if(n)return{range:h(n.range),contents:[{value:n.contents.value}]}}}}function me(e){const t=g.SymbolKind;switch(e){case m.File:return t.Array;case m.Module:return t.Module;case m.Namespace:return t.Namespace;case m.Package:return t.Package;case m.Class:return t.Class;case m.Method:return t.Method;case m.Property:return t.Property;case m.Field:return t.Field;case m.Constructor:return t.Constructor;case m.Enum:return t.Enum;case m.Interface:return t.Interface;case m.Function:return t.Function;case m.Variable:return t.Variable;case m.Constant:return t.Constant;case m.String:return t.String;case m.Number:return t.Number;case m.Boolean:return t.Boolean;case m.Array:return t.Array;default:return t.Function}}function K(e){return{detail:e.detail||"",range:h(e.range),name:e.name,kind:me(e.kind),selectionRange:h(e.selectionRange),children:e.children.map(K),tags:[]}}function pe(e){return{async provideDocumentSymbols(t){const r=t.uri,a=await(await e(r)).findDocumentSymbols(String(r));if(a)return a.map(K)}}}function ge(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces,...e}}function fe(e){return{async provideDocumentFormattingEdits(t,r){const o=t.uri,n=await(await e(o)).format(String(o),ge(r));if(!(!n||n.length===0))return n.map(q)}}}function ve(e){return{range:h(e.range),tooltip:e.tooltip,url:e.target}}function he(e){return{async provideLinks(t){const r=t.uri;return{links:(await(await e(r)).findLinks(String(r))).map(ve)}}}}function Se(e){const t=[];for(const[r,o]of Object.entries(e.changes))for(const a of o)t.push({resource:I.parse(r),edit:{text:a.newText,range:h(a.range)}});return{edits:t}}function we(e){var t;return{title:e.title,diagnostics:e.diagnostics.map(A),disabled:(t=e.disabled)==null?void 0:t.reason,edit:Se(e.edit),kind:e.kind,isPreferred:e.isPreferred}}function ke(e){return{async provideCodeActions(t,r,o){const a=t.uri;return{actions:(await(await e(a)).getCodeAction(String(a),V(r),o.markers.map(ie))).map(we),dispose(){}}}}}var Ee={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:g.IndentAction.Indent}}]};function ye(e){const t=ne(M,{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:{languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest}});e.onDidChange(()=>{t.updateCreateData({languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest})}),g.registerCompletionItemProvider(f,ce(t.getWorker)),g.registerHoverProvider(f,de(t.getWorker)),g.registerDefinitionProvider(f,le(t.getWorker)),g.registerDocumentSymbolProvider(f,pe(t.getWorker)),g.registerDocumentFormattingEditProvider(f,fe(t.getWorker)),g.registerLinkProvider(f,he(t.getWorker)),g.registerCodeActionProvider(f,ke(t.getWorker)),g.setLanguageConfiguration(f,Ee);let r=F(M,f,L(t.getWorker));e.onDidChange(()=>{r.dispose(),r=F(M,f,L(t.getWorker))})}var U={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"};function Me(e){const t=new H;let r=e;const o={get onDidChange(){return t.event},get diagnosticsOptions(){return r},setDiagnosticsOptions(a){r={...U,...a},t.fire(o)}};return o}var j=Me(U);g.register({id:f,extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});g.onLanguage("yaml",()=>{ye(j)});function Ce(e={}){j.setDiagnosticsOptions(e)}function be(){const e=(t,...r)=>r.map(o=>`${t}/*${o}`);Ce({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"/schemas/openapi/2.0.json",fileMatch:e(B,D,b,C)},{uri:"/schemas/openapi/3.0.json",fileMatch:e(J,D,b,C)},{uri:"/schemas/openapi/3.1.json",fileMatch:e(Z,D,b,C)}]})}be();function De(e){const{value:t,type:r,language:o,selectedUri:a,searchPhrase:n,onSearchPhraseChange:i}=e,c=S.useRef(null),p=S.useRef();return re(c,p,t,o),te(p,t,r,o),G(p,a),ee(p,a),Q(p,n,i),c}const R=S.memo(({value:e,type:t,language:r,selectedUri:o,searchPhrase:a,onSearchPhraseChange:n})=>{const i=De({value:e,type:t,language:r,selectedUri:o,searchPhrase:a,onSearchPhraseChange:n});return Y("div",{ref:i,style:{height:"100%"}})});try{R.displayName="MonacoEditorElement",R.__docgenInfo={description:"",displayName:"MonacoEditorElement",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"graphql"'},{value:'"openapi-3-1"'},{value:'"openapi-3-0"'},{value:'"openapi-2-0"'},{value:'"openapi"'},{value:'"asyncapi-2"'},{value:'"json-schema"'},{value:'"markdown"'},{value:'"unknown"'},{value:'"graphql-schema"'},{value:'"graphapi"'},{value:'"introspection"'},{value:'"protobuf-3"'}]}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"graphql"'},{value:'"markdown"'},{value:'"yaml"'},{value:'"json"'},{value:'"proto"'}]}},selectedUri:{defaultValue:null,description:"",name:"selectedUri",required:!1,type:{name:"string"}},searchPhrase:{defaultValue:null,description:"",name:"searchPhrase",required:!1,type:{name:"string"}},onSearchPhraseChange:{defaultValue:null,description:"",name:"onSearchPhraseChange",required:!1,type:{name:"((value: string) => void)"}}}}}catch{}export{R as default};
//# sourceMappingURL=MonacoEditorElement-5bee251a.js.map
