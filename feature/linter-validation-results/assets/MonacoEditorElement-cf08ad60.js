import{j as Y}from"./createTheme-1c3fdb4c.js";import{l as g,m as y,E as H,R as P,U as R,M as k,a as T,e as w}from"./toggleHighContrast-1a304ce8.js";import{r as S}from"./index-37ba2b57.js";import{V as z,W as d,X as m,Y as E,Z as F}from"./SpecificationDialog.stories-ccac7500.js";import{J as C,b,Y as D,d as X,O as B,e as J}from"./files-c1a311f6.js";import{u as Z}from"./useDebounce-c4a5dbf1.js";import{u as N}from"./useEffectOnce-12abbac4.js";import{f as W}from"./graphql-samples-046907d8.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./iframe-d61f78c8.js";import"../sb-preview/runtime.js";import"./_commonjsHelpers-de833af9.js";import"./index-8d47fad6.js";import"./index-891d46e9.js";import"./index-686a0dd6.js";import"./index-4da2af8c.js";import"./jsx-runtime_commonjs-proxy-2f62dfa9.js";import"./createSvgIcon-18d721fa.js";import"./clsx.m-5aa26874.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-8e56afb5.js";import"./createChainedFunction-0bab83cf.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useId-f6e37502.js";import"./useControlled-1dfdd739.js";import"./CustomChip-cd1ea604.js";import"./palette-8c6d2233.js";import"./Chip-6a8b245e.js";import"./ButtonBase-0b48aa94.js";import"./emotion-react.browser.esm-687770fd.js";import"./assertThisInitialized-081f9914.js";import"./inheritsLoose-5494d9cc.js";import"./arrays-b0979955.js";import"./Button-14460f64.js";import"./AccordionSummary-41656b0c.js";import"./Paper-3f5febe1.js";import"./utils-360dcac8.js";import"./useTheme-a99309af.js";import"./Typography-2070e12b.js";import"./extendSxProp-1599c125.js";import"./ListItemButton-44f10f4b.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-8c4b5582.js";import"./ListItemText-5b815175.js";import"./listItemTextClasses-4fe455c3.js";import"./Box-315038cd.js";import"./LoadingIndicator-cce4677b.js";import"./CircularProgress-0eca2745.js";import"./PopupDelegate-deae3236.js";import"./index-270a4b4c.js";import"./Placeholder-97ed2ef6.js";import"./ToggleButtonGroup-c2a65874.js";import"./ToggleButton-8136b134.js";import"./dialogTitleClasses-b9dc869d.js";import"./Modal-15c27a48.js";import"./Portal-5d34a236.js";import"./isHostComponent-73d6e646.js";import"./DialogTitle-070406b3.js";import"./IconButton-ff073d65.js";import"./DialogContent-8f690a13.js";import"./theme-38c1ad02.js";import"./GlobalStyles-4ceeac40.js";import"./CssBaseline-cda36a54.js";import"./GlobalStyles-7aea6e12.js";import"./apihub-builder.es-9db9cc14.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";function x(e,t,r){const o=new Map,a=s=>{if(t==="*")return!0;const l=s.getLanguageId();return Array.isArray(t)?t.includes(l):t===l},n=async s=>{const l=s.getVersionId(),M=await r.provideMarkerData(s);!s.isDisposed()&&l===s.getVersionId()&&a(s)&&e.editor.setModelMarkers(s,r.owner,M??[])},c=s=>{if(!a(s))return;let l;const M=s.onDidChangeContent(()=>{clearTimeout(l),l=setTimeout(()=>{n(s)},500)});o.set(s,{dispose(){clearTimeout(l),M.dispose()}}),n(s)},u=s=>{e.editor.setModelMarkers(s,r.owner,[]);const l=o.get(s);l&&(l.dispose(),o.delete(s))},p=e.editor.onDidCreateModel(c),i=e.editor.onWillDisposeModel(s=>{var l;u(s),(l=r.doReset)==null||l.call(r,s)}),v=e.editor.onDidChangeModelLanguage(({model:s})=>{var l;u(s),c(s),(l=r.doReset)==null||l.call(r,s)});for(const s of e.editor.getModels())c(s);return{dispose(){for(const s of o.keys())u(s);p.dispose(),i.dispose(),v.dispose()},async revalidate(){await Promise.all(e.editor.getModels().map(n))}}}function G(e,t){let{createData:r,interval:o=3e4,label:a,moduleId:n,stopWhenIdleFor:c=12e4}=t,u,p=0,i=!1;const v=()=>{u&&(u.dispose(),u=void 0)},s=setInterval(()=>{if(!u)return;Date.now()-p>c&&v()},o);return{dispose(){i=!0,clearInterval(s),v()},getWorker(...l){if(i)throw new Error("Worker manager has been disposed");return p=Date.now(),u||(u=e.editor.createWebWorker({createData:r,label:a,moduleId:n})),u.withSyncedResources(l)},updateCreateData(l){r=l,v()}}}var f="yaml";function Q(e){switch(e){case E.Error:return k.Error;case E.Warning:return k.Warning;case E.Information:return k.Info;case E.Hint:return k.Hint;default:return k.Info}}function $(e){switch(e){case F.Deprecated:return T.Deprecated;case F.Unnecessary:return T.Unnecessary}}function V(e){var t;return{severity:Q(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,code:String(e.code),source:e.source,tags:(t=e.tags)==null?void 0:t.map($)}}function _(e){return{owner:f,async provideMarkerData(t){return(await(await e(t.uri)).doValidation(String(t.uri))).map(V)},async doReset(t){await(await e(t.uri)).resetSchema(String(t.uri))}}}function I(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}function h(e){if(e)return new P(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function A(e){return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}function ee(e){return{message:e.message,range:A(e),code:typeof e.code=="object"?e.code.value:e.code,source:e.source}}function te(e){const t=g.CompletionItemKind;switch(e){case d.Text:return t.Text;case d.Method:return t.Method;case d.Function:return t.Function;case d.Constructor:return t.Constructor;case d.Field:return t.Field;case d.Variable:return t.Variable;case d.Class:return t.Class;case d.Interface:return t.Interface;case d.Module:return t.Module;case d.Property:return t.Property;case d.Unit:return t.Unit;case d.Value:return t.Value;case d.Enum:return t.Enum;case d.Keyword:return t.Keyword;case d.Snippet:return t.Snippet;case d.Color:return t.Color;case d.File:return t.File;case d.Reference:return t.Reference;default:return t.Property}}function O(e){if(e)return{range:h(e.range),text:e.newText}}function re(e){return{triggerCharacters:[" ",":"],async provideCompletionItems(t,r){const o=t.uri,n=await(await e(o)).doComplete(String(o),I(r));if(!n)return;const c=t.getWordUntilPosition(r),u=new P(r.lineNumber,c.startColumn,r.lineNumber,c.endColumn),p=n.items.map(i=>{const v={label:i.label,insertText:i.insertText||i.label,sortText:i.sortText,filterText:i.filterText,documentation:i.documentation,detail:i.detail,kind:te(i.kind),range:u};return i.textEdit&&(v.range=h("range"in i.textEdit?i.textEdit.range:i.textEdit.replace),v.insertText=i.textEdit.newText),i.additionalTextEdits&&(v.additionalTextEdits=i.additionalTextEdits.map(O)),i.insertTextFormat===z.Snippet&&(v.insertTextRules=g.CompletionItemInsertTextRule.InsertAsSnippet),v});return{incomplete:n.isIncomplete,suggestions:p}}}}function ne(e){return{originSelectionRange:h(e.originSelectionRange),range:h(e.targetRange),targetSelectionRange:h(e.targetSelectionRange),uri:R.parse(e.targetUri)}}function oe(e){return{async provideDefinition(t,r){const o=t.uri,n=await(await e(o)).doDefinition(String(o),I(r));return n==null?void 0:n.map(ne)}}}function ae(e){return{async provideHover(t,r){const o=t.uri,n=await(await e(o)).doHover(String(o),I(r));if(n)return{range:h(n.range),contents:[{value:n.contents.value}]}}}}function ie(e){const t=g.SymbolKind;switch(e){case m.File:return t.Array;case m.Module:return t.Module;case m.Namespace:return t.Namespace;case m.Package:return t.Package;case m.Class:return t.Class;case m.Method:return t.Method;case m.Property:return t.Property;case m.Field:return t.Field;case m.Constructor:return t.Constructor;case m.Enum:return t.Enum;case m.Interface:return t.Interface;case m.Function:return t.Function;case m.Variable:return t.Variable;case m.Constant:return t.Constant;case m.String:return t.String;case m.Number:return t.Number;case m.Boolean:return t.Boolean;case m.Array:return t.Array;default:return t.Function}}function q(e){return{detail:e.detail||"",range:h(e.range),name:e.name,kind:ie(e.kind),selectionRange:h(e.selectionRange),children:e.children.map(q),tags:[]}}function se(e){return{async provideDocumentSymbols(t){const r=t.uri,a=await(await e(r)).findDocumentSymbols(String(r));if(a)return a.map(q)}}}function ce(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces,...e}}function ue(e){return{async provideDocumentFormattingEdits(t,r){const o=t.uri,n=await(await e(o)).format(String(o),ce(r));if(!(!n||n.length===0))return n.map(O)}}}function le(e){return{range:h(e.range),tooltip:e.tooltip,url:e.target}}function de(e){return{async provideLinks(t){const r=t.uri;return{links:(await(await e(r)).findLinks(String(r))).map(le)}}}}function me(e){const t=[];for(const[r,o]of Object.entries(e.changes))for(const a of o)t.push({resource:R.parse(r),edit:{text:a.newText,range:h(a.range)}});return{edits:t}}function pe(e){var t;return{title:e.title,diagnostics:e.diagnostics.map(V),disabled:(t=e.disabled)==null?void 0:t.reason,edit:me(e.edit),kind:e.kind,isPreferred:e.isPreferred}}function ge(e){return{async provideCodeActions(t,r,o){const a=t.uri;return{actions:(await(await e(a)).getCodeAction(String(a),A(r),o.markers.map(ee))).map(pe),dispose(){}}}}}var fe={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:g.IndentAction.Indent}}]};function ve(e){const t=G(y,{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:{languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest}});e.onDidChange(()=>{t.updateCreateData({languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest})}),g.registerCompletionItemProvider(f,re(t.getWorker)),g.registerHoverProvider(f,ae(t.getWorker)),g.registerDefinitionProvider(f,oe(t.getWorker)),g.registerDocumentSymbolProvider(f,se(t.getWorker)),g.registerDocumentFormattingEditProvider(f,ue(t.getWorker)),g.registerLinkProvider(f,de(t.getWorker)),g.registerCodeActionProvider(f,ge(t.getWorker)),g.setLanguageConfiguration(f,fe);let r=x(y,f,_(t.getWorker));e.onDidChange(()=>{r.dispose(),r=x(y,f,_(t.getWorker))})}var K={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"};function he(e){const t=new H;let r=e;const o={get onDidChange(){return t.event},get diagnosticsOptions(){return r},setDiagnosticsOptions(a){r={...K,...a},t.fire(o)}};return o}var U=he(K);g.register({id:f,extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});g.onLanguage("yaml",()=>{ve(U)});function Se(e={}){U.setDiagnosticsOptions(e)}function we(){const e=(t,...r)=>r.map(o=>`${t}/*${o}`);Se({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"/schemas/openapi/2.0.json",fileMatch:e(X,D,b,C)},{uri:"/schemas/openapi/3.0.json",fileMatch:e(B,D,b,C)},{uri:"/schemas/openapi/3.1.json",fileMatch:e(J,D,b,C)}]})}function ke(e,t=[]){S.useEffect(()=>{if(t.length===0)return;const r=e.current;if(!r)return;const o=r.getModel();o&&w.setModelMarkers(o,"owner",t)},[e,t])}function Ee(e,t,r){const[o,a]=S.useState("");Z(()=>r==null?void 0:r(o),500,[o]),S.useEffect(()=>{const n=Me(e),c=n==null?void 0:n.onFindReplaceStateChange(({searchString:u})=>{u&&a(n._searchString)});return c==null?void 0:c.dispose},[e]),N(()=>{var u,p,i;const n=e.current;if(!t||!n)return;a(t);const c=(p=(u=n.getModel())==null?void 0:u.findMatches(t,!1,!1,!1,null,!0)[0])==null?void 0:p.range;c&&n.setSelection(c),(i=n.getAction("actions.find"))==null||i.run().then()})}function Me(e){var t,r;return(r=(t=e.current)==null?void 0:t.getContribution("editor.contrib.findController"))==null?void 0:r.getState()}function j(e,t){e.revealLineNearTop(t,w.ScrollType.Smooth),e.setPosition({lineNumber:t,column:0}),e.focus()}function ye(e,t){S.useEffect(()=>{var a;const r=e.current;if(!r)return;const o=(a=r.getModel())==null?void 0:a.getValue();if(t&&o){const n=W(o,t);if(n){const c=n==null?void 0:n.range.start.line;j(r,c+1)}}},[e,t])}function Ce(e,t){const[r,o]=S.useState(void 0);S.useEffect(()=>{const a=e==null?void 0:e.current;if(!a||!t)return;r||o(a.createDecorationsCollection());const n=W(a.getValue(),t);if(n){const c=n==null?void 0:n.range.start.line,u=n==null?void 0:n.range.end.line,p=[{range:new P(c+1,0,u+1,0),options:{isWholeLine:!1,marginClassName:"MonacoSelectedDecorator"}}];r==null||r.set(p),j(a,c+1)}return()=>{r==null||r.clear()}},[r,e,t])}function be(e,t,r,o){N(()=>{const a=w.createModel(r,o);return w.defineTheme("custom",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#FFFFFF"}}),t.current=w.create(e.current,{minimap:{enabled:!0},hover:{above:!1},automaticLayout:!0,readOnly:!0,renderValidationDecorations:"on",wordWrap:"on",tabSize:2,model:a,glyphMargin:!0,theme:"custom"}),()=>{var n,c,u;(c=(n=t.current)==null?void 0:n.getModel())==null||c.dispose(),(u=t.current)==null||u.dispose()}})}function De(e,t,r,o){const a=`${r}/*.${o}`;S.useEffect(()=>{const n=e.current;if(!n)return;const c=w.createModel(t,o);return w.defineTheme("custom",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#FFFFFF"}}),n.setModel(c),()=>{var u;(u=n.getModel())==null||u.dispose()}},[e,t,o,a])}we();function Pe(e){const{value:t,type:r,language:o,selectedUri:a,searchPhrase:n,onSearchPhraseChange:c,markers:u}=e,p=S.useRef(null),i=S.useRef();return be(p,i,t,o),De(i,t,r,o),Ce(i,a),ye(i,a),Ee(i,n,c),ke(i,u),p}const L=S.memo(({value:e,type:t,language:r,selectedUri:o,searchPhrase:a,onSearchPhraseChange:n,markers:c})=>{const u=Pe({value:e,type:t,language:r,selectedUri:o,searchPhrase:a,onSearchPhraseChange:n,markers:c});return Y("div",{ref:u,style:{height:"100%"}})});try{L.displayName="MonacoEditorElement",L.__docgenInfo={description:"",displayName:"MonacoEditorElement",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"graphql"'},{value:'"openapi-3-1"'},{value:'"openapi-3-0"'},{value:'"openapi-2-0"'},{value:'"openapi"'},{value:'"asyncapi-2"'},{value:'"json-schema"'},{value:'"markdown"'},{value:'"unknown"'},{value:'"graphql-schema"'},{value:'"graphapi"'},{value:'"introspection"'},{value:'"protobuf-3"'}]}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"enum",value:[{value:'"graphql"'},{value:'"text"'},{value:'"markdown"'},{value:'"yaml"'},{value:'"json"'},{value:'"proto"'}]}},selectedUri:{defaultValue:null,description:"",name:"selectedUri",required:!1,type:{name:"`/${string}`"}},searchPhrase:{defaultValue:null,description:"",name:"searchPhrase",required:!1,type:{name:"string"}},onSearchPhraseChange:{defaultValue:null,description:"",name:"onSearchPhraseChange",required:!1,type:{name:"((value: string) => void)"}},markers:{defaultValue:null,description:"",name:"markers",required:!1,type:{name:"IMarkerData[]"}}}}}catch{}export{L as default};
//# sourceMappingURL=MonacoEditorElement-cf08ad60.js.map
