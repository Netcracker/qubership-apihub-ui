import{j as Y}from"./createTheme-1c3fdb4c.js";import{e as w,R as I,M as h,l as g,m as b,E as H,U as F,a as L}from"./toggleHighContrast-4d064f9a.js";import{r as y}from"./index-37ba2b57.js";import{f as R}from"./graphql-samples-046907d8.js";import{u as z}from"./useDebounce-c4a5dbf1.js";import{u as W}from"./useEffectOnce-12abbac4.js";import{V as X,W as d,X as p,Y as C,Z as T}from"./SpecificationDialog.stories-7212922c.js";import{J as k,b as M,Y as D,d as B,O as J,e as Z}from"./files-c1a311f6.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./iframe-5936ff9a.js";import"../sb-preview/runtime.js";import"./_commonjsHelpers-de833af9.js";import"./dialogTitleClasses-b9dc869d.js";import"./clsx.m-5aa26874.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-8e56afb5.js";import"./useTheme-a99309af.js";import"./Modal-15c27a48.js";import"./utils-360dcac8.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-5d34a236.js";import"./isHostComponent-73d6e646.js";import"./Paper-3f5febe1.js";import"./useId-f6e37502.js";import"./DialogTitle-070406b3.js";import"./Typography-2070e12b.js";import"./extendSxProp-1599c125.js";import"./DialogContent-8f690a13.js";import"./Button-14460f64.js";import"./ButtonBase-0b48aa94.js";import"./emotion-react.browser.esm-687770fd.js";import"./assertThisInitialized-081f9914.js";import"./createSvgIcon-18d721fa.js";import"./index-8d47fad6.js";import"./index-891d46e9.js";import"./index-686a0dd6.js";import"./jsx-runtime_commonjs-proxy-2f62dfa9.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useControlled-1dfdd739.js";import"./CustomChip-cd1ea604.js";import"./palette-8c6d2233.js";import"./Chip-6a8b245e.js";import"./arrays-b0979955.js";import"./AccordionSummary-41656b0c.js";import"./ListItemButton-44f10f4b.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-8c4b5582.js";import"./ListItemText-5b815175.js";import"./listItemTextClasses-4fe455c3.js";import"./Box-315038cd.js";import"./LoadingIndicator-cce4677b.js";import"./CircularProgress-0eca2745.js";import"./PopupDelegate-deae3236.js";import"./index-270a4b4c.js";import"./Placeholder-97ed2ef6.js";import"./ToggleButtonGroup-c2a65874.js";import"./ToggleButton-8136b134.js";import"./IconButton-ff073d65.js";import"./theme-38c1ad02.js";import"./GlobalStyles-4ceeac40.js";import"./CssBaseline-cda36a54.js";import"./GlobalStyles-7aea6e12.js";import"./apihub-builder.es-9db9cc14.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";function O(e,t){e.revealLineNearTop(t,w.ScrollType.Smooth),e.setPosition({lineNumber:t,column:0}),e.focus()}function $(e,t){const[r,o]=y.useState(void 0);y.useEffect(()=>{const a=e==null?void 0:e.current;if(!a||!t)return;r||o(a.createDecorationsCollection());const n=R(a.getValue(),t);if(n){const i=n==null?void 0:n.range.start.line,u=n==null?void 0:n.range.end.line,m=[{range:new I(i+1,0,u+1,0),options:{isWholeLine:!1,marginClassName:"MonacoSelectedDecorator"}}];r==null||r.set(m),O(a,i+1)}return()=>{r==null||r.clear()}},[r,e,t])}function G(e,t,r){const[o,a]=y.useState("");z(()=>r==null?void 0:r(o),500,[o]),y.useEffect(()=>{const n=Q(e),i=n==null?void 0:n.onFindReplaceStateChange(({searchString:u})=>{u&&a(n._searchString)});return i==null?void 0:i.dispose},[e]),W(()=>{var u,m,c;const n=e.current;if(!t||!n)return;a(t);const i=(m=(u=n.getModel())==null?void 0:u.findMatches(t,!1,!1,!1,null,!0)[0])==null?void 0:m.range;i&&n.setSelection(i),(c=n.getAction("actions.find"))==null||c.run().then()})}function Q(e){var t,r;return(r=(t=e.current)==null?void 0:t.getContribution("editor.contrib.findController"))==null?void 0:r.getState()}function ee(e,t){y.useEffect(()=>{var a;const r=e.current;if(!r)return;const o=(a=r.getModel())==null?void 0:a.getValue();if(t&&o){const n=R(o,t);if(n){const i=n==null?void 0:n.range.start.line;O(r,i+1)}}},[e,t])}function te(e,t,r,o){const a=`${r}/*.${o}`;y.useEffect(()=>{const n=e.current;if(!n)return;console.log("filename",a);const i=n.getModel();return n.setModel(i),i&&w.setModelMarkers(i,"owner",[{startLineNumber:2,startColumn:1,endLineNumber:2,endColumn:4,message:"Error msg",severity:h.Error,tags:[],source:"my-linter"},{startLineNumber:3,startColumn:1,endLineNumber:7,endColumn:4,message:"Warning msg",severity:h.Warning,tags:[],source:"my-linter"},{startLineNumber:8,startColumn:1,endLineNumber:10,endColumn:4,message:"Info msg",severity:h.Info,tags:[],source:"my-linter"},{startLineNumber:11,startColumn:1,endLineNumber:11,endColumn:7,message:"Hint msg",severity:h.Hint,tags:[],source:"my-linter"},{startLineNumber:12,startColumn:1,endLineNumber:15,endColumn:14,message:"Error msg",severity:h.Error,tags:[],source:"my-linter"},{startLineNumber:13,startColumn:1,endLineNumber:14,endColumn:4,message:"Warning msg",severity:h.Warning,tags:[],source:"my-linter"}]),()=>{var u,m;(u=n.getModel())==null||u.dispose(),(m=n.getModel())==null||m.dispose()}},[e,t,o,a])}function re(e,t,r,o){W(()=>{const a=w.createModel(r,o);return w.defineTheme("custom",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#FFFFFF"}}),t.current=w.create(e.current,{minimap:{enabled:!0},hover:{above:!1},automaticLayout:!0,readOnly:!0,renderValidationDecorations:"on",wordWrap:"on",tabSize:2,model:a,glyphMargin:!0,theme:"custom"}),()=>{var n,i,u;(i=(n=t.current)==null?void 0:n.getModel())==null||i.dispose(),(u=t.current)==null||u.dispose()}})}function N(e,t,r){const o=new Map,a=s=>{if(t==="*")return!0;const l=s.getLanguageId();return Array.isArray(t)?t.includes(l):t===l},n=async s=>{const l=s.getVersionId(),E=await r.provideMarkerData(s);!s.isDisposed()&&l===s.getVersionId()&&a(s)&&e.editor.setModelMarkers(s,r.owner,E??[])},i=s=>{if(!a(s))return;let l;const E=s.onDidChangeContent(()=>{clearTimeout(l),l=setTimeout(()=>{n(s)},500)});o.set(s,{dispose(){clearTimeout(l),E.dispose()}}),n(s)},u=s=>{e.editor.setModelMarkers(s,r.owner,[]);const l=o.get(s);l&&(l.dispose(),o.delete(s))},m=e.editor.onDidCreateModel(i),c=e.editor.onWillDisposeModel(s=>{var l;u(s),(l=r.doReset)==null||l.call(r,s)}),v=e.editor.onDidChangeModelLanguage(({model:s})=>{var l;u(s),i(s),(l=r.doReset)==null||l.call(r,s)});for(const s of e.editor.getModels())i(s);return{dispose(){for(const s of o.keys())u(s);m.dispose(),c.dispose(),v.dispose()},async revalidate(){await Promise.all(e.editor.getModels().map(n))}}}function ne(e,t){let{createData:r,interval:o=3e4,label:a,moduleId:n,stopWhenIdleFor:i=12e4}=t,u,m=0,c=!1;const v=()=>{u&&(u.dispose(),u=void 0)},s=setInterval(()=>{if(!u)return;Date.now()-m>i&&v()},o);return{dispose(){c=!0,clearInterval(s),v()},getWorker(...l){if(c)throw new Error("Worker manager has been disposed");return m=Date.now(),u||(u=e.editor.createWebWorker({createData:r,label:a,moduleId:n})),u.withSyncedResources(l)},updateCreateData(l){r=l,v()}}}var f="yaml";function oe(e){switch(e){case C.Error:return h.Error;case C.Warning:return h.Warning;case C.Information:return h.Info;case C.Hint:return h.Hint;default:return h.Info}}function ae(e){switch(e){case T.Deprecated:return L.Deprecated;case T.Unnecessary:return L.Unnecessary}}function V(e){var t;return{severity:oe(e.severity),startLineNumber:e.range.start.line+1,startColumn:e.range.start.character+1,endLineNumber:e.range.end.line+1,endColumn:e.range.end.character+1,message:e.message,code:String(e.code),source:e.source,tags:(t=e.tags)==null?void 0:t.map(ae)}}function x(e){return{owner:f,async provideMarkerData(t){return(await(await e(t.uri)).doValidation(String(t.uri))).map(V)},async doReset(t){await(await e(t.uri)).resetSchema(String(t.uri))}}}function P(e){if(e)return{character:e.column-1,line:e.lineNumber-1}}function S(e){if(e)return new I(e.start.line+1,e.start.character+1,e.end.line+1,e.end.character+1)}function A(e){return{start:{line:e.startLineNumber-1,character:e.startColumn-1},end:{line:e.endLineNumber-1,character:e.endColumn-1}}}function ie(e){return{message:e.message,range:A(e),code:typeof e.code=="object"?e.code.value:e.code,source:e.source}}function se(e){const t=g.CompletionItemKind;switch(e){case d.Text:return t.Text;case d.Method:return t.Method;case d.Function:return t.Function;case d.Constructor:return t.Constructor;case d.Field:return t.Field;case d.Variable:return t.Variable;case d.Class:return t.Class;case d.Interface:return t.Interface;case d.Module:return t.Module;case d.Property:return t.Property;case d.Unit:return t.Unit;case d.Value:return t.Value;case d.Enum:return t.Enum;case d.Keyword:return t.Keyword;case d.Snippet:return t.Snippet;case d.Color:return t.Color;case d.File:return t.File;case d.Reference:return t.Reference;default:return t.Property}}function q(e){if(e)return{range:S(e.range),text:e.newText}}function ue(e){return{triggerCharacters:[" ",":"],async provideCompletionItems(t,r){const o=t.uri,n=await(await e(o)).doComplete(String(o),P(r));if(!n)return;const i=t.getWordUntilPosition(r),u=new I(r.lineNumber,i.startColumn,r.lineNumber,i.endColumn),m=n.items.map(c=>{const v={label:c.label,insertText:c.insertText||c.label,sortText:c.sortText,filterText:c.filterText,documentation:c.documentation,detail:c.detail,kind:se(c.kind),range:u};return c.textEdit&&(v.range=S("range"in c.textEdit?c.textEdit.range:c.textEdit.replace),v.insertText=c.textEdit.newText),c.additionalTextEdits&&(v.additionalTextEdits=c.additionalTextEdits.map(q)),c.insertTextFormat===X.Snippet&&(v.insertTextRules=g.CompletionItemInsertTextRule.InsertAsSnippet),v});return{incomplete:n.isIncomplete,suggestions:m}}}}function ce(e){return{originSelectionRange:S(e.originSelectionRange),range:S(e.targetRange),targetSelectionRange:S(e.targetSelectionRange),uri:F.parse(e.targetUri)}}function le(e){return{async provideDefinition(t,r){const o=t.uri,n=await(await e(o)).doDefinition(String(o),P(r));return n==null?void 0:n.map(ce)}}}function me(e){return{async provideHover(t,r){const o=t.uri,n=await(await e(o)).doHover(String(o),P(r));if(n)return{range:S(n.range),contents:[{value:n.contents.value}]}}}}function de(e){const t=g.SymbolKind;switch(e){case p.File:return t.Array;case p.Module:return t.Module;case p.Namespace:return t.Namespace;case p.Package:return t.Package;case p.Class:return t.Class;case p.Method:return t.Method;case p.Property:return t.Property;case p.Field:return t.Field;case p.Constructor:return t.Constructor;case p.Enum:return t.Enum;case p.Interface:return t.Interface;case p.Function:return t.Function;case p.Variable:return t.Variable;case p.Constant:return t.Constant;case p.String:return t.String;case p.Number:return t.Number;case p.Boolean:return t.Boolean;case p.Array:return t.Array;default:return t.Function}}function K(e){return{detail:e.detail||"",range:S(e.range),name:e.name,kind:de(e.kind),selectionRange:S(e.selectionRange),children:e.children.map(K),tags:[]}}function pe(e){return{async provideDocumentSymbols(t){const r=t.uri,a=await(await e(r)).findDocumentSymbols(String(r));if(a)return a.map(K)}}}function ge(e){return{tabSize:e.tabSize,insertSpaces:e.insertSpaces,...e}}function fe(e){return{async provideDocumentFormattingEdits(t,r){const o=t.uri,n=await(await e(o)).format(String(o),ge(r));if(!(!n||n.length===0))return n.map(q)}}}function ve(e){return{range:S(e.range),tooltip:e.tooltip,url:e.target}}function he(e){return{async provideLinks(t){const r=t.uri;return{links:(await(await e(r)).findLinks(String(r))).map(ve)}}}}function Se(e){const t=[];for(const[r,o]of Object.entries(e.changes))for(const a of o)t.push({resource:F.parse(r),edit:{text:a.newText,range:S(a.range)}});return{edits:t}}function ye(e){var t;return{title:e.title,diagnostics:e.diagnostics.map(V),disabled:(t=e.disabled)==null?void 0:t.reason,edit:Se(e.edit),kind:e.kind,isPreferred:e.isPreferred}}function we(e){return{async provideCodeActions(t,r,o){const a=t.uri;return{actions:(await(await e(a)).getCodeAction(String(a),A(r),o.markers.map(ie))).map(ye),dispose(){}}}}}var Ce={comments:{lineComment:"#"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],onEnterRules:[{beforeText:/:\s*$/,action:{indentAction:g.IndentAction.Indent}}]};function Ee(e){const t=ne(b,{label:"yaml",moduleId:"monaco-yaml/yaml.worker",createData:{languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest}});e.onDidChange(()=>{t.updateCreateData({languageSettings:e.diagnosticsOptions,enableSchemaRequest:e.diagnosticsOptions.enableSchemaRequest})}),g.registerCompletionItemProvider(f,ue(t.getWorker)),g.registerHoverProvider(f,me(t.getWorker)),g.registerDefinitionProvider(f,le(t.getWorker)),g.registerDocumentSymbolProvider(f,pe(t.getWorker)),g.registerDocumentFormattingEditProvider(f,fe(t.getWorker)),g.registerLinkProvider(f,he(t.getWorker)),g.registerCodeActionProvider(f,we(t.getWorker)),g.setLanguageConfiguration(f,Ce);let r=N(b,f,x(t.getWorker));e.onDidChange(()=>{r.dispose(),r=N(b,f,x(t.getWorker))})}var U={completion:!0,customTags:[],enableSchemaRequest:!1,format:!0,isKubernetes:!1,hover:!0,schemas:[],validate:!0,yamlVersion:"1.2"};function be(e){const t=new H;let r=e;const o={get onDidChange(){return t.event},get diagnosticsOptions(){return r},setDiagnosticsOptions(a){r={...U,...a},t.fire(o)}};return o}var j=be(U);g.register({id:f,extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml"]});g.onLanguage("yaml",()=>{Ee(j)});function ke(e={}){j.setDiagnosticsOptions(e)}function Me(){const e=(t,...r)=>r.map(o=>`${t}/*${o}`);ke({enableSchemaRequest:!0,hover:!0,completion:!0,validate:!0,format:!0,schemas:[{uri:"/schemas/openapi/2.0.json",fileMatch:e(B,D,M,k)},{uri:"/schemas/openapi/3.0.json",fileMatch:e(J,D,M,k)},{uri:"/schemas/openapi/3.1.json",fileMatch:e(Z,D,M,k)}]})}Me();function De(e){const{value:t,type:r,language:o,selectedUri:a,searchPhrase:n,onSearchPhraseChange:i}=e,u=y.useRef(null),m=y.useRef();return re(u,m,t,o),te(m,t,r,o),$(m,a),ee(m,a),G(m,n,i),u}const _=y.memo(({value:e,type:t,language:r,selectedUri:o,searchPhrase:a,onSearchPhraseChange:n})=>{const i=De({value:e,type:t,language:r,selectedUri:o,searchPhrase:a,onSearchPhraseChange:n});return Y("div",{ref:i,style:{height:"100%"}})});try{_.displayName="MonacoEditorElement",_.__docgenInfo={description:"",displayName:"MonacoEditorElement",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"graphql"'},{value:'"openapi-3-1"'},{value:'"openapi-3-0"'},{value:'"openapi-2-0"'},{value:'"openapi"'},{value:'"asyncapi-2"'},{value:'"json-schema"'},{value:'"markdown"'},{value:'"unknown"'},{value:'"graphql-schema"'},{value:'"graphapi"'},{value:'"introspection"'},{value:'"protobuf-3"'}]}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"enum",value:[{value:'"graphql"'},{value:'"text"'},{value:'"markdown"'},{value:'"yaml"'},{value:'"json"'},{value:'"proto"'}]}},selectedUri:{defaultValue:null,description:"",name:"selectedUri",required:!1,type:{name:"`/${string}`"}},searchPhrase:{defaultValue:null,description:"",name:"searchPhrase",required:!1,type:{name:"string"}},onSearchPhraseChange:{defaultValue:null,description:"",name:"onSearchPhraseChange",required:!1,type:{name:"((value: string) => void)"}}}}}catch{}export{_ as default};
//# sourceMappingURL=MonacoEditorElement-e70ed0c4.js.map
