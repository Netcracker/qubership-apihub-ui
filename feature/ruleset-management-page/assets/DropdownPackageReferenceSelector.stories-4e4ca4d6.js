import{j as e,a as f}from"./createTheme-d4c6d141.js";import{f as P}from"./decorators-9849d2b7.js";import{r as p}from"./index-37ba2b57.js";import{d as v}from"./KeyboardArrowDownOutlined-29dbf4ff.js";import{M as x}from"./MenuButton-aa404cd5.js";import{S as _}from"./SearchBar-4c6f4650.js";import{i as w}from"./arrays-b0979955.js";import{L as A}from"./LoadingIndicator-6106deb0.js";import{B as s}from"./Box-11e4398c.js";import{B as L}from"./Button-7fbb2719.js";import{P as R,N as C,a as I}from"./Placeholder-7ab57df5.js";import{L as V}from"./List-59624ac0.js";import{L as b}from"./ListItem-843e96c4.js";import{L as E}from"./ListItemButton-ec3aaed5.js";import{L as B}from"./ListItemText-7a135c9d.js";import{r as c}from"./reference-samples-74f6e1ef.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./theme-8c2f28df.js";import"./useId-f6e37502.js";import"./useEnhancedEffect-9d60ea74.js";import"./GlobalStyles-a3183719.js";import"./emotion-react.browser.esm-f969ea94.js";import"./_commonjsHelpers-de833af9.js";import"./colors-f1dae8af.js";import"./palette-5cac9847.js";import"./jsx-runtime_commonjs-proxy-74302a61.js";import"./createSvgIcon-473ccb66.js";import"./clsx.m-6cf3b989.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-90078124.js";import"./createChainedFunction-0bab83cf.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./TransitionGroupContext-f40e0036.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useControlled-1dfdd739.js";import"./Menu-8a90c0e2.js";import"./index-891d46e9.js";import"./useTheme-0ad13214.js";import"./Modal-9f2c2b11.js";import"./utils-0c060528.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./Portal-fc00eb8c.js";import"./isHostComponent-73d6e646.js";import"./Paper-dca8f967.js";import"./Grow-452ed02c.js";import"./CircularProgress-76f8944a.js";import"./SearchOutlined-2196b310.js";import"./useDebounce-c4a5dbf1.js";import"./TextField-df0281ba.js";import"./GlobalStyles-974ec2e0.js";import"./IconButton-c2813217.js";import"./ButtonBase-1b5192e9.js";import"./assertThisInitialized-081f9914.js";import"./extendSxProp-acc1143e.js";import"./Typography-d1555f73.js";import"./ListContext-aeaca2aa.js";import"./listItemButtonClasses-dc30136d.js";import"./listItemTextClasses-450da6a6.js";import"./packages-3bb54737.js";import"./version-status-fb60f024.js";import"./package-permissions-7239f49d.js";const l=p.memo(({selectedPackage:o,references:a,loading:d,searchValue:i,onSearch:n,defaultPackageKey:r,onSearchParam:k})=>{const[u,g]=p.useState();return e(s,{display:"flex",alignItems:"center",gap:2,overflow:"hidden","data-testid":"PackageSelector",children:f(L,{sx:{minWidth:4,maxWidth:"200px",width:"200px",height:20,p:0,textOverflow:"ellipsis",boxShadow:"none","&:hover":{boxShadow:"none"}},variant:"text",onClick:({currentTarget:t})=>g(t),endIcon:e(v,{}),children:[e("span",{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",width:"100%"},children:`${(o==null?void 0:o.name)??""}`}),e(x,{anchorEl:u,open:!!u,onClick:t=>t.stopPropagation(),onClose:()=>g(void 0),children:f(s,{sx:{p:2},overflow:"hidden",display:"grid",gap:1,gridTemplateAreas:`
              'searchbar'
              'content'
            `,children:[e(s,{gridArea:"searchbar",overflow:"hidden",children:e(_,{value:i,onValueChange:n,"data-testid":"SearchPackage"})}),e(s,{gridArea:"content",children:d?e(A,{}):e(R,{invisible:w(a),area:C,message:i?I:"No package references",children:e(V,{children:a.map(t=>e(b,{sx:{p:0},children:e(E,{sx:{height:"36px",alignItems:"center"},selected:t.key===r,onClick:()=>k(t.key),children:e(B,{primary:t.name,primaryTypographyProps:{sx:{mt:1}}})})},t.key))})})})]})})]})})});try{l.displayName="DropdownPackageReferenceSelector",l.__docgenInfo={description:"",displayName:"DropdownPackageReferenceSelector",props:{searchValue:{defaultValue:null,description:"",name:"searchValue",required:!0,type:{name:"string"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},references:{defaultValue:null,description:"",name:"references",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>>[]"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!0,type:{name:"(value: string) => void"}},selectedPackage:{defaultValue:null,description:"",name:"selectedPackage",required:!0,type:{name:"Partial<Readonly<{ key: string; kind: ReferenceKind; name: string; version: string; status: VersionStatus; deletedAt: string; deletedBy: string; parentPackages: readonly string[]; latestRevision: boolean; }>> | null"}},defaultPackageKey:{defaultValue:null,description:"",name:"defaultPackageKey",required:!0,type:{name:"string | undefined"}},onSearchParam:{defaultValue:null,description:"",name:"onSearchParam",required:!0,type:{name:"(key: string | undefined) => void"}}}}}catch{}const{useArgs:O}=__STORYBOOK_MODULE_PREVIEW_API__,Ge={title:"Dropdown Package Reference Selector",component:l,args:{references:c,loading:!1},decorators:[P]},m=o=>{const[,a]=O(),d=p.useCallback(n=>{a({references:c.filter(r=>(r==null?void 0:r.name)&&r.name.toLowerCase().includes(n.toLowerCase()))})},[a]),i=p.useCallback(n=>{n&&a({selectedPackage:c.find(r=>(r==null?void 0:r.key)&&r.key.includes(n))})},[a]);return e(l,{...o,onSearch:d,onSearchParam:i})};var h,y,S;m.parameters={...m.parameters,docs:{...(h=m.parameters)==null?void 0:h.docs,source:{originalSource:`args => {
  const [, updateArgs] = useArgs();
  const onSearch = useCallback((value: string) => {
    updateArgs({
      references: references.filter(reference => reference?.name && reference.name.toLowerCase().includes(value.toLowerCase()))
    });
  }, [updateArgs]);
  const onSearchParam = useCallback((value: string | undefined) => {
    if (value) {
      updateArgs({
        selectedPackage: references.find(reference => reference?.key && reference.key.includes(value))
      });
    }
  }, [updateArgs]);
  return <DropdownPackageReferenceSelector {...args} onSearch={onSearch} onSearchParam={onSearchParam} />;
}`,...(S=(y=m.parameters)==null?void 0:y.docs)==null?void 0:S.source}}};const Ye=["DefaultStory"];export{m as DefaultStory,Ye as __namedExportsOrder,Ge as default};
//# sourceMappingURL=DropdownPackageReferenceSelector.stories-4e4ca4d6.js.map
