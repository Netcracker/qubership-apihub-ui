import{j as b}from"./createTheme-d4c6d141.js";import{e as f,R as D}from"./toggleHighContrast-f31e19db.js";import{r as s}from"./index-37ba2b57.js";import{f as R,L as w}from"./graphql-samples-79dbe107.js";import{u as N}from"./useEffectOnce-12abbac4.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./iframe-2f7ab449.js";import"../sb-preview/runtime.js";import"./_commonjsHelpers-de833af9.js";import"./files-221a97f0.js";import"./apihub-builder.es-a0fb97bd.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./strings-8f296fda.js";import"./dialogTitleClasses-c8d9dbc5.js";import"./clsx.m-6cf3b989.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-90078124.js";import"./useTheme-0ad13214.js";import"./Modal-9f2c2b11.js";import"./utils-0c060528.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./createChainedFunction-0bab83cf.js";import"./Portal-fc00eb8c.js";import"./isHostComponent-73d6e646.js";import"./Paper-dca8f967.js";import"./useId-f6e37502.js";import"./DialogTitle-cd1b99ce.js";import"./Typography-d1555f73.js";import"./extendSxProp-acc1143e.js";import"./DialogContent-fd001b96.js";import"./DialogContentText-f02e7458.js";import"./Button-7fbb2719.js";import"./ButtonBase-1b5192e9.js";import"./emotion-react.browser.esm-f969ea94.js";import"./assertThisInitialized-081f9914.js";import"./createSvgIcon-473ccb66.js";function E(e){const r=s.useRef([]),p=s.useRef(null),a=s.useRef(null);s.useEffect(()=>{if(!e.current)return;const i=e.current,l=i.getModifiedEditor(),g=i.getModel();if(!g)return;const o=g.modified.uri.toString();if(p.current===o)return;p.current=o,a.current&&a.current.dispose(),r.current.forEach(t=>{l.removeGlyphMarginWidget(t)}),r.current=[];const c=()=>{r.current.forEach(d=>{l.removeGlyphMarginWidget(d)});const t=i.getLineChanges();if(console.log("Number of changes:",t==null?void 0:t.length),!t)return;const n=[];t.forEach(d=>{const v=d.modifiedStartLineNumber,h=d.modifiedEndLineNumber;console.log(`Adding controls for lines ${v} to ${h}`);for(let m=v;m<=h;m++){const y=document.createElement("button");y.textContent="â†’",y.style.cssText="cursor: pointer; border: none; background: none; font-size: 16px; padding: 0; width: 100%; text-align: center;",y.onclick=_=>{_.preventDefault(),_.stopPropagation(),console.log(`Line control clicked for line ${m}`)};const M={getId:()=>`line-control-${m}`,getDomNode:()=>y,getPosition:()=>({lane:f.GlyphMarginLane.Right,zIndex:10,range:new D(m,1,m,1)})};l.addGlyphMarginWidget(M),n.push(M)}}),console.log(`Total widgets added: ${n.length}`),r.current=n};return c(),a.current=i.onDidUpdateDiff(()=>{console.log("onDidUpdateDiff triggered"),c()}),()=>{a.current&&a.current.dispose()}},[e])}try{E.displayName="useAddLineControls",E.__docgenInfo={description:"",displayName:"useAddLineControls",props:{}}}catch{}function x(e){const{before:r,after:p,type:a,language:i=w,selectedUri:l}=e,g=s.useRef(null),o=s.useRef();return N(()=>(f.defineTheme("custom",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#FFFFFF"}}),o.current=f.createDiffEditor(g.current,{minimap:{enabled:!0},hover:{above:!1},automaticLayout:!0,readOnly:!0,wordWrap:"on",glyphMargin:!0,theme:"custom"}),()=>{var u;(u=o.current)==null||u.dispose()})),s.useEffect(()=>{var u;return(u=o.current)==null||u.setModel({original:f.createModel(r,i),modified:f.createModel(p,i)}),()=>{var c,t,n,d,v,h;(n=(t=(c=o.current)==null?void 0:c.getModel())==null?void 0:t.original)==null||n.dispose(),(h=(v=(d=o.current)==null?void 0:d.getModel())==null?void 0:v.modified)==null||h.dispose()}},[o,r,p,i,a]),E(o),s.useEffect(()=>{var c,t;const u=(t=(c=o.current)==null?void 0:c.getModel())==null?void 0:t.modified.getValue();if(l&&u){const n=R(u,l);if(n){const d=n==null?void 0:n.range.start.line;T(o.current,d+1)}}},[l]),g}function T(e,r){e.revealLineNearTop(r,f.ScrollType.Smooth),e.setPosition({lineNumber:r,column:0}),e.focus()}const L=s.memo(({before:e,after:r,type:p,language:a,selectedUri:i})=>{const l=x({before:e,after:r,type:p,language:a,selectedUri:i});return b("div",{ref:l,style:{height:"100%"}})});try{L.displayName="MonacoDiffEditorElement",L.__docgenInfo={description:"",displayName:"MonacoDiffEditorElement",props:{before:{defaultValue:null,description:"",name:"before",required:!0,type:{name:"string"}},after:{defaultValue:null,description:"",name:"after",required:!0,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"graphql"'},{value:'"openapi-3-1"'},{value:'"openapi-3-0"'},{value:'"openapi-2-0"'},{value:'"openapi"'},{value:'"asyncapi-2"'},{value:'"json-schema"'},{value:'"markdown"'},{value:'"unknown"'},{value:'"graphql-schema"'},{value:'"graphapi"'},{value:'"introspection"'},{value:'"protobuf-3"'}]}},language:{defaultValue:null,description:"",name:"language",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"graphql"'},{value:'"markdown"'},{value:'"yaml"'},{value:'"json"'},{value:'"proto"'}]}},selectedUri:{defaultValue:null,description:"",name:"selectedUri",required:!1,type:{name:"`/${string}`"}}}}}catch{}export{L as default};
//# sourceMappingURL=MonacoDiffEditorElement-33eac26f.js.map
