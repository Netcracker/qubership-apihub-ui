import{P as O,R as F}from"./roles-samples-a93137d3.js";import{j as o,F as U,a as f}from"./createTheme-d4c6d141.js";import{r as a}from"./index-37ba2b57.js";import{d as j}from"./CloseOutlined-2fbe3e42.js";import{P as W}from"./PopupDelegate-deae3236.js";import{u as $,C as R}from"./index.esm-cb87e173.js";import{D as z}from"./DialogForm-2cfd9c64.js";import{C as G,a as H}from"./CheckboxDisabledCheckedIcon-0d190971.js";import{d as K}from"./ErrorOutlined-c2b70912.js";import{R as w}from"./package-permissions-7239f49d.js";import{D as J,a as Q}from"./DialogTitle-cd1b99ce.js";import{I as X}from"./IconButton-c2813217.js";import{D as Y}from"./DialogContent-fd001b96.js";import{T as Z,I as ee}from"./TextField-df0281ba.js";import{B as E}from"./Button-7fbb2719.js";import{F as oe,C as re}from"./FormControlLabel-355b08e5.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-9c75dc50.js";import"./_commonjsHelpers-de833af9.js";import"./jsx-runtime_commonjs-proxy-74302a61.js";import"./createSvgIcon-473ccb66.js";import"./clsx.m-6cf3b989.js";import"./ClassNameGenerator-bd600f10.js";import"./useThemeProps-90078124.js";import"./createChainedFunction-0bab83cf.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./TransitionGroupContext-f40e0036.js";import"./useEnhancedEffect-9d60ea74.js";import"./debounce-517eeb3c.js";import"./isMuiElement-de695f11.js";import"./useId-f6e37502.js";import"./useControlled-1dfdd739.js";import"./dialogTitleClasses-c8d9dbc5.js";import"./useTheme-0ad13214.js";import"./Modal-9f2c2b11.js";import"./utils-0c060528.js";import"./inheritsLoose-5494d9cc.js";import"./index-4da2af8c.js";import"./Portal-fc00eb8c.js";import"./isHostComponent-73d6e646.js";import"./Paper-dca8f967.js";import"./Box-11e4398c.js";import"./extendSxProp-acc1143e.js";import"./Typography-d1555f73.js";import"./ButtonBase-1b5192e9.js";import"./emotion-react.browser.esm-f969ea94.js";import"./assertThisInitialized-081f9914.js";import"./index-891d46e9.js";import"./Menu-8a90c0e2.js";import"./Grow-452ed02c.js";import"./List-59624ac0.js";import"./ListContext-aeaca2aa.js";import"./GlobalStyles-974ec2e0.js";import"./GlobalStyles-a3183719.js";const k=a.memo(()=>o(W,{type:te,render:t=>o(_,{...t})})),te="show-edit-role-dialog",_=a.memo(({open:t,setOpen:i,detail:m})=>{const[l,e,p,d]=a.useMemo(()=>{const{permissions:r,role:s,onConfirm:S,isRoleUnique:n}=m;return[r,s,S,n]},[m]),{handleSubmit:x,control:c,formState:{errors:h,isDirty:V}}=$({defaultValues:{permissions:l.filter(({permission:r})=>(e==null?void 0:e.permissions.includes(r))||r===w),role:e==null?void 0:e.role}}),v=a.useCallback(r=>{i(!1),p({key:(e==null?void 0:e.key)||"",role:r.role,permissions:r.permissions.map(s=>s.permission)})},[p,e==null?void 0:e.key,i]),y=a.useCallback(()=>{i(!1)},[i]),B=a.useCallback(({field:{value:r,onChange:s}})=>{const S=(n,u)=>{if(n)return s([...r,u]);s(r.filter(A=>A.permission!==u.permission))};return o(U,{children:l.map(n=>o(b,{permission:n,onToggleCheckbox:S,checked:r.some(u=>u.permission===n.permission)},n.permission))})},[l]),I=e?"Update":"Create",M=e?"Edit Role":"Create Role";return f(z,{open:t,onClose:y,onSubmit:x(v),width:"440px",children:[f(J,{children:[M,o(X,{sx:{position:"absolute",right:8,top:8,color:"#626D82"},onClick:y,children:o(j,{fontSize:"small"})})]}),f(Y,{sx:{display:"flex",flexDirection:"column",width:"auto",minWidth:"unset"},children:[o(R,{name:"role",rules:{required:"The field must be filled",validate:e?{}:{alreadyExists:r=>(d==null?void 0:d(r))||"Role already exists"}},control:c,render:({field:r})=>{var s;return o(Z,{...r,sx:{mt:"4px",mb:"12px"},required:!0,inputProps:{required:!1},value:r.value,disabled:!!e,label:"Role Name",error:!!h.role,helperText:(s=h.role)==null?void 0:s.message,InputProps:h.role?{endAdornment:o(K,{color:"error","data-testid":"ErrorIcon"})}:{},"data-testid":"RoleNameTextField"})}}),o(ee,{required:!0,sx:{fontWeight:500,color:"#000000"},children:"Select permissions"}),o(R,{name:"permissions",control:c,render:B})]}),f(Q,{children:[o(E,{variant:"contained",type:"submit",disabled:e&&!V,"data-testid":`${I}Button`,children:I}),o(E,{variant:"outlined",onClick:y,"data-testid":"CancelButton",children:"Cancel"})]})]})}),b=a.memo(({permission:t,checked:i,onToggleCheckbox:m})=>{const{permission:l,name:e}=t,p=l===w;function d(x,c){m(c,t)}return o(oe,{label:e,sx:{mt:"6px"},control:o(re,{value:t,disabled:p,checked:i,onChange:d,checkedIcon:p?o(G,{}):o(H,{}),"data-testid":`${t.permission}Checkbox`})},l)});try{k.displayName="EditRoleDialog",k.__docgenInfo={description:"",displayName:"EditRoleDialog",props:{}}}catch{}try{_.displayName="EditRolePopup",_.__docgenInfo={description:"",displayName:"EditRolePopup",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},setOpen:{defaultValue:null,description:"",name:"setOpen",required:!0,type:{name:"(value: boolean) => void"}},detail:{defaultValue:null,description:"",name:"detail",required:!1,type:{name:"Detail"}}}}}catch{}try{b.displayName="PermissionControl",b.__docgenInfo={description:"",displayName:"PermissionControl",props:{permission:{defaultValue:null,description:"",name:"permission",required:!0,type:{name:"Readonly<{ permission: PackagePermission; name: string; }>"}},checked:{defaultValue:null,description:"",name:"checked",required:!0,type:{name:"boolean"}},onToggleCheckbox:{defaultValue:null,description:"",name:"onToggleCheckbox",required:!0,type:{name:"(checked: boolean, permission: Readonly<{ permission: PackagePermission; name: string; }>) => void"}}}}}catch{}const io={title:"Edit Role Dialog",component:_},C={name:"Create",args:{open:!0,detail:{permissions:O,isRoleUnique:t=>{var i;return!((i=F)!=null&&i.some(({role:m})=>m.toLowerCase()===t.toLowerCase()))}}}},g={name:"Edit",args:{open:!0,detail:{permissions:O,role:F[3]}}};var D,P,T;C.parameters={...C.parameters,docs:{...(D=C.parameters)==null?void 0:D.docs,source:{originalSource:`{
  name: 'Create',
  args: {
    open: true,
    detail: {
      permissions: PERMISSIONS_LIST,
      isRoleUnique: (roleName: string) => !ROLES_LIST?.some(({
        role
      }) => role.toLowerCase() === roleName.toLowerCase())
    }
  }
}`,...(T=(P=C.parameters)==null?void 0:P.docs)==null?void 0:T.source}}};var L,N,q;g.parameters={...g.parameters,docs:{...(L=g.parameters)==null?void 0:L.docs,source:{originalSource:`{
  name: 'Edit',
  args: {
    open: true,
    detail: {
      permissions: PERMISSIONS_LIST,
      role: ROLES_LIST[3]
    }
  }
}`,...(q=(N=g.parameters)==null?void 0:N.docs)==null?void 0:q.source}}};const so=["CreateStory","EditStory"];export{C as CreateStory,g as EditStory,so as __namedExportsOrder,io as default};
//# sourceMappingURL=EditRoleDialog.stories-a744df81.js.map
